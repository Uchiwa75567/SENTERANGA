"use strict";(self.webpackChunksenteranga=self.webpackChunksenteranga||[]).push([[743],{743:(W,h,u)=>{u.r(h),u.d(h,{DashboardAgriculteurComponent:()=>Y});var x=u(467),g=u(177),_=u(5776),F=u(3322),y=u(5473),i=u(4341),E=u(8032),d=u.n(E),e=u(4438),C=u(8174);const k=(n,a,t)=>({"bg-yellow-500 text-white":n,"bg-green-500 text-white":a,"bg-red-500 text-white":t}),D=(n,a,t)=>({"bg-yellow-100 text-yellow-800":n,"bg-green-100 text-green-800":a,"bg-red-100 text-red-800":t});function w(n,a){1&n&&(e.j41(0,"div",27)(1,"label",28),e.EFF(2,"\u{1f4c5} P\xe9riode de disponibilit\xe9"),e.k0s(),e.j41(3,"div",8)(4,"div")(5,"label",9),e.EFF(6,"D\xe9but de p\xe9riode *"),e.k0s(),e.nrm(7,"input",64),e.k0s(),e.j41(8,"div")(9,"label",9),e.EFF(10,"Fin de p\xe9riode *"),e.k0s(),e.nrm(11,"input",65),e.k0s()(),e.j41(12,"div",66)(13,"p",67)(14,"strong"),e.EFF(15,"\u2139\ufe0f Note :"),e.k0s(),e.EFF(16," Cette annonce sera indisponible jusqu'\xe0 validation par l'administration, puis disponible uniquement pendant la p\xe9riode d\xe9finie. "),e.k0s()()())}function j(n,a){if(1&n){const t=e.RV6();e.j41(0,"div",68),e.nrm(1,"video",69),e.j41(2,"button",70),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.capturePhoto())}),e.EFF(3," \u{1f4f8} Capturer "),e.k0s()()}}function A(n,a){if(1&n&&(e.j41(0,"div",71),e.EFF(1),e.k0s()),2&n){const t=e.XpG();e.R7$(),e.SpI(" \u2713 ",t.uploadedImageCount," image(s) s\xe9lectionn\xe9e(s) ")}}function P(n,a){1&n&&(e.j41(0,"div",72),e.EFF(1," \u26a0\ufe0f Aucune image s\xe9lectionn\xe9e. L'image est obligatoire pour publier un produit. "),e.k0s())}function I(n,a){1&n&&(e.qSk(),e.j41(0,"svg",73),e.nrm(1,"path",74),e.k0s())}function M(n,a){1&n&&(e.j41(0,"div",92),e.qSk(),e.j41(1,"svg",93),e.nrm(2,"path",94),e.k0s()())}function O(n,a){1&n&&(e.j41(0,"div",95),e.EFF(1," \u{1f4e2} Annonce "),e.k0s())}function R(n,a){if(1&n&&(e.j41(0,"span",98)(1,"span",99),e.EFF(2),e.k0s()()),2&n){const t=e.XpG(2).$implicit,r=e.XpG(2);e.R7$(),e.Y8G("ngClass",e.sMw(2,D,"en_attente"===r.getAnnouncementStatus(t),"validee"===r.getAnnouncementStatus(t),"rejetee"===r.getAnnouncementStatus(t))),e.R7$(),e.SpI(" Statut: ","en_attente"===r.getAnnouncementStatus(t)?"\u23f3 Validation en attente":"validee"===r.getAnnouncementStatus(t)?"\u2713 Valid\xe9e":"\u2717 Rejet\xe9e"," ")}}function T(n,a){if(1&n&&(e.j41(0,"div",96),e.EFF(1," \u{1f4c5} "),e.j41(2,"strong"),e.EFF(3,"P\xe9riode approximative:"),e.k0s(),e.nrm(4,"br"),e.EFF(5),e.nI1(6,"date"),e.nI1(7,"date"),e.DNE(8,R,3,6,"span",97),e.k0s()),2&n){const t=e.XpG().$implicit,r=e.XpG(2);e.R7$(5),e.Lme(" De ",e.i5U(6,3,r.getAnnouncementStartDate(t),"dd/MM/yyyy")," \xe0 ",e.i5U(7,6,r.getAnnouncementEndDate(t),"dd/MM/yyyy")," "),e.R7$(3),e.Y8G("ngIf",r.getAnnouncementStatus(t))}}function S(n,a){if(1&n&&(e.j41(0,"div",79)(1,"div",80),e.DNE(2,M,3,0,"div",81),e.j41(3,"div",82)(4,"span",83),e.EFF(5),e.k0s()(),e.j41(6,"div",84),e.EFF(7),e.k0s(),e.DNE(8,O,2,0,"div",85),e.k0s(),e.j41(9,"div",86)(10,"div",87)(11,"span",88),e.EFF(12),e.k0s()(),e.j41(13,"div",89)(14,"div"),e.EFF(15),e.k0s(),e.j41(16,"div"),e.EFF(17),e.k0s(),e.j41(18,"div"),e.EFF(19),e.k0s(),e.j41(20,"div"),e.EFF(21),e.k0s()(),e.j41(22,"div",90),e.EFF(23),e.k0s(),e.DNE(24,T,9,9,"div",91),e.k0s()()),2&n){const t=a.$implicit,r=e.XpG(2);e.R7$(),e.xc7("background-image",t.images&&t.images.length>0?"url("+t.images[0]+")":"none")("background-size","cover")("background-position","center"),e.R7$(),e.Y8G("ngIf",!t.images||0===t.images.length),e.R7$(3),e.JRh(t.titre),e.R7$(),e.Y8G("ngClass",e.sMw(20,k,"en_attente"===t.statutValidation,"valid\xe9"===t.statutValidation,"rejet\xe9"===t.statutValidation)),e.R7$(),e.SpI(" ","en_attente"===t.statutValidation?"\u23f3 En attente":"valid\xe9"===t.statutValidation?"\u2713 Valid\xe9":"\u2717 Rejet\xe9"," "),e.R7$(),e.Y8G("ngIf",r.isAnnouncement(t)),e.R7$(4),e.SpI(" ",t.categorie," "),e.R7$(3),e.Lme("\u{1f4e6} Quantit\xe9: ",t.quantite," ",t.unite,""),e.R7$(2),e.Lme("\u{1f4ca} Minimum: ",t.quantiteMinimale||"-"," ",t.unite,""),e.R7$(2),e.SpI("\u{1f4b0} Prix/unit\xe9: ",t.prixParUnite||"-"," FCFA"),e.R7$(2),e.SpI("\u{1f4b5} Total: ",t.prix," FCFA"),e.R7$(2),e.SpI(" \u{1f4cd} ",t.localisation," "),e.R7$(),e.Y8G("ngIf",r.isAnnouncement(t))}}function $(n,a){if(1&n&&(e.j41(0,"div",75)(1,"h4",76),e.EFF(2),e.k0s(),e.j41(3,"div",77),e.DNE(4,S,25,24,"div",78),e.k0s()()),2&n){const t=e.XpG();e.R7$(2),e.SpI("\u{1f4ca} Mes produits (",t.products.length,")"),e.R7$(2),e.Y8G("ngForOf",t.products)}}function U(n,a){1&n&&(e.j41(0,"div",100),e.EFF(1,"Aucun produit trouv\xe9."),e.k0s())}function N(n,a){if(1&n){const t=e.RV6();e.j41(0,"div",103)(1,"div",104)(2,"div",105)(3,"div",106),e.EFF(4),e.k0s(),e.j41(5,"div",107),e.EFF(6),e.k0s()(),e.j41(7,"div",108)(8,"input",109),e.mxI("ngModelChange",function(o){const s=e.eBV(t).$implicit,l=e.XpG(2);return e.DH7(l.seedOrderQty[s.id],o)||(l.seedOrderQty[s.id]=o),e.Njj(o)}),e.k0s(),e.j41(9,"button",110),e.bIt("click",function(){const o=e.eBV(t).$implicit,s=e.XpG(2);return e.Njj(s.orderSeed(o))}),e.EFF(10," Commander "),e.k0s()()()()}if(2&n){const t=a.$implicit,r=e.XpG(2);e.R7$(4),e.JRh(t.name),e.R7$(2),e.Lme("\u{1f4b5} ",t.price," FCFA / ",t.unit||"unit\xe9",""),e.R7$(2),e.R50("ngModel",r.seedOrderQty[t.id])}}function B(n,a){if(1&n&&(e.j41(0,"div",101),e.DNE(1,N,11,4,"div",102),e.k0s()),2&n){const t=e.XpG();e.R7$(),e.Y8G("ngForOf",t.seeds)}}function G(n,a){1&n&&(e.j41(0,"div",100),e.EFF(1,"Aucune alerte pour votre r\xe9gion pour le moment."),e.k0s())}function q(n,a){if(1&n&&(e.j41(0,"li",112)(1,"div",113),e.EFF(2),e.k0s(),e.j41(3,"div",114),e.EFF(4),e.k0s()()),2&n){const t=a.$implicit;e.R7$(2),e.JRh(t.title),e.R7$(2),e.JRh(t.message)}}function V(n,a){if(1&n&&(e.j41(0,"ul",29),e.DNE(1,q,5,2,"li",111),e.k0s()),2&n){const t=e.XpG();e.R7$(),e.Y8G("ngForOf",t.alerts)}}let Y=(()=>{class n{constructor(t,r){this.dataService=t,this.fb=r,this.products=[],this.seeds=[],this.seedOrderQty={},this.alerts=[],this.currentUser=null,this.uploadedImageCount=0,this.selectedImages=[],this.cameraActive=!1,this.stream=null,this.isPublishing=!1}ngOnInit(){const t=localStorage.getItem("currentUser");this.currentUser=t?JSON.parse(t):null,this.productForm=this.fb.group({titre:["",i.k0.required],description:["",i.k0.required],categorie:["",i.k0.required],quantite:["",[i.k0.required,i.k0.min(0)]],quantiteMinimale:["",[i.k0.required,i.k0.min(0)]],prixParUnite:["",[i.k0.required,i.k0.min(0)]],unite:["",i.k0.required],localisation:["",i.k0.required],publicationType:["product",i.k0.required],periodeApproximativeDebut:[""],periodeApproximativeFin:[""]}),this.bankForm=this.fb.group({bankName:[""],accountNumber:[""]}),this.loadInitial()}loadInitial(){this.currentUser&&(this.dataService.getProductsByUser(this.currentUser.id).subscribe(t=>this.products=t||[]),this.dataService.getSeedsCatalog().subscribe(t=>{this.seeds=t||[],this.seeds.forEach(r=>this.seedOrderQty[r.id]=1)}),this.currentUser.region&&this.dataService.getAlertsByRegion(this.currentUser.region).subscribe(t=>this.alerts=t||[]),this.currentUser.bankAccount&&this.bankForm.patchValue(this.currentUser.bankAccount))}onImagesSelected(t){this.selectedImages=Array.from(t.target.files||[]),this.uploadedImageCount=this.selectedImages.length}startCamera(){this.cameraActive=!0,navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}}).then(t=>{this.stream=t,setTimeout(()=>{const r=document.getElementById("cameraVideo");r&&(r.srcObject=t)},100)}).catch(t=>{console.error("Camera error:",t),d().fire({icon:"error",title:"Erreur d'acc\xe8s \xe0 la cam\xe9ra",text:"V\xe9rifiez les permissions de votre navigateur",confirmButtonColor:"#22c55e"}),this.cameraActive=!1})}capturePhoto(){const t=document.getElementById("cameraVideo"),r=document.getElementById("cameraCanvas");if(!t||!r)return;const o=r.getContext("2d");o&&(r.width=t.videoWidth,r.height=t.videoHeight,o.drawImage(t,0,0),r.toBlob(s=>{if(s){const l=new File([s],`photo-${Date.now()}.jpg`,{type:"image/jpeg"});this.selectedImages.push(l),this.uploadedImageCount=this.selectedImages.length}},"image/jpeg",.95))}stopCamera(){this.cameraActive=!1,this.stream&&(this.stream.getTracks().forEach(t=>t.stop()),this.stream=null)}publishProduct(){var t=this;return(0,x.A)(function*(){if(t.productForm.valid&&t.currentUser){if(0===t.selectedImages.length)return d().fire({icon:"warning",title:"Image obligatoire",text:"Veuillez importer une photo ou en photographier une avant de publier le produit.",confirmButtonColor:"#22c55e"}),void console.warn("Image upload required but none selected");t.isPublishing=!0;try{let r=[];if(t.selectedImages.length){const m="djha1kqvu",p="senteranga_products";r=yield Promise.all(t.selectedImages.map(function(){var z=(0,x.A)(function*(v,X){const b=new FormData;b.append("file",v),b.append("upload_preset",p),b.append("folder","senteranga_products");const f=yield fetch(`https://api.cloudinary.com/v1_1/${m}/image/upload`,{method:"POST",body:b});if(!f.ok)throw new Error(`Cloudinary upload failed: ${f.statusText}`);return(yield f.json()).secure_url});return function(v,X){return z.apply(this,arguments)}}()))}const o=parseFloat(t.productForm.value.quantite)||0,s=parseFloat(t.productForm.value.prixParUnite)||0,l=o*s,c="announcement"===t.productForm.value.publicationType;if(c){const m=t.productForm.value.periodeApproximativeDebut,p=t.productForm.value.periodeApproximativeFin;if(!m||!p)return void d().fire({icon:"warning",title:"P\xe9riodes requises",text:"Veuillez d\xe9finir la p\xe9riode approximative de disponibilit\xe9 pour l'annonce.",confirmButtonColor:"#22c55e"});if(new Date(m)>=new Date(p))return void d().fire({icon:"warning",title:"P\xe9riodes invalides",text:"La p\xe9riode de fin doit \xeatre post\xe9rieure \xe0 la p\xe9riode de d\xe9but.",confirmButtonColor:"#22c55e"})}const L={id:`prod-${Date.now()}`,agriculteurId:t.currentUser.id,titre:t.productForm.value.titre,description:t.productForm.value.description,categorie:t.productForm.value.categorie,quantite:o,quantiteMinimale:parseFloat(t.productForm.value.quantiteMinimale),prix:l,prixParUnite:s,unite:t.productForm.value.unite,localisation:t.productForm.value.localisation,images:r,statutValidation:"en_attente",statutDisponibilite:c?"reserv\xe9":"disponible",datePublication:(new Date).toISOString(),dateMaj:(new Date).toISOString(),isAnnonce:c,periodeApproximativeDebut:c?t.productForm.value.periodeApproximativeDebut:void 0,periodeApproximativeFin:c?t.productForm.value.periodeApproximativeFin:void 0,statutAnnonce:c?"en_attente":void 0};t.dataService.createProduct(L).subscribe({next:m=>{t.products.unshift(m);const p=c?"Votre annonce est en attente de validation par l'administration. Elle sera disponible selon les dates d\xe9finies une fois valid\xe9e.":"Votre produit est en attente de validation par l'administration.";d().fire({icon:"success",title:c?"Annonce publi\xe9e !":"Produit publi\xe9 !",text:p,confirmButtonColor:"#22c55e"}),t.resetProductForm(),t.isPublishing=!1},error:m=>{console.error("Error publishing product",m),d().fire({icon:"error",title:"Erreur de publication",text:"Une erreur s'est produite lors de la publication du produit.",confirmButtonColor:"#22c55e"}),t.isPublishing=!1}})}catch(r){console.error("Image upload failed",r),d().fire({icon:"error",title:"\xc9chec de l'upload",text:"Une erreur s'est produite lors de l'upload des images.",confirmButtonColor:"#22c55e"}),t.isPublishing=!1}}else{const r=Object.keys(t.productForm.controls).filter(s=>t.productForm.get(s)?.invalid);console.warn("Product form invalid controls:",r);const o=r.length?r.join(", "):"inconnus";d().fire({icon:"warning",title:"Champs obligatoires manquants",text:"Veuillez remplir tous les champs obligatoires. Champs invalides: "+o,confirmButtonColor:"#22c55e"})}})()}resetProductForm(){this.productForm.reset(),this.selectedImages=[],this.uploadedImageCount=0,this.stopCamera()}convertImagesToBase64(t){return Promise.all(t.map(r=>new Promise(o=>{const s=new FileReader;s.onload=()=>{o(s.result)},s.readAsDataURL(r)})))}saveBankAccount(){if(!this.currentUser)return;const t=this.bankForm.value;this.dataService.updateUserBankAccount(this.currentUser.id,{bankName:t.bankName||"",accountNumber:t.accountNumber||""}).subscribe({next:o=>{this.currentUser=o,localStorage.setItem("currentUser",JSON.stringify(o)),d().fire({icon:"success",title:"Succ\xe8s",text:"Compte bancaire enregistr\xe9 avec succ\xe8s",confirmButtonColor:"#22c55e"})},error:o=>{console.error(o),d().fire({icon:"error",title:"Erreur",text:"Erreur lors de l'enregistrement du compte bancaire",confirmButtonColor:"#22c55e"})}})}isAnnouncement(t){return!0===t.isAnnonce}getAnnouncementStartDate(t){return t.periodeApproximativeDebut||""}getAnnouncementEndDate(t){return t.periodeApproximativeFin||""}getAnnouncementStatus(t){return t.statutAnnonce||""}orderSeed(t){if(!this.currentUser)return;const r=this.seedOrderQty[t.id]||1,o={id:`order-${Date.now()}`,userId:this.currentUser.id,seedId:t.id,seedName:t.name,quantity:r,total:(t.price||0)*r,status:"paid",createdAt:(new Date).toISOString()};this.dataService.createSeedOrder(o).subscribe({next:s=>{d().fire({icon:"success",title:"Commande pass\xe9e",text:`Commande pass\xe9e: ${o.seedName} x${r}`,confirmButtonColor:"#22c55e"})},error:s=>{console.error(s),d().fire({icon:"error",title:"Erreur de commande",text:"Une erreur s'est produite lors de la commande",confirmButtonColor:"#22c55e"})}})}static{this.\u0275fac=function(r){return new(r||n)(e.rXU(C.u),e.rXU(i.ok))}}static{this.\u0275cmp=e.VBU({type:n,selectors:[["app-dashboard-agriculteur"]],standalone:!0,features:[e.aNF],decls:141,vars:19,consts:[[1,"pt-20","w-full","px-4","sm:px-6","md:px-8","py-6","sm:py-8","bg-gray-50"],[1,"max-w-7xl","mx-auto"],[1,"text-2xl","sm:text-3xl","md:text-4xl","font-bold","mb-6","sm:mb-8","text-gray-900"],[1,"grid","grid-cols-1","lg:grid-cols-3","gap-4","sm:gap-6"],[1,"lg:col-span-2","space-y-4","sm:space-y-6"],[1,"bg-white","rounded-lg","shadow","p-4","sm:p-6"],[1,"text-lg","sm:text-xl","font-bold","mb-4","sm:mb-5","text-gray-900"],[1,"space-y-3","sm:space-y-4",3,"ngSubmit","formGroup"],[1,"grid","grid-cols-1","sm:grid-cols-2","gap-3","sm:gap-4"],[1,"block","text-sm","font-semibold","mb-2","text-gray-700"],["formControlName","titre","placeholder","Ex: Tomates rouges","required","",1,"w-full","bg-white","border","border-gray-300","rounded-lg","px-3","sm:px-4","py-2","sm:py-3","text-base","focus:ring-2","focus:ring-senteranga-green","focus:border-transparent","outline-none"],["formControlName","categorie","required","",1,"w-full","bg-white","border","border-gray-300","rounded-lg","px-3","sm:px-4","py-2","sm:py-3","text-base","focus:ring-2","focus:ring-senteranga-green","focus:border-transparent","outline-none"],["value",""],["value","L\xe9gumes"],["value","Fruits"],["value","C\xe9r\xe9ales"],["formControlName","description","rows","4","placeholder","D\xe9crivez votre produit...","required","",1,"w-full","bg-white","border","border-gray-300","rounded-lg","px-3","sm:px-4","py-2","sm:py-3","text-base","focus:ring-2","focus:ring-senteranga-green","focus:border-transparent","outline-none"],[1,"grid","grid-cols-2","sm:grid-cols-4","gap-3","sm:gap-4"],["type","number","formControlName","quantite","placeholder","Quantit\xe9","min","0","required","",1,"w-full","bg-white","border","border-gray-300","rounded-lg","px-3","sm:px-4","py-2","sm:py-3","text-base","focus:ring-2","focus:ring-senteranga-green","focus:border-transparent","outline-none"],["type","number","formControlName","quantiteMinimale","placeholder","Min","min","0","required","",1,"w-full","bg-white","border","border-gray-300","rounded-lg","px-3","sm:px-4","py-2","sm:py-3","text-base","focus:ring-2","focus:ring-senteranga-green","focus:border-transparent","outline-none"],["formControlName","unite","required","",1,"w-full","bg-white","border","border-gray-300","rounded-lg","px-3","sm:px-4","py-2","sm:py-3","text-base","focus:ring-2","focus:ring-senteranga-green","focus:border-transparent","outline-none"],["value","kg"],["value","tonne"],["value","litre"],["value","unite"],["type","number","formControlName","prixParUnite","placeholder","Prix","min","0","required","",1,"w-full","bg-white","border","border-gray-300","rounded-lg","px-3","sm:px-4","py-2","sm:py-3","text-base","focus:ring-2","focus:ring-senteranga-green","focus:border-transparent","outline-none"],["formControlName","localisation","placeholder","Ville, Village, etc.","required","",1,"w-full","bg-white","border","border-gray-300","rounded-lg","px-3","sm:px-4","py-2","sm:py-3","text-base","focus:ring-2","focus:ring-senteranga-green","focus:border-transparent","outline-none"],[1,"border-t","pt-4"],[1,"block","text-sm","font-bold","mb-3","text-gray-900"],[1,"space-y-3"],[1,"flex","items-center"],["type","radio","id","product","formControlName","publicationType","value","product",1,"mr-3"],["for","product",1,"text-sm","font-medium"],["type","radio","id","announcement","formControlName","publicationType","value","announcement",1,"mr-3"],["for","announcement",1,"text-sm","font-medium"],["class","border-t pt-4",4,"ngIf"],[1,"border-l-4","border-senteranga-green","pl-4"],[1,"text-red-600","font-bold"],[1,"ml-2","inline-block","px-2","py-1","bg-red-50","text-red-700","text-xs","font-semibold","rounded"],[1,"flex","flex-col","sm:flex-row","gap-2","sm:gap-3","mb-4"],["type","file","id","fileInput","multiple","","accept","image/*",1,"flex-1","border","border-gray-300","rounded-lg","px-3","sm:px-4","py-2","sm:py-3","text-sm","focus:ring-2","focus:ring-senteranga-green","focus:border-transparent","outline-none",3,"change"],["type","button",1,"px-4","py-2","sm:py-3","bg-blue-600","text-white","rounded-lg","hover:bg-blue-700","font-medium","text-sm","sm:text-base","whitespace-nowrap",3,"click"],["class","border border-gray-300 rounded-lg p-3 sm:p-4 bg-gray-100 mb-4",4,"ngIf"],["class","text-sm font-medium text-green-600 mt-2 p-3 bg-green-50 rounded-lg",4,"ngIf"],["class","text-sm font-medium text-red-600 mt-2 p-3 bg-red-50 rounded-lg border border-red-200",4,"ngIf"],["id","cameraCanvas",2,"display","none"],[1,"flex","flex-col","sm:flex-row","gap-2","sm:gap-3","pt-2","sm:pt-4"],["type","submit",1,"px-6","py-2","sm:py-3","bg-senteranga-green","text-white","rounded-lg","hover:bg-green-700","disabled:bg-gray-400","disabled:cursor-not-allowed","font-semibold","text-sm","sm:text-base","flex","items-center","justify-center","gap-2",3,"disabled"],["class","w-4 h-4 animate-spin","fill","none","stroke","currentColor","viewBox","0 0 24 24",4,"ngIf"],["type","button",1,"px-6","py-2","sm:py-3","bg-gray-200","text-gray-700","rounded-lg","hover:bg-gray-300","font-medium","text-sm","sm:text-base",3,"click"],["class","mt-6 sm:mt-8 pt-6 sm:pt-8 border-t",4,"ngIf"],[1,"text-lg","sm:text-xl","font-bold","mb-3","text-gray-900"],[1,"text-sm","text-gray-600","mb-4"],[1,"w-full","px-6","py-2","sm:py-3","bg-blue-600","text-white","rounded-lg","hover:bg-blue-700","font-medium","text-sm","sm:text-base"],["class","text-sm text-gray-600 py-6 text-center bg-gray-50 rounded-lg",4,"ngIf"],["class","space-y-3 sm:space-y-4",4,"ngIf"],[1,"space-y-4","sm:space-y-6"],[1,"text-lg","sm:text-xl","font-bold","mb-4","text-gray-900"],["formControlName","bankName","placeholder","Nom de la banque",1,"w-full","bg-white","border","border-gray-300","rounded-lg","px-3","sm:px-4","py-2","sm:py-3","text-base","focus:ring-2","focus:ring-senteranga-green","focus:border-transparent","outline-none"],["formControlName","accountNumber","placeholder","IBAN ou num\xe9ro de compte",1,"w-full","bg-white","border","border-gray-300","rounded-lg","px-3","sm:px-4","py-2","sm:py-3","text-base","focus:ring-2","focus:ring-senteranga-green","focus:border-transparent","outline-none"],[1,"flex","flex-col","sm:flex-row","gap-2","sm:gap-3"],["type","submit",1,"flex-1","px-4","py-2","sm:py-3","bg-green-600","text-white","rounded-lg","hover:bg-green-700","font-medium","text-sm","sm:text-base"],["type","button",1,"flex-1","px-4","py-2","sm:py-3","bg-gray-200","text-gray-700","rounded-lg","hover:bg-gray-300","font-medium","text-sm","sm:text-base",3,"click"],["class","space-y-3",4,"ngIf"],["type","date","formControlName","periodeApproximativeDebut","required","",1,"w-full","bg-white","border","border-gray-300","rounded-lg","px-3","sm:px-4","py-2","sm:py-3","text-base","focus:ring-2","focus:ring-senteranga-green","focus:border-transparent","outline-none"],["type","date","formControlName","periodeApproximativeFin","required","",1,"w-full","bg-white","border","border-gray-300","rounded-lg","px-3","sm:px-4","py-2","sm:py-3","text-base","focus:ring-2","focus:ring-senteranga-green","focus:border-transparent","outline-none"],[1,"mt-3","p-3","bg-blue-50","border","border-blue-200","rounded-lg"],[1,"text-sm","text-blue-700"],[1,"border","border-gray-300","rounded-lg","p-3","sm:p-4","bg-gray-100","mb-4"],["id","cameraVideo","autoplay","","playsinline","",1,"w-full","rounded-lg","mb-3",2,"max-height","300px"],["type","button",1,"w-full","px-4","py-2","sm:py-3","bg-green-600","text-white","rounded-lg","hover:bg-green-700","font-medium","text-sm","sm:text-base",3,"click"],[1,"text-sm","font-medium","text-green-600","mt-2","p-3","bg-green-50","rounded-lg"],[1,"text-sm","font-medium","text-red-600","mt-2","p-3","bg-red-50","rounded-lg","border","border-red-200"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","animate-spin"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"],[1,"mt-6","sm:mt-8","pt-6","sm:pt-8","border-t"],[1,"text-lg","font-bold","mb-6","text-gray-900"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-6"],["class","bg-white rounded-xl overflow-hidden shadow-md hover:shadow-xl transition-shadow",4,"ngFor","ngForOf"],[1,"bg-white","rounded-xl","overflow-hidden","shadow-md","hover:shadow-xl","transition-shadow"],[1,"relative","h-48","rounded-t-xl","overflow-hidden","bg-gray-200"],["class","w-full h-full flex items-center justify-center bg-gray-100",4,"ngIf"],[1,"absolute","bottom-3","left-3","bg-white/95","px-3","py-1","rounded-md","shadow-sm"],[1,"text-sm","font-bold","text-gray-900"],[1,"absolute","top-3","right-3","px-2","py-1","rounded-full","text-xs","font-semibold",3,"ngClass"],["class","absolute top-3 left-3 px-2 py-1 rounded-full text-xs font-semibold bg-purple-500 text-white",4,"ngIf"],[1,"p-4","space-y-3"],[1,"flex","items-center","gap-2"],[1,"px-2","py-1","rounded","text-xs","font-semibold","bg-blue-50","text-blue-600"],[1,"space-y-1","text-xs","font-medium","text-gray-900"],[1,"text-xs","text-gray-600","pt-2","border-t"],["class","text-xs text-purple-600 pt-2 border-t bg-purple-50 p-2 rounded",4,"ngIf"],[1,"w-full","h-full","flex","items-center","justify-center","bg-gray-100"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-12","h-12","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"],[1,"absolute","top-3","left-3","px-2","py-1","rounded-full","text-xs","font-semibold","bg-purple-500","text-white"],[1,"text-xs","text-purple-600","pt-2","border-t","bg-purple-50","p-2","rounded"],["class","block mt-1",4,"ngIf"],[1,"block","mt-1"],[1,"inline-flex","text-xs","px-2","py-1","rounded-full","font-semibold",3,"ngClass"],[1,"text-sm","text-gray-600","py-6","text-center","bg-gray-50","rounded-lg"],[1,"space-y-3","sm:space-y-4"],["class","border border-gray-300 rounded-lg p-4 hover:shadow transition",4,"ngFor","ngForOf"],[1,"border","border-gray-300","rounded-lg","p-4","hover:shadow","transition"],[1,"flex","flex-col","sm:flex-row","sm:items-center","sm:justify-between","gap-3"],[1,"flex-1"],[1,"font-semibold","text-gray-900"],[1,"text-sm","text-gray-600","mt-1"],[1,"flex","items-center","gap-2","w-full","sm:w-auto"],["type","number","min","1",1,"w-16","bg-white","border","border-gray-300","rounded-lg","px-2","py-2","text-sm","focus:ring-2","focus:ring-senteranga-green","outline-none",3,"ngModelChange","ngModel"],[1,"flex-1","sm:flex-none","px-4","py-2","bg-senteranga-green","text-white","rounded-lg","hover:bg-green-700","font-medium","text-sm",3,"click"],["class","border-l-4 border-orange-500 pl-3 sm:pl-4 py-2",4,"ngFor","ngForOf"],[1,"border-l-4","border-orange-500","pl-3","sm:pl-4","py-2"],[1,"font-semibold","text-gray-900","text-sm"],[1,"text-xs","text-gray-600","mt-1"]],template:function(r,o){if(1&r&&(e.nrm(0,"app-header"),e.j41(1,"section",0)(2,"div",1)(3,"h1",2),e.EFF(4,"Espace Agriculteur"),e.k0s(),e.j41(5,"div",3)(6,"div",4)(7,"div",5)(8,"h2",6),e.EFF(9,"\u{1f4e6} Publier un produit"),e.k0s(),e.j41(10,"form",7),e.bIt("ngSubmit",function(){return o.publishProduct()}),e.j41(11,"div",8)(12,"div")(13,"label",9),e.EFF(14,"Titre *"),e.k0s(),e.nrm(15,"input",10),e.k0s(),e.j41(16,"div")(17,"label",9),e.EFF(18,"Cat\xe9gorie *"),e.k0s(),e.j41(19,"select",11)(20,"option",12),e.EFF(21,"S\xe9lectionner une cat\xe9gorie"),e.k0s(),e.j41(22,"option",13),e.EFF(23,"L\xe9gumes"),e.k0s(),e.j41(24,"option",14),e.EFF(25,"Fruits"),e.k0s(),e.j41(26,"option",15),e.EFF(27,"C\xe9r\xe9ales"),e.k0s()()()(),e.j41(28,"div")(29,"label",9),e.EFF(30,"Description *"),e.k0s(),e.nrm(31,"textarea",16),e.k0s(),e.j41(32,"div",17)(33,"div")(34,"label",9),e.EFF(35,"Quantit\xe9 *"),e.k0s(),e.nrm(36,"input",18),e.k0s(),e.j41(37,"div")(38,"label",9),e.EFF(39,"Min. *"),e.k0s(),e.nrm(40,"input",19),e.k0s(),e.j41(41,"div")(42,"label",9),e.EFF(43,"Unit\xe9 *"),e.k0s(),e.j41(44,"select",20)(45,"option",12),e.EFF(46,"Unit\xe9"),e.k0s(),e.j41(47,"option",21),e.EFF(48,"kg"),e.k0s(),e.j41(49,"option",22),e.EFF(50,"Tonne"),e.k0s(),e.j41(51,"option",23),e.EFF(52,"Litre"),e.k0s(),e.j41(53,"option",24),e.EFF(54,"Unit\xe9"),e.k0s()()(),e.j41(55,"div")(56,"label",9),e.EFF(57,"Prix/unit\xe9 *"),e.k0s(),e.nrm(58,"input",25),e.k0s()(),e.j41(59,"div")(60,"label",9),e.EFF(61,"Localisation *"),e.k0s(),e.nrm(62,"input",26),e.k0s(),e.j41(63,"div",27)(64,"label",28),e.EFF(65,"Type de publication"),e.k0s(),e.j41(66,"div",29)(67,"div",30),e.nrm(68,"input",31),e.j41(69,"label",32),e.EFF(70,"Produit imm\xe9diat \u2014 Disponible tout de suite"),e.k0s()(),e.j41(71,"div",30),e.nrm(72,"input",33),e.j41(73,"label",34),e.EFF(74,"Annonce \u2014 Disponible \xe0 une p\xe9riode d\xe9finie"),e.k0s()()()(),e.DNE(75,w,17,0,"div",35),e.j41(76,"div",36)(77,"label",28),e.EFF(78," \u{1f4f7} Images "),e.j41(79,"span",37),e.EFF(80,"*"),e.k0s(),e.j41(81,"span",38),e.EFF(82,"OBLIGATOIRE"),e.k0s()(),e.j41(83,"div",39)(84,"input",40),e.bIt("change",function(l){return o.onImagesSelected(l)}),e.k0s(),e.j41(85,"button",41),e.bIt("click",function(){return o.cameraActive?o.stopCamera():o.startCamera()}),e.EFF(86),e.k0s()(),e.DNE(87,j,4,0,"div",42)(88,A,2,1,"div",43)(89,P,2,0,"div",44),e.k0s(),e.nrm(90,"canvas",45),e.j41(91,"div",46)(92,"button",47),e.DNE(93,I,2,0,"svg",48),e.j41(94,"span"),e.EFF(95),e.k0s()(),e.j41(96,"button",49),e.bIt("click",function(){return o.resetProductForm()}),e.EFF(97," Annuler "),e.k0s()()(),e.DNE(98,$,5,2,"div",50),e.k0s(),e.j41(99,"div",5)(100,"h2",51),e.EFF(101,"\u{1f4b0} Demande de subvention / investissement"),e.k0s(),e.j41(102,"p",52),e.EFF(103,"Formulaires de demande (subvention / investissement) \u2014 visibilit\xe9 pour les institutions et investisseurs."),e.k0s(),e.j41(104,"button",53),e.EFF(105," Faire une demande "),e.k0s()(),e.j41(106,"div",5)(107,"h2",51),e.EFF(108,"\u{1f331} Catalogue de semences"),e.k0s(),e.j41(109,"p",52),e.EFF(110,"Consultez le catalogue, commandez et payez pour am\xe9liorer votre production."),e.k0s(),e.DNE(111,U,2,0,"div",54)(112,B,2,1,"div",55),e.k0s()(),e.j41(113,"aside",56)(114,"div",5)(115,"h3",57),e.EFF(116,"\u{1f3e6} Compte bancaire"),e.k0s(),e.j41(117,"p",52),e.EFF(118,"Ajouter un compte pour recevoir paiements et subventions."),e.k0s(),e.j41(119,"form",7),e.bIt("ngSubmit",function(){return o.saveBankAccount()}),e.j41(120,"div")(121,"label",9),e.EFF(122,"Banque"),e.k0s(),e.nrm(123,"input",58),e.k0s(),e.j41(124,"div")(125,"label",9),e.EFF(126,"Num\xe9ro de compte"),e.k0s(),e.nrm(127,"input",59),e.k0s(),e.j41(128,"div",60)(129,"button",61),e.EFF(130," \u2713 Enregistrer "),e.k0s(),e.j41(131,"button",62),e.bIt("click",function(){return o.bankForm.reset()}),e.EFF(132," Annuler "),e.k0s()()()(),e.j41(133,"div",5)(134,"h3",57),e.EFF(135,"\u26a0\ufe0f Alertes / Conseils"),e.k0s(),e.j41(136,"p",52),e.EFF(137,"Recevez des alertes filtr\xe9es par r\xe9gion."),e.k0s(),e.DNE(138,G,2,0,"div",54)(139,V,2,1,"ul",63),e.k0s()()()()(),e.nrm(140,"app-footer")),2&r){let s;e.R7$(10),e.AVh("opacity-50",o.isPublishing)("pointer-events-none",o.isPublishing),e.Y8G("formGroup",o.productForm),e.R7$(65),e.Y8G("ngIf","announcement"===(null==(s=o.productForm.get("publicationType"))?null:s.value)),e.R7$(11),e.SpI(" ",o.cameraActive?"\u2715 Fermer":"\u{1f4f7} Photo"," "),e.R7$(),e.Y8G("ngIf",o.cameraActive),e.R7$(),e.Y8G("ngIf",o.uploadedImageCount>0),e.R7$(),e.Y8G("ngIf",0===o.uploadedImageCount),e.R7$(3),e.Y8G("disabled",o.isPublishing),e.R7$(),e.Y8G("ngIf",o.isPublishing),e.R7$(2),e.JRh(o.isPublishing?"Publication en cours...":"\u2713 Publier le produit"),e.R7$(3),e.Y8G("ngIf",o.products.length>0),e.R7$(13),e.Y8G("ngIf",0===o.seeds.length),e.R7$(),e.Y8G("ngIf",o.seeds.length>0),e.R7$(7),e.Y8G("formGroup",o.bankForm),e.R7$(19),e.Y8G("ngIf",0===o.alerts.length),e.R7$(),e.Y8G("ngIf",o.alerts.length>0)}},dependencies:[g.MD,g.YU,g.Sq,g.bT,g.vh,_.iI,F.l,y.n,i.X1,i.qT,i.xH,i.y7,i.me,i.Q0,i.wz,i.Fm,i.BC,i.cb,i.YS,i.VZ,i.j4,i.JD,i.YN,i.vS],styles:["input[_ngcontent-%COMP%]:focus, textarea[_ngcontent-%COMP%]:focus, select[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 3px #00843d1a}button[_ngcontent-%COMP%], input[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{transition:all .3s ease}@media (max-width: 640px){button[_ngcontent-%COMP%], input[type=submit][_ngcontent-%COMP%], input[type=button][_ngcontent-%COMP%]{min-height:44px}input[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{font-size:16px}video[_ngcontent-%COMP%]{width:100%;object-fit:cover}.grid-cols-2[_ngcontent-%COMP%]{grid-template-columns:1fr 1fr;gap:.75rem}.flex-col.sm\\:flex-row[_ngcontent-%COMP%]{gap:.5rem}aside[_ngcontent-%COMP%]{order:2}}@media (min-width: 640px) and (max-width: 1024px){.grid-cols-1.sm\\:grid-cols-2[_ngcontent-%COMP%]{grid-template-columns:1fr 1fr}.grid-cols-2.sm\\:grid-cols-4[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}@media (min-width: 1024px){.grid-cols-2.sm\\:grid-cols-4[_ngcontent-%COMP%]{grid-template-columns:repeat(4,1fr)}aside[_ngcontent-%COMP%]{position:sticky;top:120px}}@media (max-width: 640px){h1[_ngcontent-%COMP%]{font-size:1.5rem;line-height:2rem}h2[_ngcontent-%COMP%]{font-size:1.125rem;line-height:1.75rem}h3[_ngcontent-%COMP%]{font-size:1rem;line-height:1.5rem}}.bg-yellow-100[_ngcontent-%COMP%], .bg-green-100[_ngcontent-%COMP%], .bg-red-100[_ngcontent-%COMP%]{white-space:nowrap}.border-gray-300[_ngcontent-%COMP%]{border-width:1px}.focus\\:ring-2[_ngcontent-%COMP%]{transition:box-shadow .2s ease}html[_ngcontent-%COMP%]{scroll-behavior:smooth}#cameraVideo[_ngcontent-%COMP%]{background:#000;border-radius:.5rem;display:block;width:100%}.border-gray-300[_ngcontent-%COMP%]:hover{transition:all .2s ease}form[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{margin-bottom:1rem}@media (max-width: 640px){form[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{margin-bottom:.75rem}}@media (prefers-reduced-motion: reduce){*[_ngcontent-%COMP%]{animation:none!important;transition:none!important}}"]})}}return n})()}}]);