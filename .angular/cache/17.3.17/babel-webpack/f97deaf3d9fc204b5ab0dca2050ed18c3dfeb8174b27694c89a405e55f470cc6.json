{"ast":null,"code":"import { CommonModule } from '@angular/common';\nimport { HeaderComponent } from '../../components/header/header.component';\nimport { FooterComponent } from '../../components/footer/footer.component';\nimport { FormsModule } from '@angular/forms';\nimport Swal from 'sweetalert2';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/data.service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/forms\";\nconst _c0 = (a0, a1) => ({\n  \"bg-green-100 text-green-800 border-green-400\": a0,\n  \"bg-red-100 text-red-800 border-red-400\": a1\n});\nfunction DashboardAdminComponent_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 12);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction2(2, _c0, ctx_r0.toastType === \"success\", ctx_r0.toastType === \"error\"));\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", ctx_r0.toastMessage, \" \");\n  }\n}\nfunction DashboardAdminComponent_div_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 13);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", ctx_r0.errorMessage, \" \");\n  }\n}\nfunction DashboardAdminComponent_div_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 14)(1, \"div\", 15);\n    i0.ɵɵtext(2, \"Chargement des utilisateurs...\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction DashboardAdminComponent_div_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 16)(1, \"p\", 17);\n    i0.ɵɵtext(2, \"\\u2713 Tous les utilisateurs ont \\u00E9t\\u00E9 valid\\u00E9s! Il n'y a aucune inscription en attente.\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction DashboardAdminComponent_div_8_tr_15_span_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 35);\n    i0.ɵɵtext(1, \" \\u23F3 En attente \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction DashboardAdminComponent_div_8_tr_15_span_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 36);\n    i0.ɵɵtext(1, \" \\u2713 Approuv\\u00E9 \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction DashboardAdminComponent_div_8_tr_15_span_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 37);\n    i0.ɵɵtext(1, \" \\u2717 Rejet\\u00E9 \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction DashboardAdminComponent_div_8_tr_15_span_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 38);\n    i0.ɵɵtext(1, \" \\u23F3 Non d\\u00E9fini \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction DashboardAdminComponent_div_8_tr_15_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r2 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"tr\", 23)(1, \"td\", 24);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\", 25)(4, \"a\", 26);\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(6, \"td\", 25)(7, \"span\", 27);\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(9, \"td\", 25);\n    i0.ɵɵtemplate(10, DashboardAdminComponent_div_8_tr_15_span_10_Template, 2, 0, \"span\", 28)(11, DashboardAdminComponent_div_8_tr_15_span_11_Template, 2, 0, \"span\", 29)(12, DashboardAdminComponent_div_8_tr_15_span_12_Template, 2, 0, \"span\", 30)(13, DashboardAdminComponent_div_8_tr_15_span_13_Template, 2, 0, \"span\", 31);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"td\", 25)(15, \"div\", 32)(16, \"button\", 33);\n    i0.ɵɵlistener(\"click\", function DashboardAdminComponent_div_8_tr_15_Template_button_click_16_listener() {\n      const u_r3 = i0.ɵɵrestoreView(_r2).$implicit;\n      const ctx_r0 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r0.approve(u_r3));\n    });\n    i0.ɵɵtext(17, \" \\u2713 Approuver \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(18, \"button\", 34);\n    i0.ɵɵlistener(\"click\", function DashboardAdminComponent_div_8_tr_15_Template_button_click_18_listener() {\n      const u_r3 = i0.ɵɵrestoreView(_r2).$implicit;\n      const ctx_r0 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r0.reject(u_r3));\n    });\n    i0.ɵɵtext(19, \" \\u2717 Rejeter \");\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const u_r3 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate2(\"\", u_r3.firstName, \" \", u_r3.lastName, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"href\", \"tel:\" + u_r3.phone, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(u_r3.phone);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", u_r3.userType === \"agriculteur\" ? \"\\uD83C\\uDF3E Agriculteur\" : \"\\uD83D\\uDC64 \" + u_r3.userType, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", u_r3.validationStatus === \"pending\");\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", u_r3.validationStatus === \"approved\");\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", u_r3.validationStatus === \"rejected\");\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", !u_r3.validationStatus);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"disabled\", u_r3.validationStatus === \"approved\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"disabled\", u_r3.validationStatus === \"rejected\");\n  }\n}\nfunction DashboardAdminComponent_div_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 18)(1, \"table\", 19)(2, \"thead\", 20)(3, \"tr\")(4, \"th\", 21);\n    i0.ɵɵtext(5, \"Nom Complet\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"th\", 21);\n    i0.ɵɵtext(7, \"T\\u00E9l\\u00E9phone\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"th\", 21);\n    i0.ɵɵtext(9, \"Type d'Utilisateur\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"th\", 21);\n    i0.ɵɵtext(11, \"Statut\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"th\", 21);\n    i0.ɵɵtext(13, \"Actions\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(14, \"tbody\");\n    i0.ɵɵtemplate(15, DashboardAdminComponent_div_8_tr_15_Template, 20, 11, \"tr\", 22);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(15);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.users);\n  }\n}\nfunction DashboardAdminComponent_div_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 39)(1, \"div\", 40);\n    i0.ɵɵtext(2, \"\\uD83D\\uDCE2 Aucune annonce en attente\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"p\", 41);\n    i0.ɵɵtext(4, \"Toutes les annonces ont \\u00E9t\\u00E9 trait\\u00E9es !\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction DashboardAdminComponent_div_13_div_1_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 61);\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(1, \"svg\", 62);\n    i0.ɵɵelement(2, \"path\", 63);\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction DashboardAdminComponent_div_13_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 44)(1, \"div\", 45);\n    i0.ɵɵtemplate(2, DashboardAdminComponent_div_13_div_1_div_2_Template, 3, 0, \"div\", 46);\n    i0.ɵɵelementStart(3, \"div\", 47);\n    i0.ɵɵtext(4, \" \\uD83D\\uDCE2 Annonce \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"div\", 48)(6, \"span\", 49);\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(8, \"div\", 50)(9, \"div\", 51)(10, \"p\", 52);\n    i0.ɵɵtext(11);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"p\");\n    i0.ɵɵtext(13);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(14, \"div\", 53)(15, \"span\", 54);\n    i0.ɵɵtext(16);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(17, \"div\", 55)(18, \"div\", 56);\n    i0.ɵɵtext(19, \"\\uD83D\\uDCC5 P\\u00E9riode de disponibilit\\u00E9:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(20, \"div\");\n    i0.ɵɵtext(21);\n    i0.ɵɵpipe(22, \"date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(23, \"div\");\n    i0.ɵɵtext(24);\n    i0.ɵɵpipe(25, \"date\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(26, \"div\", 57)(27, \"div\");\n    i0.ɵɵtext(28);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(29, \"div\");\n    i0.ɵɵtext(30);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(31, \"div\");\n    i0.ɵɵtext(32);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(33, \"div\", 58)(34, \"button\", 59);\n    i0.ɵɵlistener(\"click\", function DashboardAdminComponent_div_13_div_1_Template_button_click_34_listener() {\n      const announcement_r5 = i0.ɵɵrestoreView(_r4).$implicit;\n      const ctx_r0 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r0.approveAnnouncement(announcement_r5));\n    });\n    i0.ɵɵtext(35, \" \\u2705 Approuver \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(36, \"button\", 60);\n    i0.ɵɵlistener(\"click\", function DashboardAdminComponent_div_13_div_1_Template_button_click_36_listener() {\n      const announcement_r5 = i0.ɵɵrestoreView(_r4).$implicit;\n      const ctx_r0 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r0.rejectAnnouncement(announcement_r5));\n    });\n    i0.ɵɵtext(37, \" \\u274C Rejeter \");\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const announcement_r5 = ctx.$implicit;\n    const ctx_r0 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance();\n    i0.ɵɵstyleProp(\"background-image\", announcement_r5.images && announcement_r5.images.length > 0 ? \"url(\" + announcement_r5.images[0] + \")\" : \"none\")(\"background-size\", \"cover\")(\"background-position\", \"center\");\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", !announcement_r5.images || announcement_r5.images.length === 0);\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(announcement_r5.titre);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\"\\uD83D\\uDC68\\u200D\\uD83C\\uDF3E Agriculteur: \", ctx_r0.userMap[announcement_r5.agriculteurId] || announcement_r5.agriculteurId, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"\\uD83D\\uDCCD \", announcement_r5.localisation, \"\");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", announcement_r5.categorie, \" \");\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate1(\"Du \", i0.ɵɵpipeBind2(22, 18, announcement_r5.dateDebutDisponibilite, \"dd/MM/yyyy\"), \"\");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\"Au \", i0.ɵɵpipeBind2(25, 21, announcement_r5.dateFinDisponibilite, \"dd/MM/yyyy\"), \"\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate2(\"\\uD83D\\uDCE6 Quantit\\u00E9: \", announcement_r5.quantite, \" \", announcement_r5.unite, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"\\uD83D\\uDCB0 Prix/unit\\u00E9: \", announcement_r5.prixParUnite || \"-\", \" FCFA\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate2(\"\\uD83D\\uDCCA Minimum: \", announcement_r5.quantiteMinimale || \"-\", \" \", announcement_r5.unite, \"\");\n  }\n}\nfunction DashboardAdminComponent_div_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 42);\n    i0.ɵɵtemplate(1, DashboardAdminComponent_div_13_div_1_Template, 38, 24, \"div\", 43);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.pendingAnnouncements);\n  }\n}\nfunction DashboardAdminComponent_div_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 64)(1, \"div\", 65);\n    i0.ɵɵtext(2, \"\\u2713 Aucun produit en attente de validation\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"p\", 66);\n    i0.ɵɵtext(4, \"Tous les produits ont \\u00E9t\\u00E9 trait\\u00E9s !\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction DashboardAdminComponent_div_18_div_1_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 61);\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(1, \"svg\", 62);\n    i0.ɵɵelement(2, \"path\", 63);\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction DashboardAdminComponent_div_18_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 68)(1, \"div\", 45);\n    i0.ɵɵtemplate(2, DashboardAdminComponent_div_18_div_1_div_2_Template, 3, 0, \"div\", 46);\n    i0.ɵɵelementStart(3, \"div\", 48)(4, \"span\", 49);\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(6, \"div\", 69);\n    i0.ɵɵtext(7, \" \\u23F3 En attente \");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(8, \"div\", 50)(9, \"div\", 51)(10, \"p\", 52);\n    i0.ɵɵtext(11);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"p\");\n    i0.ɵɵtext(13);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(14, \"div\", 53)(15, \"span\", 54);\n    i0.ɵɵtext(16);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(17, \"div\", 57)(18, \"div\");\n    i0.ɵɵtext(19);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(20, \"div\");\n    i0.ɵɵtext(21);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(22, \"div\");\n    i0.ɵɵtext(23);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(24, \"div\", 70)(25, \"label\", 71);\n    i0.ɵɵtext(26, \"\\uD83D\\uDCDD Motif de refus (optionnel)\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(27, \"textarea\", 72);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function DashboardAdminComponent_div_18_div_1_Template_textarea_ngModelChange_27_listener($event) {\n      const p_r7 = i0.ɵɵrestoreView(_r6).$implicit;\n      const ctx_r0 = i0.ɵɵnextContext(2);\n      i0.ɵɵtwoWayBindingSet(ctx_r0.selectedReason[p_r7.id], $event) || (ctx_r0.selectedReason[p_r7.id] = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(28, \"div\", 58)(29, \"button\", 59);\n    i0.ɵɵlistener(\"click\", function DashboardAdminComponent_div_18_div_1_Template_button_click_29_listener() {\n      const p_r7 = i0.ɵɵrestoreView(_r6).$implicit;\n      const ctx_r0 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r0.approveProduct(p_r7));\n    });\n    i0.ɵɵtext(30, \" \\u2705 Approuver \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(31, \"button\", 60);\n    i0.ɵɵlistener(\"click\", function DashboardAdminComponent_div_18_div_1_Template_button_click_31_listener() {\n      const p_r7 = i0.ɵɵrestoreView(_r6).$implicit;\n      const ctx_r0 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r0.rejectProduct(p_r7));\n    });\n    i0.ɵɵtext(32, \" \\u274C Rejeter \");\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const p_r7 = ctx.$implicit;\n    const ctx_r0 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance();\n    i0.ɵɵstyleProp(\"background-image\", p_r7.images && p_r7.images.length > 0 ? \"url(\" + p_r7.images[0] + \")\" : \"none\")(\"background-size\", \"cover\")(\"background-position\", \"center\");\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", !p_r7.images || p_r7.images.length === 0);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(p_r7.titre);\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate1(\"\\uD83D\\uDC68\\u200D\\uD83C\\uDF3E Agriculteur: \", ctx_r0.userMap[p_r7.agriculteurId] || p_r7.agriculteurId, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"\\uD83D\\uDCCD \", p_r7.localisation, \"\");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", p_r7.categorie, \" \");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate2(\"\\uD83D\\uDCE6 Quantit\\u00E9: \", p_r7.quantite, \" \", p_r7.unite, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"\\uD83D\\uDCB0 Prix/unit\\u00E9: \", p_r7.prixParUnite || \"-\", \" FCFA\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate2(\"\\uD83D\\uDCCA Minimum: \", p_r7.quantiteMinimale || \"-\", \" \", p_r7.unite, \"\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtwoWayProperty(\"ngModel\", ctx_r0.selectedReason[p_r7.id]);\n  }\n}\nfunction DashboardAdminComponent_div_18_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 42);\n    i0.ɵɵtemplate(1, DashboardAdminComponent_div_18_div_1_Template, 33, 17, \"div\", 67);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.pendingProducts);\n  }\n}\nexport let DashboardAdminComponent = /*#__PURE__*/(() => {\n  class DashboardAdminComponent {\n    constructor(dataService) {\n      this.dataService = dataService;\n      this.users = [];\n      this.userMap = {}; // map userId to full name\n      this.loading = false;\n      this.errorMessage = '';\n      // Products validation\n      this.pendingProducts = [];\n      this.selectedReason = {};\n      // Announcements validation\n      this.pendingAnnouncements = [];\n      this.toastMessage = '';\n      this.toastType = 'success';\n      this.showToast = false;\n    }\n    ngOnInit() {\n      this.loadUsers();\n      this.loadPendingProducts();\n      this.loadPendingAnnouncements();\n    }\n    showToastMessage(message, type = 'success') {\n      this.toastMessage = message;\n      this.toastType = type;\n      this.showToast = true;\n      setTimeout(() => {\n        this.showToast = false;\n      }, 3000);\n    }\n    loadUsers() {\n      this.loading = true;\n      this.errorMessage = '';\n      this.dataService.getTestUsers().subscribe({\n        next: users => {\n          // Show all users except the current admin\n          const currentUser = localStorage.getItem('currentUser');\n          const currentAdminId = currentUser ? JSON.parse(currentUser).id : null;\n          this.users = users.filter(u => u.id !== currentAdminId && u.userType !== 'admin');\n          // Build user map for quick lookups\n          users.forEach(u => {\n            this.userMap[u.id] = `${u.firstName} ${u.lastName}`;\n          });\n          this.loading = false;\n        },\n        error: err => {\n          console.error('Error loading users:', err);\n          this.errorMessage = 'Erreur lors du chargement des utilisateurs';\n          this.loading = false;\n        }\n      });\n    }\n    // --- Products ---\n    loadPendingProducts() {\n      this.dataService.getAllProducts().subscribe({\n        next: list => {\n          this.pendingProducts = (list || []).filter(p => p.statutValidation === 'en_attente');\n        },\n        error: err => {\n          console.error('Error loading products', err);\n        }\n      });\n    }\n    approve(user) {\n      const updated = {\n        ...user,\n        isValidated: true,\n        validationStatus: 'approved'\n      };\n      this.dataService.updateUser(updated).subscribe({\n        next: result => {\n          // Create notification\n          this.dataService.createNotification({\n            id: `notif-${Date.now()}`,\n            userId: updated.id,\n            type: 'validation',\n            title: 'Compte approuvé',\n            message: 'Votre compte a été approuvé par l\\'administration SENTERANGA. Vous pouvez maintenant vous connecter.',\n            date: new Date().toISOString(),\n            read: false,\n            createdAt: new Date().toISOString()\n          }).subscribe({\n            next: () => {\n              Swal.fire({\n                icon: 'success',\n                title: 'Utilisateur approuvé',\n                text: `${updated.firstName} ${updated.lastName} a été approuvé(e)`,\n                confirmButtonColor: '#22c55e'\n              });\n              this.loadUsers();\n            },\n            error: () => {\n              Swal.fire({\n                icon: 'warning',\n                title: 'Utilisateur approuvé',\n                text: 'Utilisateur approuvé, mais erreur lors de la notification',\n                confirmButtonColor: '#22c55e'\n              });\n              this.loadUsers();\n            }\n          });\n        },\n        error: err => {\n          console.error('Error updating user:', err);\n          Swal.fire({\n            icon: 'error',\n            title: 'Erreur d\\'approbation',\n            text: 'Une erreur s\\'est produite lors de l\\'approbation',\n            confirmButtonColor: '#22c55e'\n          });\n        }\n      });\n    }\n    reject(user) {\n      const updated = {\n        ...user,\n        isValidated: false,\n        validationStatus: 'rejected'\n      };\n      this.dataService.updateUser(updated).subscribe({\n        next: result => {\n          this.dataService.createNotification({\n            id: `notif-${Date.now()}`,\n            userId: updated.id,\n            type: 'validation',\n            title: 'Compte rejeté',\n            message: 'Votre demande d\\'inscription a été rejetée. Contactez le support pour plus d\\'informations.',\n            date: new Date().toISOString(),\n            read: false,\n            createdAt: new Date().toISOString()\n          }).subscribe({\n            next: () => {\n              Swal.fire({\n                icon: 'success',\n                title: 'Utilisateur rejeté',\n                text: `${updated.firstName} ${updated.lastName} a été rejeté(e)`,\n                confirmButtonColor: '#22c55e'\n              });\n              this.loadUsers();\n            },\n            error: () => {\n              Swal.fire({\n                icon: 'warning',\n                title: 'Utilisateur rejeté',\n                text: 'Utilisateur rejeté, mais erreur lors de la notification',\n                confirmButtonColor: '#22c55e'\n              });\n              this.loadUsers();\n            }\n          });\n        },\n        error: err => {\n          console.error('Error updating user:', err);\n          Swal.fire({\n            icon: 'error',\n            title: 'Erreur de rejet',\n            text: 'Une erreur s\\'est produite lors du rejet',\n            confirmButtonColor: '#22c55e'\n          });\n        }\n      });\n    }\n    approveProduct(product) {\n      this.dataService.updateProductStatus(product.id, 'validé').subscribe({\n        next: updated => {\n          const note = {\n            id: `note-${Date.now()}`,\n            userId: product.agriculteurId,\n            title: 'Produit validé',\n            message: `Votre produit « ${product.titre} » a été validé et est maintenant visible sur le marché.`,\n            createdAt: new Date().toISOString(),\n            read: false\n          };\n          this.dataService.createNotification(note).subscribe(() => {\n            this.showToastMessage(`Produit « ${product.titre} » validé ✓`);\n            this.loadPendingProducts();\n          });\n        },\n        error: err => {\n          console.error('Approve product failed', err);\n          this.showToastMessage('Erreur lors de la validation', 'error');\n        }\n      });\n    }\n    rejectProduct(product) {\n      const reason = this.selectedReason[product.id] || '';\n      if (!reason.trim()) {\n        Swal.fire({\n          icon: 'warning',\n          title: 'Motif requis',\n          text: 'Veuillez saisir un motif de refus.',\n          confirmButtonColor: '#22c55e'\n        });\n        return;\n      }\n      this.dataService.updateProductStatus(product.id, 'rejeté').subscribe({\n        next: updated => {\n          const note = {\n            id: `note-${Date.now()}`,\n            userId: product.agriculteurId,\n            title: 'Produit rejeté',\n            message: `Votre produit « ${product.titre} » a été rejeté. Motif: ${reason}`,\n            createdAt: new Date().toISOString(),\n            read: false\n          };\n          this.dataService.createNotification(note).subscribe(() => {\n            this.showToastMessage(`Produit « ${product.titre} » rejeté ✗`);\n            this.loadPendingProducts();\n          });\n        },\n        error: err => {\n          console.error('Reject product failed', err);\n          this.showToastMessage('Erreur lors du refus', 'error');\n        }\n      });\n    }\n    static {\n      this.ɵfac = function DashboardAdminComponent_Factory(t) {\n        return new (t || DashboardAdminComponent)(i0.ɵɵdirectiveInject(i1.DataService));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: DashboardAdminComponent,\n        selectors: [[\"app-dashboard-admin\"]],\n        standalone: true,\n        features: [i0.ɵɵStandaloneFeature],\n        decls: 20,\n        vars: 9,\n        consts: [[1, \"pt-20\", \"max-w-7xl\", \"mx-auto\", \"px-6\", \"py-8\"], [\"class\", \"fixed top-4 right-4 px-4 py-2 border rounded shadow-lg z-50\", 3, \"ngClass\", 4, \"ngIf\"], [1, \"text-3xl\", \"font-bold\", \"mb-6\"], [\"class\", \"mb-4 p-4 bg-red-100 border border-red-400 text-red-700 rounded\", 4, \"ngIf\"], [\"class\", \"flex items-center justify-center py-12\", 4, \"ngIf\"], [\"class\", \"p-6 bg-blue-50 border border-blue-200 rounded text-center\", 4, \"ngIf\"], [\"class\", \"bg-white rounded-lg shadow overflow-hidden\", 4, \"ngIf\"], [1, \"mt-8\"], [1, \"text-2xl\", \"font-semibold\", \"mb-6\"], [\"class\", \"p-6 bg-purple-50 border border-purple-200 rounded-lg text-center\", 4, \"ngIf\"], [\"class\", \"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\", 4, \"ngIf\"], [\"class\", \"p-6 bg-green-50 border border-green-200 rounded-lg text-center\", 4, \"ngIf\"], [1, \"fixed\", \"top-4\", \"right-4\", \"px-4\", \"py-2\", \"border\", \"rounded\", \"shadow-lg\", \"z-50\", 3, \"ngClass\"], [1, \"mb-4\", \"p-4\", \"bg-red-100\", \"border\", \"border-red-400\", \"text-red-700\", \"rounded\"], [1, \"flex\", \"items-center\", \"justify-center\", \"py-12\"], [1, \"text-gray-600\"], [1, \"p-6\", \"bg-blue-50\", \"border\", \"border-blue-200\", \"rounded\", \"text-center\"], [1, \"text-blue-700\"], [1, \"bg-white\", \"rounded-lg\", \"shadow\", \"overflow-hidden\"], [1, \"w-full\"], [1, \"bg-gray-100\", \"border-b\"], [1, \"p-4\", \"text-left\", \"font-semibold\"], [\"class\", \"border-t hover:bg-gray-50 transition\", 4, \"ngFor\", \"ngForOf\"], [1, \"border-t\", \"hover:bg-gray-50\", \"transition\"], [1, \"p-4\", \"font-medium\"], [1, \"p-4\"], [1, \"text-blue-600\", \"hover:underline\", 3, \"href\"], [1, \"px-3\", \"py-1\", \"bg-blue-100\", \"text-blue-800\", \"rounded-full\", \"text-sm\", \"font-medium\"], [\"class\", \"px-3 py-1 bg-yellow-100 text-yellow-800 rounded-full text-sm font-medium\", 4, \"ngIf\"], [\"class\", \"px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm font-medium\", 4, \"ngIf\"], [\"class\", \"px-3 py-1 bg-red-100 text-red-800 rounded-full text-sm font-medium\", 4, \"ngIf\"], [\"class\", \"px-3 py-1 bg-gray-100 text-gray-800 rounded-full text-sm font-medium\", 4, \"ngIf\"], [1, \"flex\", \"gap-2\"], [1, \"px-4\", \"py-2\", \"bg-green-500\", \"text-white\", \"rounded\", \"font-medium\", \"hover:bg-green-600\", \"disabled:bg-gray-400\", \"disabled:cursor-not-allowed\", \"transition\", 3, \"click\", \"disabled\"], [1, \"px-4\", \"py-2\", \"bg-red-500\", \"text-white\", \"rounded\", \"font-medium\", \"hover:bg-red-600\", \"disabled:bg-gray-400\", \"disabled:cursor-not-allowed\", \"transition\", 3, \"click\", \"disabled\"], [1, \"px-3\", \"py-1\", \"bg-yellow-100\", \"text-yellow-800\", \"rounded-full\", \"text-sm\", \"font-medium\"], [1, \"px-3\", \"py-1\", \"bg-green-100\", \"text-green-800\", \"rounded-full\", \"text-sm\", \"font-medium\"], [1, \"px-3\", \"py-1\", \"bg-red-100\", \"text-red-800\", \"rounded-full\", \"text-sm\", \"font-medium\"], [1, \"px-3\", \"py-1\", \"bg-gray-100\", \"text-gray-800\", \"rounded-full\", \"text-sm\", \"font-medium\"], [1, \"p-6\", \"bg-purple-50\", \"border\", \"border-purple-200\", \"rounded-lg\", \"text-center\"], [1, \"text-purple-600\", \"text-lg\", \"font-medium\"], [1, \"text-purple-700\", \"mt-1\"], [1, \"grid\", \"grid-cols-1\", \"md:grid-cols-2\", \"lg:grid-cols-3\", \"gap-6\"], [\"class\", \"bg-white rounded-xl overflow-hidden shadow-md hover:shadow-xl transition-shadow border-2 border-purple-200\", 4, \"ngFor\", \"ngForOf\"], [1, \"bg-white\", \"rounded-xl\", \"overflow-hidden\", \"shadow-md\", \"hover:shadow-xl\", \"transition-shadow\", \"border-2\", \"border-purple-200\"], [1, \"relative\", \"h-48\", \"rounded-t-xl\", \"overflow-hidden\", \"bg-gray-200\"], [\"class\", \"w-full h-full flex items-center justify-center bg-gray-100\", 4, \"ngIf\"], [1, \"absolute\", \"top-3\", \"left-3\", \"bg-purple-500\", \"text-white\", \"px-2\", \"py-1\", \"rounded-full\", \"text-xs\", \"font-semibold\"], [1, \"absolute\", \"bottom-3\", \"left-3\", \"bg-white/95\", \"px-3\", \"py-1\", \"rounded-md\", \"shadow-sm\"], [1, \"text-sm\", \"font-bold\", \"text-gray-900\"], [1, \"p-4\", \"space-y-3\"], [1, \"text-xs\", \"text-gray-600\"], [1, \"font-semibold\"], [1, \"flex\", \"items-center\", \"gap-2\"], [1, \"px-2\", \"py-1\", \"rounded\", \"text-xs\", \"font-semibold\", \"bg-blue-50\", \"text-blue-600\"], [1, \"bg-purple-50\", \"p-2\", \"rounded-lg\", \"text-xs\", \"text-purple-700\"], [1, \"font-semibold\", \"mb-1\"], [1, \"space-y-1\", \"text-xs\", \"font-medium\", \"text-gray-900\"], [1, \"flex\", \"gap-2\", \"pt-2\"], [1, \"flex-1\", \"bg-green-600\", \"text-white\", \"text-sm\", \"font-semibold\", \"py-2.5\", \"rounded-lg\", \"hover:bg-green-700\", \"transition-colors\", 3, \"click\"], [1, \"flex-1\", \"bg-red-600\", \"text-white\", \"text-sm\", \"font-semibold\", \"py-2.5\", \"rounded-lg\", \"hover:bg-red-700\", \"transition-colors\", 3, \"click\"], [1, \"w-full\", \"h-full\", \"flex\", \"items-center\", \"justify-center\", \"bg-gray-100\"], [\"fill\", \"none\", \"stroke\", \"currentColor\", \"viewBox\", \"0 0 24 24\", 1, \"w-12\", \"h-12\", \"text-gray-400\"], [\"stroke-linecap\", \"round\", \"stroke-linejoin\", \"round\", \"stroke-width\", \"2\", \"d\", \"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z\"], [1, \"p-6\", \"bg-green-50\", \"border\", \"border-green-200\", \"rounded-lg\", \"text-center\"], [1, \"text-green-600\", \"text-lg\", \"font-medium\"], [1, \"text-green-700\", \"mt-1\"], [\"class\", \"bg-white rounded-xl overflow-hidden shadow-md hover:shadow-xl transition-shadow\", 4, \"ngFor\", \"ngForOf\"], [1, \"bg-white\", \"rounded-xl\", \"overflow-hidden\", \"shadow-md\", \"hover:shadow-xl\", \"transition-shadow\"], [1, \"absolute\", \"top-3\", \"right-3\", \"bg-yellow-500\", \"text-white\", \"px-2\", \"py-1\", \"rounded-full\", \"text-xs\", \"font-semibold\"], [1, \"border-t\", \"pt-3\"], [1, \"block\", \"text-xs\", \"font-medium\", \"text-gray-700\", \"mb-2\"], [\"rows\", \"2\", \"placeholder\", \"Raison du rejet pour informer l'agriculteur\", 1, \"w-full\", \"bg-white\", \"border\", \"border-gray-300\", \"rounded-lg\", \"px-3\", \"py-2\", \"text-sm\", \"focus:ring-2\", \"focus:ring-red-500\", \"focus:border-transparent\", \"outline-none\", \"resize-none\", 3, \"ngModelChange\", \"ngModel\"]],\n        template: function DashboardAdminComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelement(0, \"app-header\");\n            i0.ɵɵelementStart(1, \"section\", 0);\n            i0.ɵɵtemplate(2, DashboardAdminComponent_div_2_Template, 2, 5, \"div\", 1);\n            i0.ɵɵelementStart(3, \"h1\", 2);\n            i0.ɵɵtext(4, \"\\uD83D\\uDC68\\u200D\\uD83D\\uDCBC Admin \\u2014 Validation des Inscriptions\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵtemplate(5, DashboardAdminComponent_div_5_Template, 2, 1, \"div\", 3)(6, DashboardAdminComponent_div_6_Template, 3, 0, \"div\", 4)(7, DashboardAdminComponent_div_7_Template, 3, 0, \"div\", 5)(8, DashboardAdminComponent_div_8_Template, 16, 1, \"div\", 6);\n            i0.ɵɵelementStart(9, \"section\", 7)(10, \"h2\", 8);\n            i0.ɵɵtext(11, \"\\uD83D\\uDCE2 Validation des annonces\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵtemplate(12, DashboardAdminComponent_div_12_Template, 5, 0, \"div\", 9)(13, DashboardAdminComponent_div_13_Template, 2, 1, \"div\", 10);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(14, \"section\", 7)(15, \"h2\", 8);\n            i0.ɵɵtext(16, \"\\uD83D\\uDECD\\uFE0F Validation des produits en attente\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵtemplate(17, DashboardAdminComponent_div_17_Template, 5, 0, \"div\", 11)(18, DashboardAdminComponent_div_18_Template, 2, 1, \"div\", 10);\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelement(19, \"app-footer\");\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance(2);\n            i0.ɵɵproperty(\"ngIf\", ctx.showToast);\n            i0.ɵɵadvance(3);\n            i0.ɵɵproperty(\"ngIf\", ctx.errorMessage);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", ctx.loading);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", !ctx.loading && ctx.users.length === 0);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", !ctx.loading && ctx.users.length > 0);\n            i0.ɵɵadvance(4);\n            i0.ɵɵproperty(\"ngIf\", ctx.pendingAnnouncements.length === 0);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", ctx.pendingAnnouncements.length > 0);\n            i0.ɵɵadvance(4);\n            i0.ɵɵproperty(\"ngIf\", ctx.pendingProducts.length === 0);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", ctx.pendingProducts.length > 0);\n          }\n        },\n        dependencies: [CommonModule, i2.NgClass, i2.NgForOf, i2.NgIf, i2.DatePipe, HeaderComponent, FooterComponent, FormsModule, i3.DefaultValueAccessor, i3.NgControlStatus, i3.NgModel],\n        encapsulation: 2\n      });\n    }\n  }\n  return DashboardAdminComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}