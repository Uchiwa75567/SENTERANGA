"use strict";(self.webpackChunksenteranga=self.webpackChunksenteranga||[]).push([[545],{5473:(F,b,u)=>{u.d(b,{n:()=>e});var h=u(177),o=u(4438);let e=(()=>{class v{static{this.\u0275fac=function(k){return new(k||v)}}static{this.\u0275cmp=o.VBU({type:v,selectors:[["app-footer"]],standalone:!0,features:[o.aNF],decls:45,vars:0,consts:[[1,"bg-senteranga-green","text-white","py-8","sm:py-12","md:py-16","px-4","sm:px-6","md:px-8"],[1,"max-w-7xl","mx-auto"],[1,"grid","grid-cols-1","sm:grid-cols-2","lg:grid-cols-3","gap-8","sm:gap-10","md:gap-12","mb-8","sm:mb-10","md:mb-12"],[1,"sm:col-span-2","lg:col-span-1"],[1,"flex","items-center","gap-2","sm:gap-3","mb-4"],["src","/images/logo-senteranga.png","alt","SenTeranga Logo",1,"h-12","sm:h-14","w-auto"],[1,"text-2xl","sm:text-3xl","font-bold"],[1,"text-sm","sm:text-base","text-green-100","leading-relaxed","mb-4","sm:mb-6"],["src","/icons/social-media.svg","alt","Social Media",1,"h-6","sm:h-8"],[1,"text-lg","sm:text-xl","font-bold","mb-4","sm:mb-6"],[1,"space-y-2","sm:space-y-3"],["href","#",1,"text-base","sm:text-lg","hover:text-green-100","transition-colors"],["href","#",1,"text-sm","sm:text-base","hover:text-green-100","transition-colors"],[1,"border-t","border-green-600","pt-6","sm:pt-8","flex","flex-col","sm:flex-row","justify-between","items-center","gap-3","sm:gap-4","text-center","sm:text-left"],[1,"text-xs","sm:text-sm","text-green-100"]],template:function(k,s){1&k&&(o.j41(0,"footer",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),o.nrm(5,"img",5),o.j41(6,"span",6),o.EFF(7,"SenTeranga"),o.k0s()(),o.j41(8,"p",7),o.EFF(9," L'interface institutionnelle et professionnelle du syst\xe8me alimentaire national s\xe9n\xe9galais. Autonomiser les agriculteurs, connecter les march\xe9s et construire un avenir durable. "),o.k0s(),o.nrm(10,"img",8),o.k0s(),o.j41(11,"div")(12,"h3",9),o.EFF(13,"March\xe9s Digital"),o.k0s(),o.j41(14,"ul",10)(15,"li")(16,"a",11),o.EFF(17,"March\xe9 Agricol"),o.k0s()(),o.j41(18,"li")(19,"a",11),o.EFF(20,"March\xe9 \xc9levage"),o.k0s()(),o.j41(21,"li")(22,"a",11),o.EFF(23,"March\xe9 P\xeache"),o.k0s()()()(),o.j41(24,"div")(25,"h3",9),o.EFF(26,"Support"),o.k0s(),o.j41(27,"ul",10)(28,"li")(29,"a",12),o.EFF(30,"Help Center"),o.k0s()(),o.j41(31,"li")(32,"a",12),o.EFF(33,"Contact Us"),o.k0s()(),o.j41(34,"li")(35,"a",12),o.EFF(36,"Privacy Policy"),o.k0s()(),o.j41(37,"li")(38,"a",12),o.EFF(39,"Terms of Service"),o.k0s()()()()(),o.j41(40,"div",13)(41,"p",14),o.EFF(42,"\xa9 2024 SENTERANGA. All rights reserved."),o.k0s(),o.j41(43,"p",14),o.EFF(44,"Powered by Readdy"),o.k0s()()()())},dependencies:[h.MD],encapsulation:2})}}return v})()},4121:(F,b,u)=>{u.d(b,{l:()=>A});var h=u(177),o=u(5776),e=u(4438);function k(r,d){if(1&r){const t=e.RV6();e.j41(0,"div",2),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.onClose())}),e.k0s()}}function s(r,d){if(1&r){const t=e.RV6();e.j41(0,"div",20),e.nrm(1,"img",21),e.j41(2,"div",22)(3,"h3",23),e.EFF(4),e.k0s(),e.j41(5,"p",24),e.EFF(6),e.k0s(),e.j41(7,"p",25),e.EFF(8),e.k0s()(),e.j41(9,"div",26)(10,"button",27),e.bIt("click",function(){const i=e.eBV(t).$implicit,m=e.XpG(2);return e.Njj(m.decrementQuantity(i))}),e.nrm(11,"img",28),e.k0s(),e.j41(12,"span",29),e.EFF(13),e.k0s(),e.j41(14,"button",8),e.bIt("click",function(){const i=e.eBV(t).$implicit,m=e.XpG(2);return e.Njj(m.incrementQuantity(i))}),e.nrm(15,"img",30),e.k0s()(),e.j41(16,"div",31)(17,"span",32),e.EFF(18),e.k0s(),e.j41(19,"button",33),e.bIt("click",function(){const i=e.eBV(t).$implicit,m=e.XpG(2);return e.Njj(m.onRemoveItem(i.id))}),e.EFF(20," Supprimer "),e.k0s()()()}if(2&r){const t=d.$implicit,a=e.XpG(2);e.R7$(),e.Y8G("src",t.imageUrl,e.B4B)("alt",t.name),e.R7$(3),e.JRh(t.name),e.R7$(2),e.SpI("Par ",t.producer,""),e.R7$(2),e.SpI(" ",a.formatUnitPrice(t.unitPrice,t.unit)," "),e.R7$(2),e.AVh("opacity-50",t.quantity<=1),e.Y8G("disabled",t.quantity<=1),e.R7$(3),e.SpI(" ",t.quantity," "),e.R7$(5),e.SpI(" ",a.formatCurrency(a.getItemTotal(t))," ")}}function l(r,d){if(1&r){const t=e.RV6();e.j41(0,"div",3),e.bIt("click",function(i){return e.eBV(t),e.Njj(i.stopPropagation())}),e.j41(1,"div",4)(2,"div",5),e.nrm(3,"img",6),e.j41(4,"h2",7),e.EFF(5),e.k0s()(),e.j41(6,"button",8),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.onClose())}),e.nrm(7,"img",9),e.k0s()(),e.j41(8,"div",10)(9,"div",11),e.DNE(10,s,21,10,"div",12),e.k0s()(),e.j41(11,"div",13)(12,"div",14)(13,"span",15),e.EFF(14,"Total:"),e.k0s(),e.j41(15,"span",16),e.EFF(16),e.k0s()(),e.j41(17,"div",17)(18,"button",18),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.onContinueShopping())}),e.EFF(19," Continuer mes Achats "),e.k0s(),e.j41(20,"button",19),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.onCheckout())}),e.EFF(21," Passer Commande "),e.k0s()()()()}if(2&r){const t=e.XpG();e.R7$(5),e.SpI(" Mon Panier ",t.formatCartCount(t.totalItems)," "),e.R7$(5),e.Y8G("ngForOf",t.items),e.R7$(6),e.SpI(" ",t.formatCurrency(t.cartTotal)," ")}}let n=(()=>{class r{constructor(){this.items=[],this.isOpen=!1,this.close=new e.bkB,this.continueShopping=new e.bkB,this.checkout=new e.bkB,this.updateQuantity=new e.bkB,this.removeItem=new e.bkB}get totalItems(){return this.items.length}get cartTotal(){return this.items.reduce((t,a)=>t+a.unitPrice*a.quantity,0)}formatCurrency(t){return(r=>`\u20a3${r.toLocaleString("fr-FR")}`)(t)}formatUnitPrice(t,a){return((r,d)=>`\u20a3${r}/${d}`)(t,a)}formatCartCount(t){return(r=>`(${r} article${r>1?"s":""})`)(t)}getItemTotal(t){return t.unitPrice*t.quantity}onClose(){this.close.emit()}onContinueShopping(){this.continueShopping.emit(),this.close.emit()}onCheckout(){this.checkout.emit()}incrementQuantity(t){this.updateQuantity.emit({itemId:t.id,quantity:t.quantity+1})}decrementQuantity(t){t.quantity>1&&this.updateQuantity.emit({itemId:t.id,quantity:t.quantity-1})}onRemoveItem(t){this.removeItem.emit(t)}static{this.\u0275fac=function(a){return new(a||r)}}static{this.\u0275cmp=e.VBU({type:r,selectors:[["app-cart-popup"]],inputs:{items:"items",isOpen:"isOpen"},outputs:{close:"close",continueShopping:"continueShopping",checkout:"checkout",updateQuantity:"updateQuantity",removeItem:"removeItem"},standalone:!0,features:[e.aNF],decls:2,vars:2,consts:[["class","fixed inset-0 bg-black bg-opacity-50 z-50",3,"click",4,"ngIf"],["class","fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-white rounded-lg shadow-2xl z-50 w-full max-w-2xl max-h-[90vh] flex flex-col",3,"click",4,"ngIf"],[1,"fixed","inset-0","bg-black","bg-opacity-50","z-50",3,"click"],[1,"fixed","top-1/2","left-1/2","transform","-translate-x-1/2","-translate-y-1/2","bg-white","rounded-lg","shadow-2xl","z-50","w-full","max-w-2xl","max-h-[90vh]","flex","flex-col",3,"click"],[1,"flex","items-center","justify-between","px-6","py-4","border-b","border-gray-200"],[1,"flex","items-center","gap-3"],["src","/icons/cart-icon.svg","alt","Cart",1,"w-5","h-5"],[1,"text-gray-900","text-xl","font-bold"],[1,"hover:opacity-70","transition-opacity",3,"click"],["src","/icons/close-icon.svg","alt","Close",1,"w-3","h-3"],[1,"flex-1","overflow-y-auto","px-6","py-4"],[1,"space-y-4"],["class","flex items-center gap-4 p-4 border border-gray-200 rounded-lg",4,"ngFor","ngForOf"],[1,"border-t","border-gray-200","px-6","py-4"],[1,"flex","items-center","justify-between","mb-4"],[1,"text-gray-900","text-lg","font-medium"],[1,"text-senteranga-green","text-2xl","font-bold"],[1,"flex","items-center","gap-4"],[1,"flex-1","px-6","py-3","border-2","border-senteranga-green","text-senteranga-green","text-base","font-medium","rounded-lg","hover:bg-senteranga-green","hover:text-white","transition-colors",3,"click"],[1,"flex-1","px-6","py-3","bg-senteranga-green","text-white","text-base","font-medium","rounded-lg","hover:bg-senteranga-green-dark","transition-colors",3,"click"],[1,"flex","items-center","gap-4","p-4","border","border-gray-200","rounded-lg"],[1,"w-16","h-16","rounded-lg","object-cover","flex-shrink-0",3,"src","alt"],[1,"flex-1","min-w-0"],[1,"text-gray-900","text-base","font-medium","truncate"],[1,"text-gray-600","text-sm"],[1,"text-senteranga-green","text-sm","font-medium"],[1,"flex","items-center","gap-3","flex-shrink-0"],[1,"hover:opacity-70","transition-opacity",3,"click","disabled"],["src","/icons/minus-icon.svg","alt","Decrease",1,"w-2","h-0.5"],[1,"text-black","text-base","font-medium","min-w-[2rem]","text-center"],["src","/icons/plus-icon.svg","alt","Increase",1,"w-2","h-2"],[1,"flex","flex-col","items-end","gap-1","flex-shrink-0"],[1,"text-gray-900","text-base","font-bold"],[1,"text-red-500","text-sm","font-normal","hover:text-red-600","transition-colors",3,"click"]],template:function(a,i){1&a&&e.DNE(0,k,1,0,"div",0)(1,l,22,3,"div",1),2&a&&(e.Y8G("ngIf",i.isOpen),e.R7$(),e.Y8G("ngIf",i.isOpen))},dependencies:[h.MD,h.Sq,h.bT],encapsulation:2})}}return r})();var c=u(8359),p=u(8490),f=u(6868);function g(r,d){if(1&r&&(e.j41(0,"span",28),e.EFF(1),e.k0s()),2&r){const t=e.XpG();e.R7$(),e.JRh(t.unreadCount)}}function _(r,d){1&r&&(e.j41(0,"div",33),e.EFF(1,"Aucune notification"),e.k0s())}function I(r,d){if(1&r&&(e.j41(0,"li",34)(1,"div",35),e.EFF(2),e.k0s(),e.j41(3,"div",36),e.EFF(4),e.k0s()()),2&r){const t=d.$implicit;e.R7$(2),e.JRh(t.title),e.R7$(2),e.JRh(t.message)}}function y(r,d){if(1&r&&(e.j41(0,"div",29)(1,"h4",30),e.EFF(2,"Notifications"),e.k0s(),e.DNE(3,_,2,0,"div",31),e.j41(4,"ul"),e.DNE(5,I,5,2,"li",32),e.k0s()()),2&r){const t=e.XpG();e.R7$(3),e.Y8G("ngIf",0===t.notifications.length),e.R7$(2),e.Y8G("ngForOf",t.notifications)}}function E(r,d){1&r&&(e.qex(0),e.j41(1,"a",37),e.EFF(2," Connexion "),e.k0s(),e.j41(3,"a",38),e.EFF(4," S'inscrire "),e.k0s(),e.bVm())}function T(r,d){if(1&r&&e.nrm(0,"div",65),2&r){const t=e.XpG(2);e.Y8G("ngClass",null!=t.currentUser&&t.currentUser.isValidated?"bg-green-500":"bg-yellow-500")}}function w(r,d){if(1&r&&(e.j41(0,"span",66),e.EFF(1),e.k0s()),2&r){const t=e.XpG(2);e.Y8G("ngClass",null!=t.currentUser&&t.currentUser.isValidated?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"),e.R7$(),e.SpI(" ",null!=t.currentUser&&t.currentUser.isValidated?"Valid\xe9":"En attente"," ")}}function $(r,d){if(1&r&&(e.j41(0,"div",67)(1,"span",68),e.qSk(),e.j41(2,"svg",69),e.nrm(3,"path",70),e.k0s(),e.EFF(4),e.k0s()()),2&r){const t=e.XpG(2);e.R7$(),e.Y8G("ngClass",null!=t.currentUser&&t.currentUser.isValidated?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"),e.R7$(3),e.SpI(" ",null!=t.currentUser&&t.currentUser.isValidated?"Compte valid\xe9":"Validation en cours"," ")}}function M(r,d){1&r&&(e.qex(0),e.j41(1,"a",71),e.qSk(),e.j41(2,"svg",59),e.nrm(3,"path",49)(4,"path",50),e.k0s(),e.EFF(5," Mes annonces "),e.k0s(),e.bVm())}function R(r,d){1&r&&(e.qex(0),e.j41(1,"a",72),e.qSk(),e.j41(2,"svg",59),e.nrm(3,"path",73)(4,"path",74),e.k0s(),e.EFF(5," Administration "),e.k0s(),e.bVm())}function S(r,d){if(1&r){const t=e.RV6();e.j41(0,"div",39)(1,"div",16)(2,"div",40),e.EFF(3),e.k0s(),e.DNE(4,T,1,1,"div",41),e.k0s(),e.j41(5,"div",42)(6,"div",43),e.EFF(7," Bonjour, "),e.j41(8,"span",44),e.EFF(9),e.k0s()(),e.j41(10,"div",45)(11,"span"),e.EFF(12),e.k0s(),e.DNE(13,w,2,2,"span",46),e.k0s()(),e.j41(14,"div",16)(15,"button",47),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.goToDashboard())}),e.qSk(),e.j41(16,"svg",48),e.nrm(17,"path",49)(18,"path",50),e.k0s(),e.EFF(19," Mon espace \u25bc "),e.k0s(),e.joV(),e.j41(20,"div",51)(21,"div",52)(22,"div",53)(23,"div",40),e.EFF(24),e.k0s(),e.j41(25,"div")(26,"div",54),e.EFF(27),e.k0s(),e.j41(28,"div",55),e.EFF(29),e.k0s()()(),e.DNE(30,$,5,2,"div",56),e.k0s(),e.j41(31,"div",57)(32,"a",58),e.qSk(),e.j41(33,"svg",59),e.nrm(34,"path",60),e.k0s(),e.EFF(35," Mes r\xe9servations "),e.k0s(),e.DNE(36,M,6,0,"ng-container",61)(37,R,6,0,"ng-container",61),e.k0s(),e.joV(),e.nrm(38,"div",62),e.j41(39,"button",63),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.logout())}),e.qSk(),e.j41(40,"svg",59),e.nrm(41,"path",64),e.k0s(),e.EFF(42," D\xe9connexion "),e.k0s()()()()}if(2&r){const t=e.XpG();e.R7$(3),e.SpI(" ",t.userInitials," "),e.R7$(),e.Y8G("ngIf","agriculteur"===(null==t.currentUser?null:t.currentUser.userType)),e.R7$(5),e.JRh(t.userDisplayName),e.R7$(3),e.JRh(t.userRoleLabel),e.R7$(),e.Y8G("ngIf","agriculteur"===(null==t.currentUser?null:t.currentUser.userType)),e.R7$(11),e.SpI(" ",t.userInitials," "),e.R7$(3),e.JRh(t.userDisplayName),e.R7$(2),e.JRh(t.userRoleLabel),e.R7$(),e.Y8G("ngIf","agriculteur"===(null==t.currentUser?null:t.currentUser.userType)),e.R7$(6),e.Y8G("ngIf","agriculteur"===(null==t.currentUser?null:t.currentUser.userType)),e.R7$(),e.Y8G("ngIf","admin"===(null==t.currentUser?null:t.currentUser.userType))}}function N(r,d){1&r&&(e.qSk(),e.nrm(0,"path",75))}function P(r,d){1&r&&(e.qSk(),e.nrm(0,"path",76))}function V(r,d){if(1&r){const t=e.RV6();e.j41(0,"div",77),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.closeMobileMenu())}),e.k0s()}}function B(r,d){if(1&r){const t=e.RV6();e.qex(0),e.j41(1,"a",88),e.bIt("click",function(){e.eBV(t);const i=e.XpG(2);return e.Njj(i.closeMobileMenu())}),e.EFF(2," Connexion "),e.k0s(),e.j41(3,"a",89),e.bIt("click",function(){e.eBV(t);const i=e.XpG(2);return e.Njj(i.closeMobileMenu())}),e.EFF(4," S'inscrire "),e.k0s(),e.bVm()}}function O(r,d){if(1&r){const t=e.RV6();e.j41(0,"button",90),e.bIt("click",function(){e.eBV(t);const i=e.XpG(2);return i.goToDashboard(),e.Njj(i.closeMobileMenu())}),e.EFF(1,"Mon espace"),e.k0s(),e.j41(2,"button",91),e.bIt("click",function(){e.eBV(t);const i=e.XpG(2);return i.logout(),e.Njj(i.closeMobileMenu())}),e.EFF(3,"D\xe9connexion"),e.k0s()}}function G(r,d){if(1&r){const t=e.RV6();e.j41(0,"div",78)(1,"div",79)(2,"nav",80)(3,"a",81),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.closeMobileMenu())}),e.EFF(4," Accueil "),e.k0s(),e.j41(5,"a",82),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.closeMobileMenu())}),e.EFF(6," March\xe9s "),e.k0s(),e.j41(7,"a",83),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.closeMobileMenu())}),e.EFF(8," A propos "),e.k0s(),e.j41(9,"a",83),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.closeMobileMenu())}),e.EFF(10," Forum "),e.k0s()(),e.j41(11,"div",84)(12,"div",85)(13,"span",86),e.EFF(14,"Panier"),e.k0s(),e.j41(15,"div",12),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.toggleCart())}),e.qSk(),e.j41(16,"svg",13),e.nrm(17,"path",14),e.k0s(),e.joV(),e.j41(18,"span",15),e.EFF(19),e.k0s()()()(),e.j41(20,"div",87),e.DNE(21,B,5,0,"ng-container",20)(22,O,4,0,"ng-template",null,1,e.C5r),e.k0s()()()}if(2&r){const t=e.sdS(23),a=e.XpG();e.R7$(19),e.JRh(a.cartItemCount),e.R7$(2),e.Y8G("ngIf",!a.isLoggedIn())("ngIfElse",t)}}let A=(()=>{class r{get cartItemCount(){return this.cartService.getCartItemCount()}get unreadCount(){return this.notifications?this.notifications.filter(t=>!t.read).length:0}constructor(t,a,i){this.router=t,this.dataService=a,this.cartService=i,this.isCartOpen=!1,this.isMobileMenuOpen=!1,this.cartItems=[],this.cartSubscription=new c.yU,this.currentUser=null,this.notifications=[],this.showNotifications=!1}ngOnInit(){this.loadCurrentUser(),window.addEventListener("storage",t=>{"currentUser"===t.key&&this.loadCurrentUser()}),this.loadNotifications(),this.cartSubscription=this.cartService.getCart().subscribe(t=>{this.cartItems=t})}ngOnDestroy(){this.cartSubscription&&this.cartSubscription.unsubscribe()}loadCurrentUser(){try{const t=localStorage.getItem("currentUser");this.currentUser=t?JSON.parse(t):null}catch{this.currentUser=null}this.loadNotifications()}loadNotifications(){this.currentUser&&this.currentUser.id?this.dataService.getNotificationsForUser(this.currentUser.id).subscribe({next:t=>{this.notifications=t||[]},error:t=>{console.error("Error loading notifications",t),this.notifications=[]}}):this.notifications=[]}isLoggedIn(){return!!this.currentUser}get userDisplayName(){return this.currentUser?`${this.currentUser.firstName||""} ${this.currentUser.lastName||""}`.trim():""}get userInitials(){if(!this.currentUser)return"";const a=this.currentUser.lastName||"";return`${(this.currentUser.firstName||"").charAt(0)}${a.charAt(0)}`.toUpperCase()}get userRoleLabel(){return this.currentUser?{agriculteur:"Agriculteur",client:"Client",admin:"Administrateur",investisseur:"Investisseur",agronome:"Agronome","agent-terrain":"Agent Terrain",etat:"Institution"}[this.currentUser.userType]||this.currentUser.userType:""}goToDashboard(){this.router.navigate(this.currentUser?[{agriculteur:"/dashboard-agriculteur",client:"/dashboard-institutionnel",admin:"/dashboard-admin",investisseur:"/dashboard-institutionnel",agronome:"/dashboard-institutionnel","agent-terrain":"/dashboard-institutionnel",etat:"/dashboard-institutionnel"}[this.currentUser.userType]||"/"]:["/connexion"])}logout(){localStorage.removeItem("currentUser"),this.currentUser=null,this.router.navigate(["/"])}toggleCart(){this.isCartOpen=!this.isCartOpen}toggleNotifications(){this.showNotifications=!this.showNotifications,this.showNotifications&&this.notifications.length&&(this.notifications.filter(a=>!a.read).slice(0,10).forEach(a=>this.dataService.markNotificationRead(a.id).subscribe()),setTimeout(()=>this.loadNotifications(),300))}closeCart(){this.isCartOpen=!1}toggleMobileMenu(){this.isMobileMenuOpen=!this.isMobileMenuOpen}closeMobileMenu(){this.isMobileMenuOpen=!1}onContinueShopping(){this.closeCart()}onCheckout(){console.log("Proceeding to checkout..."),this.closeCart()}onUpdateQuantity(t){this.cartService.updateQuantity(t.itemId,t.quantity)}onRemoveItem(t){this.cartService.removeFromCart(t)}static{this.\u0275fac=function(a){return new(a||r)(e.rXU(o.Ix),e.rXU(p.u),e.rXU(f.m))}}static{this.\u0275cmp=e.VBU({type:r,selectors:[["app-header"]],standalone:!0,features:[e.aNF],decls:37,vars:11,consts:[["userMenu",""],["mobileUserMenu",""],[1,"fixed","top-0","left-0","right-0","bg-white","py-3","px-4","md:px-8","shadow-sm","z-50"],[1,"max-w-7xl","mx-auto","flex","items-center","justify-between"],["routerLink","/",1,"flex","items-center","gap-2","cursor-pointer"],["src","/images/logo-senteranga.png","alt","SenTeranga Logo",1,"h-8","md:h-12","w-auto"],[1,"text-senteranga-green","text-lg","md:text-2xl","font-bold","hidden","sm:block"],[1,"hidden","lg:flex","items-center","gap-8"],["routerLink","/",1,"text-black","text-base","hover:text-senteranga-green","transition-colors"],["routerLink","/marche-agricole",1,"text-black","text-base","hover:text-senteranga-green","transition-colors"],["href","#",1,"text-black","text-base","hover:text-senteranga-green","transition-colors"],[1,"hidden","lg:flex","items-center","gap-3"],[1,"relative","cursor-pointer",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6","text-senteranga-green"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"],[1,"absolute","-top-1","-right-1","bg-senteranga-green","text-white","text-xs","font-medium","rounded-full","w-4","h-4","flex","items-center","justify-center"],[1,"relative"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6 6 0 10-12 0v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"],["class","absolute -top-1 -right-1 bg-red-600 text-white text-xs font-medium rounded-full w-4 h-4 flex items-center justify-center",4,"ngIf"],["class","absolute right-0 mt-2 bg-white border rounded shadow-lg w-80 z-50 p-3",4,"ngIf"],[4,"ngIf","ngIfElse"],[1,"lg:hidden","p-2","rounded-md","text-gray-600","hover:text-gray-900","hover:bg-gray-100","focus:outline-none","focus:ring-2","focus:ring-inset","focus:ring-senteranga-green",3,"click"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-6","w-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 6h16M4 12h16M4 18h16",4,"ngIf"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12",4,"ngIf"],["class","lg:hidden fixed inset-0 top-16 bg-black bg-opacity-50 z-40",3,"click",4,"ngIf"],["class","lg:hidden absolute top-full left-0 right-0 bg-white shadow-lg border-t border-gray-200 z-50 transform transition-all duration-300 ease-in-out",4,"ngIf"],[3,"close","continueShopping","checkout","updateQuantity","removeItem","isOpen","items"],[1,"absolute","-top-1","-right-1","bg-red-600","text-white","text-xs","font-medium","rounded-full","w-4","h-4","flex","items-center","justify-center"],[1,"absolute","right-0","mt-2","bg-white","border","rounded","shadow-lg","w-80","z-50","p-3"],[1,"font-semibold","mb-2"],["class","text-sm text-gray-600",4,"ngIf"],["class","py-2 border-b last:border-b-0",4,"ngFor","ngForOf"],[1,"text-sm","text-gray-600"],[1,"py-2","border-b","last:border-b-0"],[1,"text-sm","font-medium"],[1,"text-xs","text-gray-600"],["routerLink","/connexion",1,"px-4","py-2","text-senteranga-green","text-sm","font-medium","hover:bg-gray-50","rounded","transition-colors","inline-block","text-center"],["routerLink","/inscription",1,"px-4","py-2","bg-senteranga-green","text-white","text-sm","font-medium","rounded","hover:bg-senteranga-green-dark","transition-colors","inline-block","text-center"],[1,"flex","items-center","gap-3"],[1,"w-8","h-8","bg-senteranga-green","rounded-full","flex","items-center","justify-center","text-white","font-bold","text-sm"],["class","absolute -bottom-1 -right-1 w-3 h-3 rounded-full border-2 border-white",3,"ngClass",4,"ngIf"],[1,"hidden","md:block"],[1,"text-sm","text-gray-700"],[1,"font-semibold"],[1,"text-xs","text-gray-500","flex","items-center","gap-1"],["class","px-1.5 py-0.5 rounded text-xs font-medium",3,"ngClass",4,"ngIf"],[1,"px-3","py-2","bg-white","border","border-gray-200","rounded","text-sm","hover:bg-gray-50","flex","items-center","gap-1",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2H5a2 2 0 00-2-2z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8 5a2 2 0 012-2h4a2 2 0 012 2v2H8V5z"],[1,"absolute","right-0","mt-1","bg-white","border","border-gray-200","rounded","shadow-lg","w-56","z-50"],[1,"px-4","py-3","border-b","border-gray-100"],[1,"flex","items-center","gap-2"],[1,"text-sm","font-medium","text-gray-900"],[1,"text-xs","text-gray-500"],["class","mt-2",4,"ngIf"],[1,"py-1"],["routerLink","/dashboard-reservations",1,"block","px-4","py-2","text-sm","text-gray-700","hover:bg-gray-50"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","inline","mr-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"],[4,"ngIf"],[1,"border-t","border-gray-100"],[1,"block","w-full","text-left","px-4","py-2","text-sm","text-red-600","hover:bg-gray-50",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"],[1,"absolute","-bottom-1","-right-1","w-3","h-3","rounded-full","border-2","border-white",3,"ngClass"],[1,"px-1.5","py-0.5","rounded","text-xs","font-medium",3,"ngClass"],[1,"mt-2"],[1,"inline-flex","items-center","px-2","py-1","rounded-full","text-xs","font-medium",3,"ngClass"],["fill","currentColor","viewBox","0 0 20 20",1,"w-3","h-3","mr-1"],["fill-rule","evenodd","d","M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule","evenodd"],["routerLink","/dashboard-agriculteur",1,"block","px-4","py-2","text-sm","text-gray-700","hover:bg-gray-50"],["routerLink","/dashboard-admin",1,"block","px-4","py-2","text-sm","text-gray-700","hover:bg-gray-50"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 12a3 3 0 11-6 0 3 3 0 016 0z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 6h16M4 12h16M4 18h16"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"lg:hidden","fixed","inset-0","top-16","bg-black","bg-opacity-50","z-40",3,"click"],[1,"lg:hidden","absolute","top-full","left-0","right-0","bg-white","shadow-lg","border-t","border-gray-200","z-50","transform","transition-all","duration-300","ease-in-out"],[1,"px-4","py-6","space-y-4"],[1,"space-y-2"],["routerLink","/",1,"block","px-3","py-2","text-base","font-medium","text-gray-900","hover:text-senteranga-green","hover:bg-gray-50","rounded-md","transition-colors",3,"click"],["routerLink","/marche-agricole",1,"block","px-3","py-2","text-base","font-medium","text-gray-900","hover:text-senteranga-green","hover:bg-gray-50","rounded-md","transition-colors",3,"click"],["href","#",1,"block","px-3","py-2","text-base","font-medium","text-gray-900","hover:text-senteranga-green","hover:bg-gray-50","rounded-md","transition-colors",3,"click"],[1,"border-t","border-gray-200","pt-4"],[1,"flex","items-center","justify-between","px-3","py-2"],[1,"text-base","font-medium","text-gray-900"],[1,"border-t","border-gray-200","pt-4","space-y-3"],["routerLink","/connexion",1,"block","w-full","px-4","py-3","text-center","text-senteranga-green","text-base","font-medium","border","border-senteranga-green","rounded-md","hover:bg-senteranga-green","hover:text-white","transition-colors",3,"click"],["routerLink","/inscription",1,"block","w-full","px-4","py-3","text-center","bg-senteranga-green","text-white","text-base","font-medium","rounded-md","hover:bg-senteranga-green-dark","transition-colors",3,"click"],[1,"block","w-full","px-4","py-3","text-center","bg-white","border","rounded-md",3,"click"],[1,"block","w-full","px-4","py-3","text-center","bg-red-500","text-white","rounded-md",3,"click"]],template:function(a,i){if(1&a){const m=e.RV6();e.j41(0,"header",2)(1,"div",3)(2,"a",4),e.nrm(3,"img",5),e.j41(4,"span",6),e.EFF(5,"Portail SenTeranga"),e.k0s()(),e.j41(6,"nav",7)(7,"a",8),e.EFF(8,"Accueil"),e.k0s(),e.j41(9,"a",9),e.EFF(10,"March\xe9s"),e.k0s(),e.j41(11,"a",10),e.EFF(12,"A propos"),e.k0s(),e.j41(13,"a",10),e.EFF(14,"Forum"),e.k0s()(),e.j41(15,"div",11)(16,"div",12),e.bIt("click",function(){return e.eBV(m),e.Njj(i.toggleCart())}),e.qSk(),e.j41(17,"svg",13),e.nrm(18,"path",14),e.k0s(),e.joV(),e.j41(19,"span",15),e.EFF(20),e.k0s()(),e.j41(21,"div",16)(22,"div",12),e.bIt("click",function(){return e.eBV(m),e.Njj(i.toggleNotifications())}),e.qSk(),e.j41(23,"svg",13),e.nrm(24,"path",17),e.k0s(),e.DNE(25,g,2,1,"span",18),e.k0s(),e.DNE(26,y,6,2,"div",19),e.k0s(),e.DNE(27,E,5,0,"ng-container",20)(28,S,43,11,"ng-template",null,0,e.C5r),e.k0s(),e.joV(),e.j41(30,"button",21),e.bIt("click",function(){return e.eBV(m),e.Njj(i.toggleMobileMenu())}),e.qSk(),e.j41(31,"svg",22),e.DNE(32,N,1,0,"path",23)(33,P,1,0,"path",24),e.k0s()()(),e.DNE(34,V,1,0,"div",25)(35,G,24,3,"div",26),e.k0s(),e.joV(),e.j41(36,"app-cart-popup",27),e.bIt("close",function(){return e.eBV(m),e.Njj(i.closeCart())})("continueShopping",function(){return e.eBV(m),e.Njj(i.onContinueShopping())})("checkout",function(){return e.eBV(m),e.Njj(i.onCheckout())})("updateQuantity",function(U){return e.eBV(m),e.Njj(i.onUpdateQuantity(U))})("removeItem",function(U){return e.eBV(m),e.Njj(i.onRemoveItem(U))}),e.k0s()}if(2&a){const m=e.sdS(29);e.R7$(20),e.JRh(i.cartItemCount),e.R7$(5),e.Y8G("ngIf",null==i.notifications?null:i.notifications.length),e.R7$(),e.Y8G("ngIf",i.showNotifications),e.R7$(),e.Y8G("ngIf",!i.isLoggedIn())("ngIfElse",m),e.R7$(5),e.Y8G("ngIf",!i.isMobileMenuOpen),e.R7$(),e.Y8G("ngIf",i.isMobileMenuOpen),e.R7$(),e.Y8G("ngIf",i.isMobileMenuOpen),e.R7$(),e.Y8G("ngIf",i.isMobileMenuOpen),e.R7$(),e.Y8G("isOpen",i.isCartOpen)("items",i.cartItems)}},dependencies:[h.MD,h.YU,h.Sq,h.bT,o.iI,o.Wk,n],encapsulation:2})}}return r})()},6868:(F,b,u)=>{u.d(b,{m:()=>C});var h=u(4412),o=u(5312),e=u(4438),v=u(1626);let C=(()=>{class x{constructor(s){this.http=s,this.CART_STORAGE_KEY="senteranga_cart",this.cartSubject=new h.t([]),this.cart$=this.cartSubject.asObservable(),this.apiUrl=o.c.apiUrl,this.loadCartFromStorage()}loadCartFromStorage(){try{const s=localStorage.getItem(this.CART_STORAGE_KEY);if(s){const l=JSON.parse(s);this.cartSubject.next(l)}}catch(s){console.error("Error loading cart from storage:",s),this.cartSubject.next([])}}saveCartToStorage(s){try{localStorage.setItem(this.CART_STORAGE_KEY,JSON.stringify(s))}catch(l){console.error("Error saving cart to storage:",l)}}getCartItems(){return this.cartSubject.value}getCart(){return this.cart$}getCartState(){const s=this.getCartItems(),l=s.reduce((n,c)=>n+c.unitPrice*c.quantity,0);return{items:s,total:l}}getCartItemCount(){return this.getCartItems().reduce((s,l)=>s+l.quantity,0)}addToCart(s,l=1){const n=this.getCartItems(),c=n.findIndex(p=>p.id===s.id);if(c>-1)n[c].quantity+=l;else{const p={id:s.id,name:s.titre||s.name,producer:this.getProducerName(s),unitPrice:s.prixParUnite||s.prix||0,unit:s.unite||"unit\xe9",quantity:l,imageUrl:this.getProductImage(s)};n.push(p)}this.cartSubject.next([...n]),this.saveCartToStorage(n)}removeFromCart(s){const l=this.getCartItems().filter(n=>n.id!==s);this.cartSubject.next(l),this.saveCartToStorage(l)}updateQuantity(s,l){if(l<=0)return void this.removeFromCart(s);const n=this.getCartItems(),c=n.findIndex(p=>p.id===s);c>-1&&(n[c].quantity=l,this.cartSubject.next([...n]),this.saveCartToStorage(n))}clearCart(){this.cartSubject.next([]),this.saveCartToStorage([])}getProducerName(s){return s.agriculteurId?s.agriculteurId:s.producer||"Producteur inconnu"}getProductImage(s){return s.images&&s.images.length>0?s.images[0]:s.imageUrl||s.image||"/images/placeholder.png"}createReservation(s,l,n=1){const c={id:`reservation-${Date.now()}`,productId:s.id,productTitle:s.name||s.titre,clientId:l.id,clientName:`${l.firstName} ${l.lastName}`,clientEmail:l.email,clientPhone:l.phone,agriculteurId:s.producer?.id||s.agriculteurId,quantity:n,reservationDate:new Date,status:"active"};return this.http.post(`${this.apiUrl}/reservations`,c)}getReservationsForFarmer(s){return this.http.get(`${this.apiUrl}/reservations?agriculteurId=${s}&_sort=reservationDate&_order=asc`)}getReservationsForClient(s){return this.http.get(`${this.apiUrl}/reservations?clientId=${s}&_sort=reservationDate&_order=desc`)}updateReservationStatus(s,l){return this.http.patch(`${this.apiUrl}/reservations/${s}`,{status:l})}deleteReservation(s){return this.http.delete(`${this.apiUrl}/reservations/${s}`)}static{this.\u0275fac=function(l){return new(l||x)(e.KVO(v.Qq))}}static{this.\u0275prov=e.jDH({token:x,factory:x.\u0275fac,providedIn:"root"})}}return x})()},8490:(F,b,u)=>{u.d(b,{u:()=>k});var h=u(5312),o=u(7673),e=u(6354),v=u(9437),C=u(4438),x=u(1626);let k=(()=>{class s{constructor(n){this.http=n,this.apiUrl=h.c.apiUrl}getRegions(){return this.http.get(`${this.apiUrl}/regions`)}updateUser(n){return this.http.put(`${this.apiUrl}/users/${n.id}`,n)}createNotification(n){return this.http.post(`${this.apiUrl}/notifications`,n)}getUserTypes(){return this.http.get(`${this.apiUrl}/userTypes`)}getClientTypes(){return this.http.get(`${this.apiUrl}/clientTypes`)}getInvestorTypes(){return this.http.get(`${this.apiUrl}/investorTypes`)}getMinistries(){return this.http.get(`${this.apiUrl}/ministries`)}getStructures(){return this.http.get(`${this.apiUrl}/structures`)}getCertifications(){return this.http.get(`${this.apiUrl}/certifications`)}getTestUsers(){return this.http.get(`${this.apiUrl}/users`)}authenticateUser(n,c){const p=n.replace(/^(\+221|221)/,""),f=this.getRegisteredUsersFromStorage();return this.getTestUsers().pipe((0,e.T)(g=>g.find(y=>(y.phone||"").toString().replace(/^(\+221|221)/,"")===p&&y.password===c)||f.find(y=>(y.phone||"").toString().replace(/^(\+221|221)/,"")===p&&y.password===c)||null))}registerUser(n){const c=n.telephone.replace(/^(\+221|221)/,"");return this.getTestUsers().pipe((0,e.T)(p=>{if(p.find(_=>_.phone.replace(/^(\+221|221)/,"")===c))return{success:!1,error:"Un compte avec ce num\xe9ro de t\xe9l\xe9phone existe d\xe9j\xe0"};const g={id:`user-${Date.now()}`,email:n.email||"",password:n.password,userType:n.userType.id,firstName:n.prenom,lastName:n.nom,phone:n.telephone,region:n.region||void 0,department:n.departement||n.department||void 0,village:n.village||void 0,clientType:n.clientType||void 0,investorType:n.investorType||void 0,investmentAmount:n.montantInvestissement||void 0,professionalEmail:n.emailPro||void 0,structure:n.structure||void 0,interventionRegions:n.regionsIntervention||void 0,governmentId:n.governmentId||void 0,ministry:n.ministry||void 0,agentCode:n.agentCode||void 0,adminCode:n.adminCode||void 0,isValidated:!1,validationStatus:"pending",bankAccount:void 0};return this.http.post(`${this.apiUrl}/users`,g).subscribe({next:_=>{console.log("User registered successfully:",_)},error:_=>{console.error("Error saving user:",_)}}),{success:!0,user:g}}))}getRegisteredUsersFromStorage(){const n=localStorage.getItem("registeredUsers");return n?JSON.parse(n):[]}getDepartementsByRegion(n){return this.getRegions().pipe((0,e.T)(c=>{const p=c.find(f=>f.id===n);return p?p.departements:[]}))}createAnnouncement(n){return this.http.post(`${this.apiUrl}/announcements`,n)}getAnnouncementsByUser(n){return this.http.get(`${this.apiUrl}/announcements?userId=${n}`)}getNotificationsForUser(n){return this.http.get(`${this.apiUrl}/notifications?userId=${n}&_sort=createdAt&_order=desc`)}markNotificationRead(n){return this.http.patch(`${this.apiUrl}/notifications/${n}`,{read:!0})}updateUserBankAccount(n,c){return this.http.patch(`${this.apiUrl}/users/${n}`,{bankAccount:c})}getSeedsCatalog(){return this.http.get(`${this.apiUrl}/seeds`).pipe((0,v.W)(n=>(console.warn("seeds endpoint missing or error",n),(0,o.of)([]))))}createSeedOrder(n){return this.http.post(`${this.apiUrl}/seedOrders`,n)}getAlertsByRegion(n){return this.http.get(`${this.apiUrl}/agronomeAlerts?region=${n}`)}createProduct(n){return this.http.post(`${this.apiUrl}/products`,n)}getProductsByUser(n){return this.http.get(`${this.apiUrl}/products?agriculteurId=${n}`)}getProductsByCategory(n){return this.http.get(`${this.apiUrl}/products?categorie=${n}`)}getProductById(n){return this.http.get(`${this.apiUrl}/products/${n}`)}updateProduct(n){return this.http.put(`${this.apiUrl}/products/${n.id}`,n)}updateProductStatus(n,c,p){const f={statutValidation:c,dateMaj:(new Date).toISOString()};return p&&(f.statutDisponibilite=p),this.http.patch(`${this.apiUrl}/products/${n}`,f)}deleteProduct(n){return this.http.delete(`${this.apiUrl}/products/${n}`)}getAllProducts(){return this.http.get(`${this.apiUrl}/products`)}validateUserRegistration(n,c){return this.getUserTypes().pipe((0,e.T)(p=>{const f=p.find(_=>_.id===n);if(!f)return{valid:!1,errors:["Type d'utilisateur invalide"]};const g=[];return f.requiredFields.forEach(_=>{c[_]||g.push(`Le champ ${_} est requis`)}),"agriculteur"===n&&(c.region||g.push("La r\xe9gion est requise"),c.departement||g.push("Le d\xe9partement est requis"),c.village||g.push("Le village est requis")),"client"===n&&(c.clientType||g.push("Le type de client est requis")),"investisseur"===n&&((!c.email||!this.isValidEmail(c.email))&&g.push("Email invalide"),c.investorType||g.push("Le type d'investisseur est requis"),(!c.montantInvestissement||c.montantInvestissement<1e5)&&g.push("Montant minimum: 100 000 FCFA")),"agronome"===n&&((!c.emailPro||!this.isValidEmail(c.emailPro))&&g.push("Email professionnel invalide"),c.structure||g.push("La structure est requise"),(!c.regionsIntervention||0===c.regionsIntervention.length)&&g.push("Au moins une r\xe9gion d'intervention requise")),{valid:0===g.length,errors:g}}))}isValidEmail(n){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n)}static{this.\u0275fac=function(c){return new(c||s)(C.KVO(x.Qq))}}static{this.\u0275prov=C.jDH({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})()},5312:(F,b,u)=>{u.d(b,{c:()=>h});const h={production:!1,apiUrl:"https://json-server-senteranga.onrender.com/api"}}}]);