{"ast":null,"code":"import { of } from 'rxjs';\nimport { map } from 'rxjs/operators';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nexport let DataService = /*#__PURE__*/(() => {\n  class DataService {\n    constructor(http) {\n      this.http = http;\n      this.data = null;\n    }\n    loadData() {\n      if (this.data) {\n        return of(this.data);\n      }\n      return this.http.get('/assets/data/senteranga-data.json').pipe(map(data => {\n        this.data = data;\n        return data;\n      }));\n    }\n    getRegions() {\n      return this.loadData().pipe(map(data => data.regions || []));\n    }\n    getUserTypes() {\n      return this.loadData().pipe(map(data => data.userTypes || []));\n    }\n    getClientTypes() {\n      return this.loadData().pipe(map(data => data.clientTypes || []));\n    }\n    getInvestorTypes() {\n      return this.loadData().pipe(map(data => data.investorTypes || []));\n    }\n    getMinistries() {\n      return this.loadData().pipe(map(data => data.ministries || []));\n    }\n    getStructures() {\n      return this.loadData().pipe(map(data => data.structures || []));\n    }\n    getCertifications() {\n      return this.loadData().pipe(map(data => data.certifications || []));\n    }\n    getTestUsers() {\n      return this.loadData().pipe(map(data => data.testUsers || []));\n    }\n    authenticateUser(email, password) {\n      return this.getTestUsers().pipe(map(users => {\n        const user = users.find(u => u.email === email && u.password === password);\n        return user || null;\n      }));\n    }\n    getDepartementsByRegion(regionId) {\n      return this.getRegions().pipe(map(regions => {\n        const region = regions.find(r => r.id === regionId);\n        return region ? region.departements : [];\n      }));\n    }\n    validateUserRegistration(userType, formData) {\n      return this.getUserTypes().pipe(map(userTypes => {\n        const type = userTypes.find(t => t.id === userType);\n        if (!type) {\n          return {\n            valid: false,\n            errors: ['Type d\\'utilisateur invalide']\n          };\n        }\n        const errors = [];\n        // Validation des champs requis\n        type.requiredFields.forEach(field => {\n          if (!formData[field]) {\n            errors.push(`Le champ ${field} est requis`);\n          }\n        });\n        // Validations spécifiques\n        if (userType === 'agriculteur') {\n          if (!formData.region) errors.push('La région est requise');\n          if (!formData.departement) errors.push('Le département est requis');\n          if (!formData.village) errors.push('Le village est requis');\n        }\n        if (userType === 'client') {\n          if (!formData.clientType) errors.push('Le type de client est requis');\n        }\n        if (userType === 'investisseur') {\n          if (!formData.email || !this.isValidEmail(formData.email)) {\n            errors.push('Email invalide');\n          }\n          if (!formData.investorType) errors.push('Le type d\\'investisseur est requis');\n          if (!formData.montantInvestissement || formData.montantInvestissement < 100000) {\n            errors.push('Montant minimum: 100 000 FCFA');\n          }\n        }\n        if (userType === 'agronome') {\n          if (!formData.emailPro || !this.isValidEmail(formData.emailPro)) {\n            errors.push('Email professionnel invalide');\n          }\n          if (!formData.structure) errors.push('La structure est requise');\n          if (!formData.regionsIntervention || formData.regionsIntervention.length === 0) {\n            errors.push('Au moins une région d\\'intervention requise');\n          }\n        }\n        return {\n          valid: errors.length === 0,\n          errors\n        };\n      }));\n    }\n    isValidEmail(email) {\n      const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n      return emailRegex.test(email);\n    }\n    static {\n      this.ɵfac = function DataService_Factory(t) {\n        return new (t || DataService)(i0.ɵɵinject(i1.HttpClient));\n      };\n    }\n    static {\n      this.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n        token: DataService,\n        factory: DataService.ɵfac,\n        providedIn: 'root'\n      });\n    }\n  }\n  return DataService;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}