"use strict";(self.webpackChunksenteranga=self.webpackChunksenteranga||[]).push([[402],{5473:(E,v,u)=>{u.d(v,{n:()=>e});var h=u(177),s=u(4438);let e=(()=>{class f{static{this.\u0275fac=function(x){return new(x||f)}}static{this.\u0275cmp=s.VBU({type:f,selectors:[["app-footer"]],standalone:!0,features:[s.aNF],decls:45,vars:0,consts:[[1,"bg-senteranga-green","text-white","py-8","sm:py-12","md:py-16","px-4","sm:px-6","md:px-8"],[1,"max-w-7xl","mx-auto"],[1,"grid","grid-cols-1","sm:grid-cols-2","lg:grid-cols-3","gap-8","sm:gap-10","md:gap-12","mb-8","sm:mb-10","md:mb-12"],[1,"sm:col-span-2","lg:col-span-1"],[1,"flex","items-center","gap-2","sm:gap-3","mb-4"],["src","/images/logo-senteranga.png","alt","SenTeranga Logo",1,"h-12","sm:h-14","w-auto"],[1,"text-2xl","sm:text-3xl","font-bold"],[1,"text-sm","sm:text-base","text-green-100","leading-relaxed","mb-4","sm:mb-6"],["src","/icons/social-media.svg","alt","Social Media",1,"h-6","sm:h-8"],[1,"text-lg","sm:text-xl","font-bold","mb-4","sm:mb-6"],[1,"space-y-2","sm:space-y-3"],["href","#",1,"text-base","sm:text-lg","hover:text-green-100","transition-colors"],["href","#",1,"text-sm","sm:text-base","hover:text-green-100","transition-colors"],[1,"border-t","border-green-600","pt-6","sm:pt-8","flex","flex-col","sm:flex-row","justify-between","items-center","gap-3","sm:gap-4","text-center","sm:text-left"],[1,"text-xs","sm:text-sm","text-green-100"]],template:function(x,_){1&x&&(s.j41(0,"footer",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),s.nrm(5,"img",5),s.j41(6,"span",6),s.EFF(7,"SenTeranga"),s.k0s()(),s.j41(8,"p",7),s.EFF(9," L'interface institutionnelle et professionnelle du syst\xe8me alimentaire national s\xe9n\xe9galais. Autonomiser les agriculteurs, connecter les march\xe9s et construire un avenir durable. "),s.k0s(),s.nrm(10,"img",8),s.k0s(),s.j41(11,"div")(12,"h3",9),s.EFF(13,"March\xe9s Digital"),s.k0s(),s.j41(14,"ul",10)(15,"li")(16,"a",11),s.EFF(17,"March\xe9 Agricol"),s.k0s()(),s.j41(18,"li")(19,"a",11),s.EFF(20,"March\xe9 \xc9levage"),s.k0s()(),s.j41(21,"li")(22,"a",11),s.EFF(23,"March\xe9 P\xeache"),s.k0s()()()(),s.j41(24,"div")(25,"h3",9),s.EFF(26,"Support"),s.k0s(),s.j41(27,"ul",10)(28,"li")(29,"a",12),s.EFF(30,"Help Center"),s.k0s()(),s.j41(31,"li")(32,"a",12),s.EFF(33,"Contact Us"),s.k0s()(),s.j41(34,"li")(35,"a",12),s.EFF(36,"Privacy Policy"),s.k0s()(),s.j41(37,"li")(38,"a",12),s.EFF(39,"Terms of Service"),s.k0s()()()()(),s.j41(40,"div",13)(41,"p",14),s.EFF(42,"\xa9 2024 SENTERANGA. All rights reserved."),s.k0s(),s.j41(43,"p",14),s.EFF(44,"Powered by Readdy"),s.k0s()()()())},dependencies:[h.MD],encapsulation:2})}}return f})()},3322:(E,v,u)=>{u.d(v,{l:()=>S});var h=u(177),s=u(5776),e=u(4438);function x(o,l){if(1&o){const t=e.RV6();e.j41(0,"div",2),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.onClose())}),e.k0s()}}function _(o,l){if(1&o){const t=e.RV6();e.j41(0,"div",20),e.nrm(1,"img",21),e.j41(2,"div",22)(3,"h3",23),e.EFF(4),e.k0s(),e.j41(5,"p",24),e.EFF(6),e.k0s(),e.j41(7,"p",25),e.EFF(8),e.k0s()(),e.j41(9,"div",26)(10,"button",27),e.bIt("click",function(){const i=e.eBV(t).$implicit,p=e.XpG(2);return e.Njj(p.decrementQuantity(i))}),e.nrm(11,"img",28),e.k0s(),e.j41(12,"span",29),e.EFF(13),e.k0s(),e.j41(14,"button",8),e.bIt("click",function(){const i=e.eBV(t).$implicit,p=e.XpG(2);return e.Njj(p.incrementQuantity(i))}),e.nrm(15,"img",30),e.k0s()(),e.j41(16,"div",31)(17,"span",32),e.EFF(18),e.k0s(),e.j41(19,"button",33),e.bIt("click",function(){const i=e.eBV(t).$implicit,p=e.XpG(2);return e.Njj(p.onRemoveItem(i.id))}),e.EFF(20," Supprimer "),e.k0s()()()}if(2&o){const t=l.$implicit,r=e.XpG(2);e.R7$(),e.Y8G("src",t.imageUrl,e.B4B)("alt",t.name),e.R7$(3),e.JRh(t.name),e.R7$(2),e.SpI("Par ",t.producer,""),e.R7$(2),e.SpI(" ",r.formatUnitPrice(t.unitPrice,t.unit)," "),e.R7$(2),e.AVh("opacity-50",t.quantity<=1),e.Y8G("disabled",t.quantity<=1),e.R7$(3),e.SpI(" ",t.quantity," "),e.R7$(5),e.SpI(" ",r.formatCurrency(r.getItemTotal(t))," ")}}function U(o,l){if(1&o){const t=e.RV6();e.j41(0,"div",3),e.bIt("click",function(i){return e.eBV(t),e.Njj(i.stopPropagation())}),e.j41(1,"div",4)(2,"div",5),e.nrm(3,"img",6),e.j41(4,"h2",7),e.EFF(5),e.k0s()(),e.j41(6,"button",8),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.onClose())}),e.nrm(7,"img",9),e.k0s()(),e.j41(8,"div",10)(9,"div",11),e.DNE(10,_,21,10,"div",12),e.k0s()(),e.j41(11,"div",13)(12,"div",14)(13,"span",15),e.EFF(14,"Total:"),e.k0s(),e.j41(15,"span",16),e.EFF(16),e.k0s()(),e.j41(17,"div",17)(18,"button",18),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.onContinueShopping())}),e.EFF(19," Continuer mes Achats "),e.k0s(),e.j41(20,"button",19),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.onCheckout())}),e.EFF(21," Passer Commande "),e.k0s()()()()}if(2&o){const t=e.XpG();e.R7$(5),e.SpI(" Mon Panier ",t.formatCartCount(t.totalItems)," "),e.R7$(5),e.Y8G("ngForOf",t.items),e.R7$(6),e.SpI(" ",t.formatCurrency(t.cartTotal)," ")}}let n=(()=>{class o{constructor(){this.items=[],this.isOpen=!1,this.close=new e.bkB,this.continueShopping=new e.bkB,this.checkout=new e.bkB,this.updateQuantity=new e.bkB,this.removeItem=new e.bkB}get totalItems(){return this.items.length}get cartTotal(){return this.items.reduce((t,r)=>t+r.unitPrice*r.quantity,0)}formatCurrency(t){return(o=>`\u20a3${o.toLocaleString("fr-FR")}`)(t)}formatUnitPrice(t,r){return((o,l)=>`\u20a3${o}/${l}`)(t,r)}formatCartCount(t){return(o=>`(${o} article${o>1?"s":""})`)(t)}getItemTotal(t){return t.unitPrice*t.quantity}onClose(){this.close.emit()}onContinueShopping(){this.continueShopping.emit(),this.close.emit()}onCheckout(){this.checkout.emit()}incrementQuantity(t){this.updateQuantity.emit({itemId:t.id,quantity:t.quantity+1})}decrementQuantity(t){t.quantity>1&&this.updateQuantity.emit({itemId:t.id,quantity:t.quantity-1})}onRemoveItem(t){this.removeItem.emit(t)}static{this.\u0275fac=function(r){return new(r||o)}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["app-cart-popup"]],inputs:{items:"items",isOpen:"isOpen"},outputs:{close:"close",continueShopping:"continueShopping",checkout:"checkout",updateQuantity:"updateQuantity",removeItem:"removeItem"},standalone:!0,features:[e.aNF],decls:2,vars:2,consts:[["class","fixed inset-0 bg-black bg-opacity-50 z-50",3,"click",4,"ngIf"],["class","fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-white rounded-lg shadow-2xl z-50 w-full max-w-2xl max-h-[90vh] flex flex-col",3,"click",4,"ngIf"],[1,"fixed","inset-0","bg-black","bg-opacity-50","z-50",3,"click"],[1,"fixed","top-1/2","left-1/2","transform","-translate-x-1/2","-translate-y-1/2","bg-white","rounded-lg","shadow-2xl","z-50","w-full","max-w-2xl","max-h-[90vh]","flex","flex-col",3,"click"],[1,"flex","items-center","justify-between","px-6","py-4","border-b","border-gray-200"],[1,"flex","items-center","gap-3"],["src","/icons/cart-icon.svg","alt","Cart",1,"w-5","h-5"],[1,"text-gray-900","text-xl","font-bold"],[1,"hover:opacity-70","transition-opacity",3,"click"],["src","/icons/close-icon.svg","alt","Close",1,"w-3","h-3"],[1,"flex-1","overflow-y-auto","px-6","py-4"],[1,"space-y-4"],["class","flex items-center gap-4 p-4 border border-gray-200 rounded-lg",4,"ngFor","ngForOf"],[1,"border-t","border-gray-200","px-6","py-4"],[1,"flex","items-center","justify-between","mb-4"],[1,"text-gray-900","text-lg","font-medium"],[1,"text-senteranga-green","text-2xl","font-bold"],[1,"flex","items-center","gap-4"],[1,"flex-1","px-6","py-3","border-2","border-senteranga-green","text-senteranga-green","text-base","font-medium","rounded-lg","hover:bg-senteranga-green","hover:text-white","transition-colors",3,"click"],[1,"flex-1","px-6","py-3","bg-senteranga-green","text-white","text-base","font-medium","rounded-lg","hover:bg-senteranga-green-dark","transition-colors",3,"click"],[1,"flex","items-center","gap-4","p-4","border","border-gray-200","rounded-lg"],[1,"w-16","h-16","rounded-lg","object-cover","flex-shrink-0",3,"src","alt"],[1,"flex-1","min-w-0"],[1,"text-gray-900","text-base","font-medium","truncate"],[1,"text-gray-600","text-sm"],[1,"text-senteranga-green","text-sm","font-medium"],[1,"flex","items-center","gap-3","flex-shrink-0"],[1,"hover:opacity-70","transition-opacity",3,"click","disabled"],["src","/icons/minus-icon.svg","alt","Decrease",1,"w-2","h-0.5"],[1,"text-black","text-base","font-medium","min-w-[2rem]","text-center"],["src","/icons/plus-icon.svg","alt","Increase",1,"w-2","h-2"],[1,"flex","flex-col","items-end","gap-1","flex-shrink-0"],[1,"text-gray-900","text-base","font-bold"],[1,"text-red-500","text-sm","font-normal","hover:text-red-600","transition-colors",3,"click"]],template:function(r,i){1&r&&e.DNE(0,x,1,0,"div",0)(1,U,22,3,"div",1),2&r&&(e.Y8G("ngIf",i.isOpen),e.R7$(),e.Y8G("ngIf",i.isOpen))},dependencies:[h.MD,h.Sq,h.bT],encapsulation:2})}}return o})();const a=[{id:"1",name:"Tomates Fra\xeeches Bio",producer:"Amadou Diallo",unitPrice:250,unit:"kg",quantity:13,imageUrl:"/images/products/tomatoes-fresh.jpg"},{id:"2",name:"Oignons Violets Premium",producer:"Fatou Seck",unitPrice:300,unit:"kg",quantity:1,imageUrl:"/images/products/onions-purple.jpg"},{id:"3",name:"Mil Traditionnel",producer:"Moussa Ba",unitPrice:200,unit:"kg",quantity:5,imageUrl:"/images/products/millet-traditional.jpg"}];var m=u(8174);function g(o,l){if(1&o&&(e.j41(0,"span",28),e.EFF(1),e.k0s()),2&o){const t=e.XpG();e.R7$(),e.JRh(t.unreadCount)}}function c(o,l){1&o&&(e.j41(0,"div",33),e.EFF(1,"Aucune notification"),e.k0s())}function d(o,l){if(1&o&&(e.j41(0,"li",34)(1,"div",35),e.EFF(2),e.k0s(),e.j41(3,"div",36),e.EFF(4),e.k0s()()),2&o){const t=l.$implicit;e.R7$(2),e.JRh(t.title),e.R7$(2),e.JRh(t.message)}}function C(o,l){if(1&o&&(e.j41(0,"div",29)(1,"h4",30),e.EFF(2,"Notifications"),e.k0s(),e.DNE(3,c,2,0,"div",31),e.j41(4,"ul"),e.DNE(5,d,5,2,"li",32),e.k0s()()),2&o){const t=e.XpG();e.R7$(3),e.Y8G("ngIf",0===t.notifications.length),e.R7$(2),e.Y8G("ngForOf",t.notifications)}}function b(o,l){1&o&&(e.qex(0),e.j41(1,"a",37),e.EFF(2," Connexion "),e.k0s(),e.j41(3,"a",38),e.EFF(4," S'inscrire "),e.k0s(),e.bVm())}function F(o,l){if(1&o){const t=e.RV6();e.j41(0,"div",39)(1,"div",40),e.EFF(2,"Bonjour, "),e.j41(3,"span",41),e.EFF(4),e.k0s()(),e.j41(5,"button",42),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.goToDashboard())}),e.EFF(6,"Mon espace"),e.k0s(),e.j41(7,"button",43),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.logout())}),e.EFF(8,"D\xe9connexion"),e.k0s()()}if(2&o){const t=e.XpG();e.R7$(4),e.JRh(t.userDisplayName)}}function w(o,l){1&o&&(e.qSk(),e.nrm(0,"path",44))}function T(o,l){1&o&&(e.qSk(),e.nrm(0,"path",45))}function $(o,l){if(1&o){const t=e.RV6();e.j41(0,"div",46),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.closeMobileMenu())}),e.k0s()}}function M(o,l){if(1&o){const t=e.RV6();e.qex(0),e.j41(1,"a",57),e.bIt("click",function(){e.eBV(t);const i=e.XpG(2);return e.Njj(i.closeMobileMenu())}),e.EFF(2," Connexion "),e.k0s(),e.j41(3,"a",58),e.bIt("click",function(){e.eBV(t);const i=e.XpG(2);return e.Njj(i.closeMobileMenu())}),e.EFF(4," S'inscrire "),e.k0s(),e.bVm()}}function N(o,l){if(1&o){const t=e.RV6();e.j41(0,"button",59),e.bIt("click",function(){e.eBV(t);const i=e.XpG(2);return i.goToDashboard(),e.Njj(i.closeMobileMenu())}),e.EFF(1,"Mon espace"),e.k0s(),e.j41(2,"button",60),e.bIt("click",function(){e.eBV(t);const i=e.XpG(2);return i.logout(),e.Njj(i.closeMobileMenu())}),e.EFF(3,"D\xe9connexion"),e.k0s()}}function R(o,l){if(1&o){const t=e.RV6();e.j41(0,"div",47)(1,"div",48)(2,"nav",49)(3,"a",50),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.closeMobileMenu())}),e.EFF(4," Accueil "),e.k0s(),e.j41(5,"a",51),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.closeMobileMenu())}),e.EFF(6," March\xe9s "),e.k0s(),e.j41(7,"a",52),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.closeMobileMenu())}),e.EFF(8," A propos "),e.k0s(),e.j41(9,"a",52),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.closeMobileMenu())}),e.EFF(10," Forum "),e.k0s()(),e.j41(11,"div",53)(12,"div",54)(13,"span",55),e.EFF(14,"Panier"),e.k0s(),e.j41(15,"div",12),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.toggleCart())}),e.qSk(),e.j41(16,"svg",13),e.nrm(17,"path",14),e.k0s(),e.joV(),e.j41(18,"span",15),e.EFF(19),e.k0s()()()(),e.j41(20,"div",56),e.DNE(21,M,5,0,"ng-container",20)(22,N,4,0,"ng-template",null,1,e.C5r),e.k0s()()()}if(2&o){const t=e.sdS(23),r=e.XpG();e.R7$(19),e.JRh(r.cartItemCount),e.R7$(2),e.Y8G("ngIf",!r.isLoggedIn())("ngIfElse",t)}}let S=(()=>{class o{get cartItemCount(){return this.cartItems.length}get unreadCount(){return this.notifications?this.notifications.filter(t=>!t.read).length:0}constructor(t,r){this.router=t,this.dataService=r,this.isCartOpen=!1,this.isMobileMenuOpen=!1,this.cartItems=a,this.currentUser=null,this.notifications=[],this.showNotifications=!1}ngOnInit(){this.loadCurrentUser(),window.addEventListener("storage",t=>{"currentUser"===t.key&&this.loadCurrentUser()}),this.loadNotifications()}loadCurrentUser(){try{const t=localStorage.getItem("currentUser");this.currentUser=t?JSON.parse(t):null}catch{this.currentUser=null}this.loadNotifications()}loadNotifications(){this.currentUser&&this.currentUser.id?this.dataService.getNotificationsForUser(this.currentUser.id).subscribe({next:t=>{this.notifications=t||[]},error:t=>{console.error("Error loading notifications",t),this.notifications=[]}}):this.notifications=[]}isLoggedIn(){return!!this.currentUser}get userDisplayName(){return this.currentUser?`${this.currentUser.firstName||""} ${this.currentUser.lastName||""}`.trim():""}goToDashboard(){this.router.navigate(this.currentUser?[{agriculteur:"/dashboard-agriculteur",client:"/dashboard-institutionnel",admin:"/dashboard-admin",investisseur:"/dashboard-institutionnel",agronome:"/dashboard-institutionnel","agent-terrain":"/dashboard-institutionnel",etat:"/dashboard-institutionnel"}[this.currentUser.userType]||"/"]:["/connexion"])}logout(){localStorage.removeItem("currentUser"),this.currentUser=null,this.router.navigate(["/"])}toggleCart(){this.isCartOpen=!this.isCartOpen}toggleNotifications(){this.showNotifications=!this.showNotifications,this.showNotifications&&this.notifications.length&&(this.notifications.filter(r=>!r.read).slice(0,10).forEach(r=>this.dataService.markNotificationRead(r.id).subscribe()),setTimeout(()=>this.loadNotifications(),300))}closeCart(){this.isCartOpen=!1}toggleMobileMenu(){this.isMobileMenuOpen=!this.isMobileMenuOpen}closeMobileMenu(){this.isMobileMenuOpen=!1}onContinueShopping(){this.closeCart()}onCheckout(){console.log("Proceeding to checkout..."),this.closeCart()}onUpdateQuantity(t){const r=this.cartItems.find(i=>i.id===t.itemId);r&&(r.quantity=t.quantity)}onRemoveItem(t){this.cartItems=this.cartItems.filter(r=>r.id!==t)}static{this.\u0275fac=function(r){return new(r||o)(e.rXU(s.Ix),e.rXU(m.u))}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["app-header"]],standalone:!0,features:[e.aNF],decls:37,vars:11,consts:[["userMenu",""],["mobileUserMenu",""],[1,"fixed","top-0","left-0","right-0","bg-white","py-3","px-4","md:px-8","shadow-sm","z-50"],[1,"max-w-7xl","mx-auto","flex","items-center","justify-between"],["routerLink","/",1,"flex","items-center","gap-2","cursor-pointer"],["src","/images/logo-senteranga.png","alt","SenTeranga Logo",1,"h-8","md:h-12","w-auto"],[1,"text-senteranga-green","text-lg","md:text-2xl","font-bold","hidden","sm:block"],[1,"hidden","lg:flex","items-center","gap-8"],["routerLink","/",1,"text-black","text-base","hover:text-senteranga-green","transition-colors"],["routerLink","/marche-agricole",1,"text-black","text-base","hover:text-senteranga-green","transition-colors"],["href","#",1,"text-black","text-base","hover:text-senteranga-green","transition-colors"],[1,"hidden","lg:flex","items-center","gap-3"],[1,"relative","cursor-pointer",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6","text-senteranga-green"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"],[1,"absolute","-top-1","-right-1","bg-senteranga-green","text-white","text-xs","font-medium","rounded-full","w-4","h-4","flex","items-center","justify-center"],[1,"relative"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6 6 0 10-12 0v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"],["class","absolute -top-1 -right-1 bg-red-600 text-white text-xs font-medium rounded-full w-4 h-4 flex items-center justify-center",4,"ngIf"],["class","absolute right-0 mt-2 bg-white border rounded shadow-lg w-80 z-50 p-3",4,"ngIf"],[4,"ngIf","ngIfElse"],[1,"lg:hidden","p-2","rounded-md","text-gray-600","hover:text-gray-900","hover:bg-gray-100","focus:outline-none","focus:ring-2","focus:ring-inset","focus:ring-senteranga-green",3,"click"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-6","w-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 6h16M4 12h16M4 18h16",4,"ngIf"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12",4,"ngIf"],["class","lg:hidden fixed inset-0 top-16 bg-black bg-opacity-50 z-40",3,"click",4,"ngIf"],["class","lg:hidden absolute top-full left-0 right-0 bg-white shadow-lg border-t border-gray-200 z-50 transform transition-all duration-300 ease-in-out",4,"ngIf"],[3,"close","continueShopping","checkout","updateQuantity","removeItem","isOpen","items"],[1,"absolute","-top-1","-right-1","bg-red-600","text-white","text-xs","font-medium","rounded-full","w-4","h-4","flex","items-center","justify-center"],[1,"absolute","right-0","mt-2","bg-white","border","rounded","shadow-lg","w-80","z-50","p-3"],[1,"font-semibold","mb-2"],["class","text-sm text-gray-600",4,"ngIf"],["class","py-2 border-b last:border-b-0",4,"ngFor","ngForOf"],[1,"text-sm","text-gray-600"],[1,"py-2","border-b","last:border-b-0"],[1,"text-sm","font-medium"],[1,"text-xs","text-gray-600"],["routerLink","/connexion",1,"px-4","py-2","text-senteranga-green","text-sm","font-medium","hover:bg-gray-50","rounded","transition-colors","inline-block","text-center"],["routerLink","/inscription",1,"px-4","py-2","bg-senteranga-green","text-white","text-sm","font-medium","rounded","hover:bg-senteranga-green-dark","transition-colors","inline-block","text-center"],[1,"flex","items-center","gap-3"],[1,"text-sm","text-gray-700"],[1,"font-semibold"],[1,"px-3","py-2","bg-white","border","border-gray-200","rounded","text-sm","hover:bg-gray-50",3,"click"],[1,"px-3","py-2","bg-red-500","text-white","rounded","text-sm","hover:bg-red-600",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 6h16M4 12h16M4 18h16"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"lg:hidden","fixed","inset-0","top-16","bg-black","bg-opacity-50","z-40",3,"click"],[1,"lg:hidden","absolute","top-full","left-0","right-0","bg-white","shadow-lg","border-t","border-gray-200","z-50","transform","transition-all","duration-300","ease-in-out"],[1,"px-4","py-6","space-y-4"],[1,"space-y-2"],["routerLink","/",1,"block","px-3","py-2","text-base","font-medium","text-gray-900","hover:text-senteranga-green","hover:bg-gray-50","rounded-md","transition-colors",3,"click"],["routerLink","/marche-agricole",1,"block","px-3","py-2","text-base","font-medium","text-gray-900","hover:text-senteranga-green","hover:bg-gray-50","rounded-md","transition-colors",3,"click"],["href","#",1,"block","px-3","py-2","text-base","font-medium","text-gray-900","hover:text-senteranga-green","hover:bg-gray-50","rounded-md","transition-colors",3,"click"],[1,"border-t","border-gray-200","pt-4"],[1,"flex","items-center","justify-between","px-3","py-2"],[1,"text-base","font-medium","text-gray-900"],[1,"border-t","border-gray-200","pt-4","space-y-3"],["routerLink","/connexion",1,"block","w-full","px-4","py-3","text-center","text-senteranga-green","text-base","font-medium","border","border-senteranga-green","rounded-md","hover:bg-senteranga-green","hover:text-white","transition-colors",3,"click"],["routerLink","/inscription",1,"block","w-full","px-4","py-3","text-center","bg-senteranga-green","text-white","text-base","font-medium","rounded-md","hover:bg-senteranga-green-dark","transition-colors",3,"click"],[1,"block","w-full","px-4","py-3","text-center","bg-white","border","rounded-md",3,"click"],[1,"block","w-full","px-4","py-3","text-center","bg-red-500","text-white","rounded-md",3,"click"]],template:function(r,i){if(1&r){const p=e.RV6();e.j41(0,"header",2)(1,"div",3)(2,"a",4),e.nrm(3,"img",5),e.j41(4,"span",6),e.EFF(5,"Portail SenTeranga"),e.k0s()(),e.j41(6,"nav",7)(7,"a",8),e.EFF(8,"Accueil"),e.k0s(),e.j41(9,"a",9),e.EFF(10,"March\xe9s"),e.k0s(),e.j41(11,"a",10),e.EFF(12,"A propos"),e.k0s(),e.j41(13,"a",10),e.EFF(14,"Forum"),e.k0s()(),e.j41(15,"div",11)(16,"div",12),e.bIt("click",function(){return e.eBV(p),e.Njj(i.toggleCart())}),e.qSk(),e.j41(17,"svg",13),e.nrm(18,"path",14),e.k0s(),e.joV(),e.j41(19,"span",15),e.EFF(20),e.k0s()(),e.j41(21,"div",16)(22,"div",12),e.bIt("click",function(){return e.eBV(p),e.Njj(i.toggleNotifications())}),e.qSk(),e.j41(23,"svg",13),e.nrm(24,"path",17),e.k0s(),e.DNE(25,g,2,1,"span",18),e.k0s(),e.DNE(26,C,6,2,"div",19),e.k0s(),e.DNE(27,b,5,0,"ng-container",20)(28,F,9,1,"ng-template",null,0,e.C5r),e.k0s(),e.joV(),e.j41(30,"button",21),e.bIt("click",function(){return e.eBV(p),e.Njj(i.toggleMobileMenu())}),e.qSk(),e.j41(31,"svg",22),e.DNE(32,w,1,0,"path",23)(33,T,1,0,"path",24),e.k0s()()(),e.DNE(34,$,1,0,"div",25)(35,R,24,3,"div",26),e.k0s(),e.joV(),e.j41(36,"app-cart-popup",27),e.bIt("close",function(){return e.eBV(p),e.Njj(i.closeCart())})("continueShopping",function(){return e.eBV(p),e.Njj(i.onContinueShopping())})("checkout",function(){return e.eBV(p),e.Njj(i.onCheckout())})("updateQuantity",function(I){return e.eBV(p),e.Njj(i.onUpdateQuantity(I))})("removeItem",function(I){return e.eBV(p),e.Njj(i.onRemoveItem(I))}),e.k0s()}if(2&r){const p=e.sdS(29);e.R7$(20),e.JRh(i.cartItemCount),e.R7$(5),e.Y8G("ngIf",null==i.notifications?null:i.notifications.length),e.R7$(),e.Y8G("ngIf",i.showNotifications),e.R7$(),e.Y8G("ngIf",!i.isLoggedIn())("ngIfElse",p),e.R7$(5),e.Y8G("ngIf",!i.isMobileMenuOpen),e.R7$(),e.Y8G("ngIf",i.isMobileMenuOpen),e.R7$(),e.Y8G("ngIf",i.isMobileMenuOpen),e.R7$(),e.Y8G("ngIf",i.isMobileMenuOpen),e.R7$(),e.Y8G("isOpen",i.isCartOpen)("items",i.cartItems)}},dependencies:[h.MD,h.Sq,h.bT,s.iI,s.Wk,n],encapsulation:2})}}return o})()},8174:(E,v,u)=>{u.d(v,{u:()=>x});var s=u(7673),e=u(6354),f=u(9437),y=u(4438),j=u(1626);let x=(()=>{class _{constructor(n){this.http=n,this.apiUrl="https://json-server-senteranga.onrender.com/api"}getRegions(){return this.http.get(`${this.apiUrl}/regions`)}updateUser(n){return this.http.put(`${this.apiUrl}/users/${n.id}`,n)}createNotification(n){return this.http.post(`${this.apiUrl}/notifications`,n)}getUserTypes(){return this.http.get(`${this.apiUrl}/userTypes`)}getClientTypes(){return this.http.get(`${this.apiUrl}/clientTypes`)}getInvestorTypes(){return this.http.get(`${this.apiUrl}/investorTypes`)}getMinistries(){return this.http.get(`${this.apiUrl}/ministries`)}getStructures(){return this.http.get(`${this.apiUrl}/structures`)}getCertifications(){return this.http.get(`${this.apiUrl}/certifications`)}getTestUsers(){return this.http.get(`${this.apiUrl}/users`)}authenticateUser(n,a){const m=n.replace(/^(\+221|221)/,""),g=this.getRegisteredUsersFromStorage();return this.getTestUsers().pipe((0,e.T)(c=>c.find(b=>(b.phone||"").toString().replace(/^(\+221|221)/,"")===m&&b.password===a)||g.find(b=>(b.phone||"").toString().replace(/^(\+221|221)/,"")===m&&b.password===a)||null))}registerUser(n){const a=n.telephone.replace(/^(\+221|221)/,"");return this.getTestUsers().pipe((0,e.T)(m=>{if(m.find(d=>d.phone.replace(/^(\+221|221)/,"")===a))return{success:!1,error:"Un compte avec ce num\xe9ro de t\xe9l\xe9phone existe d\xe9j\xe0"};const c={id:`user-${Date.now()}`,email:n.email||"",password:n.password,userType:n.userType.id,firstName:n.prenom,lastName:n.nom,phone:n.telephone,region:n.region||void 0,department:n.departement||n.department||void 0,village:n.village||void 0,clientType:n.clientType||void 0,investorType:n.investorType||void 0,investmentAmount:n.montantInvestissement||void 0,professionalEmail:n.emailPro||void 0,structure:n.structure||void 0,interventionRegions:n.regionsIntervention||void 0,governmentId:n.governmentId||void 0,ministry:n.ministry||void 0,agentCode:n.agentCode||void 0,adminCode:n.adminCode||void 0,isValidated:!1,validationStatus:"pending",bankAccount:void 0};return this.http.post(`${this.apiUrl}/users`,c).subscribe({next:d=>{console.log("User registered successfully:",d)},error:d=>{console.error("Error saving user:",d)}}),{success:!0,user:c}}))}getRegisteredUsersFromStorage(){const n=localStorage.getItem("registeredUsers");return n?JSON.parse(n):[]}getDepartementsByRegion(n){return this.getRegions().pipe((0,e.T)(a=>{const m=a.find(g=>g.id===n);return m?m.departements:[]}))}createAnnouncement(n){return this.http.post(`${this.apiUrl}/announcements`,n)}getAnnouncementsByUser(n){return this.http.get(`${this.apiUrl}/announcements?userId=${n}`)}getNotificationsForUser(n){return this.http.get(`${this.apiUrl}/notifications?userId=${n}&_sort=createdAt&_order=desc`)}markNotificationRead(n){return this.http.patch(`${this.apiUrl}/notifications/${n}`,{read:!0})}updateUserBankAccount(n,a){return this.http.patch(`${this.apiUrl}/users/${n}`,{bankAccount:a})}getSeedsCatalog(){return this.http.get(`${this.apiUrl}/seeds`).pipe((0,f.W)(n=>(console.warn("seeds endpoint missing or error",n),(0,s.of)([]))))}createSeedOrder(n){return this.http.post(`${this.apiUrl}/seedOrders`,n)}getAlertsByRegion(n){return this.http.get(`${this.apiUrl}/agronomeAlerts?region=${n}`)}createProduct(n){return this.http.post(`${this.apiUrl}/products`,n)}getProductsByUser(n){return this.http.get(`${this.apiUrl}/products?agriculteurId=${n}`)}getProductsByCategory(n){return this.http.get(`${this.apiUrl}/products?categorie=${n}`)}getProductById(n){return this.http.get(`${this.apiUrl}/products/${n}`)}updateProduct(n){return this.http.put(`${this.apiUrl}/products/${n.id}`,n)}updateProductStatus(n,a,m){const g={statutValidation:a,dateMaj:(new Date).toISOString()};return m&&(g.statutDisponibilite=m),this.http.patch(`${this.apiUrl}/products/${n}`,g)}deleteProduct(n){return this.http.delete(`${this.apiUrl}/products/${n}`)}getAllProducts(){return this.http.get(`${this.apiUrl}/products`)}validateUserRegistration(n,a){return this.getUserTypes().pipe((0,e.T)(m=>{const g=m.find(d=>d.id===n);if(!g)return{valid:!1,errors:["Type d'utilisateur invalide"]};const c=[];return g.requiredFields.forEach(d=>{a[d]||c.push(`Le champ ${d} est requis`)}),"agriculteur"===n&&(a.region||c.push("La r\xe9gion est requise"),a.departement||c.push("Le d\xe9partement est requis"),a.village||c.push("Le village est requis")),"client"===n&&(a.clientType||c.push("Le type de client est requis")),"investisseur"===n&&((!a.email||!this.isValidEmail(a.email))&&c.push("Email invalide"),a.investorType||c.push("Le type d'investisseur est requis"),(!a.montantInvestissement||a.montantInvestissement<1e5)&&c.push("Montant minimum: 100 000 FCFA")),"agronome"===n&&((!a.emailPro||!this.isValidEmail(a.emailPro))&&c.push("Email professionnel invalide"),a.structure||c.push("La structure est requise"),(!a.regionsIntervention||0===a.regionsIntervention.length)&&c.push("Au moins une r\xe9gion d'intervention requise")),{valid:0===c.length,errors:c}}))}isValidEmail(n){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n)}static{this.\u0275fac=function(a){return new(a||_)(y.KVO(j.Qq))}}static{this.\u0275prov=y.jDH({token:_,factory:_.\u0275fac,providedIn:"root"})}}return _})()}}]);