"use strict";(self.webpackChunksenteranga=self.webpackChunksenteranga||[]).push([[502],{4121:(j,v,l)=>{l.d(v,{l:()=>H});var h=l(177),b=l(5776),e=l(4438);function I(r,u){if(1&r){const t=e.RV6();e.j41(0,"div",2),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.onClose())}),e.k0s()}}function o(r,u){if(1&r){const t=e.RV6();e.j41(0,"div",20),e.nrm(1,"img",21),e.j41(2,"div",22)(3,"h3",23),e.EFF(4),e.k0s(),e.j41(5,"p",24),e.EFF(6),e.k0s(),e.j41(7,"p",25),e.EFF(8),e.k0s()(),e.j41(9,"div",26)(10,"button",27),e.bIt("click",function(){const i=e.eBV(t).$implicit,g=e.XpG(2);return e.Njj(g.decrementQuantity(i))}),e.nrm(11,"img",28),e.k0s(),e.j41(12,"span",29),e.EFF(13),e.k0s(),e.j41(14,"button",8),e.bIt("click",function(){const i=e.eBV(t).$implicit,g=e.XpG(2);return e.Njj(g.incrementQuantity(i))}),e.nrm(15,"img",30),e.k0s()(),e.j41(16,"div",31)(17,"span",32),e.EFF(18),e.k0s(),e.j41(19,"button",33),e.bIt("click",function(){const i=e.eBV(t).$implicit,g=e.XpG(2);return e.Njj(g.onRemoveItem(i.id))}),e.EFF(20," Supprimer "),e.k0s()()()}if(2&r){const t=u.$implicit,s=e.XpG(2);e.R7$(),e.Y8G("src",t.imageUrl,e.B4B)("alt",t.name),e.R7$(3),e.JRh(t.name),e.R7$(2),e.SpI("Par ",t.producer,""),e.R7$(2),e.SpI(" ",s.formatUnitPrice(t.unitPrice,t.unit)," "),e.R7$(2),e.AVh("opacity-50",t.quantity<=1),e.Y8G("disabled",t.quantity<=1),e.R7$(3),e.SpI(" ",t.quantity," "),e.R7$(5),e.SpI(" ",s.formatCurrency(s.getItemTotal(t))," ")}}function c(r,u){if(1&r){const t=e.RV6();e.j41(0,"div",3),e.bIt("click",function(i){return e.eBV(t),e.Njj(i.stopPropagation())}),e.j41(1,"div",4)(2,"div",5),e.nrm(3,"img",6),e.j41(4,"h2",7),e.EFF(5),e.k0s()(),e.j41(6,"button",8),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.onClose())}),e.nrm(7,"img",9),e.k0s()(),e.j41(8,"div",10)(9,"div",11),e.DNE(10,o,21,10,"div",12),e.k0s()(),e.j41(11,"div",13)(12,"div",14)(13,"span",15),e.EFF(14,"Total:"),e.k0s(),e.j41(15,"span",16),e.EFF(16),e.k0s()(),e.j41(17,"div",17)(18,"button",18),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.onContinueShopping())}),e.EFF(19," Continuer mes Achats "),e.k0s(),e.j41(20,"button",19),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.onCheckout())}),e.EFF(21," Passer Commande "),e.k0s()()()()}if(2&r){const t=e.XpG();e.R7$(5),e.SpI(" Mon Panier ",t.formatCartCount(t.totalItems)," "),e.R7$(5),e.Y8G("ngForOf",t.items),e.R7$(6),e.SpI(" ",t.formatCurrency(t.cartTotal)," ")}}let n=(()=>{class r{constructor(){this.items=[],this.isOpen=!1,this.close=new e.bkB,this.continueShopping=new e.bkB,this.checkout=new e.bkB,this.updateQuantity=new e.bkB,this.removeItem=new e.bkB}get totalItems(){return this.items.length}get cartTotal(){return this.items.reduce((t,s)=>t+s.unitPrice*s.quantity,0)}formatCurrency(t){return(r=>`\u20a3${r.toLocaleString("fr-FR")}`)(t)}formatUnitPrice(t,s){return((r,u)=>`\u20a3${r}/${u}`)(t,s)}formatCartCount(t){return(r=>`(${r} article${r>1?"s":""})`)(t)}getItemTotal(t){return t.unitPrice*t.quantity}onClose(){this.close.emit()}onContinueShopping(){this.continueShopping.emit(),this.close.emit()}onCheckout(){this.checkout.emit()}incrementQuantity(t){this.updateQuantity.emit({itemId:t.id,quantity:t.quantity+1})}decrementQuantity(t){t.quantity>1&&this.updateQuantity.emit({itemId:t.id,quantity:t.quantity-1})}onRemoveItem(t){this.removeItem.emit(t)}static{this.\u0275fac=function(s){return new(s||r)}}static{this.\u0275cmp=e.VBU({type:r,selectors:[["app-cart-popup"]],inputs:{items:"items",isOpen:"isOpen"},outputs:{close:"close",continueShopping:"continueShopping",checkout:"checkout",updateQuantity:"updateQuantity",removeItem:"removeItem"},standalone:!0,features:[e.aNF],decls:2,vars:2,consts:[["class","fixed inset-0 bg-black bg-opacity-50 z-50",3,"click",4,"ngIf"],["class","fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-white rounded-lg shadow-2xl z-50 w-full max-w-2xl max-h-[90vh] flex flex-col",3,"click",4,"ngIf"],[1,"fixed","inset-0","bg-black","bg-opacity-50","z-50",3,"click"],[1,"fixed","top-1/2","left-1/2","transform","-translate-x-1/2","-translate-y-1/2","bg-white","rounded-lg","shadow-2xl","z-50","w-full","max-w-2xl","max-h-[90vh]","flex","flex-col",3,"click"],[1,"flex","items-center","justify-between","px-6","py-4","border-b","border-gray-200"],[1,"flex","items-center","gap-3"],["src","/icons/cart-icon.svg","alt","Cart",1,"w-5","h-5"],[1,"text-gray-900","text-xl","font-bold"],[1,"hover:opacity-70","transition-opacity",3,"click"],["src","/icons/close-icon.svg","alt","Close",1,"w-3","h-3"],[1,"flex-1","overflow-y-auto","px-6","py-4"],[1,"space-y-4"],["class","flex items-center gap-4 p-4 border border-gray-200 rounded-lg",4,"ngFor","ngForOf"],[1,"border-t","border-gray-200","px-6","py-4"],[1,"flex","items-center","justify-between","mb-4"],[1,"text-gray-900","text-lg","font-medium"],[1,"text-senteranga-green","text-2xl","font-bold"],[1,"flex","items-center","gap-4"],[1,"flex-1","px-6","py-3","border-2","border-senteranga-green","text-senteranga-green","text-base","font-medium","rounded-lg","hover:bg-senteranga-green","hover:text-white","transition-colors",3,"click"],[1,"flex-1","px-6","py-3","bg-senteranga-green","text-white","text-base","font-medium","rounded-lg","hover:bg-senteranga-green-dark","transition-colors",3,"click"],[1,"flex","items-center","gap-4","p-4","border","border-gray-200","rounded-lg"],[1,"w-16","h-16","rounded-lg","object-cover","flex-shrink-0",3,"src","alt"],[1,"flex-1","min-w-0"],[1,"text-gray-900","text-base","font-medium","truncate"],[1,"text-gray-600","text-sm"],[1,"text-senteranga-green","text-sm","font-medium"],[1,"flex","items-center","gap-3","flex-shrink-0"],[1,"hover:opacity-70","transition-opacity",3,"click","disabled"],["src","/icons/minus-icon.svg","alt","Decrease",1,"w-2","h-0.5"],[1,"text-black","text-base","font-medium","min-w-[2rem]","text-center"],["src","/icons/plus-icon.svg","alt","Increase",1,"w-2","h-2"],[1,"flex","flex-col","items-end","gap-1","flex-shrink-0"],[1,"text-gray-900","text-base","font-bold"],[1,"text-red-500","text-sm","font-normal","hover:text-red-600","transition-colors",3,"click"]],template:function(s,i){1&s&&e.DNE(0,I,1,0,"div",0)(1,c,22,3,"div",1),2&s&&(e.Y8G("ngIf",i.isOpen),e.R7$(),e.Y8G("ngIf",i.isOpen))},dependencies:[h.MD,h.Sq,h.bT],encapsulation:2})}}return r})();var a=l(8359),d=l(8490),_=l(6868);function p(r,u){if(1&r&&(e.j41(0,"span",28),e.EFF(1),e.k0s()),2&r){const t=e.XpG();e.R7$(),e.JRh(t.unreadCount)}}function m(r,u){1&r&&(e.j41(0,"div",33),e.EFF(1,"Aucune notification"),e.k0s())}function U(r,u){if(1&r&&(e.j41(0,"li",34)(1,"div",35),e.EFF(2),e.k0s(),e.j41(3,"div",36),e.EFF(4),e.k0s()()),2&r){const t=u.$implicit;e.R7$(2),e.JRh(t.title),e.R7$(2),e.JRh(t.message)}}function x(r,u){if(1&r&&(e.j41(0,"div",29)(1,"h4",30),e.EFF(2,"Notifications"),e.k0s(),e.DNE(3,m,2,0,"div",31),e.j41(4,"ul"),e.DNE(5,U,5,2,"li",32),e.k0s()()),2&r){const t=e.XpG();e.R7$(3),e.Y8G("ngIf",0===t.notifications.length),e.R7$(2),e.Y8G("ngForOf",t.notifications)}}function F(r,u){1&r&&(e.qex(0),e.j41(1,"a",37),e.EFF(2," Connexion "),e.k0s(),e.j41(3,"a",38),e.EFF(4," S'inscrire "),e.k0s(),e.bVm())}function T(r,u){if(1&r&&e.nrm(0,"div",65),2&r){const t=e.XpG(2);e.Y8G("ngClass",null!=t.currentUser&&t.currentUser.isValidated?"bg-green-500":"bg-yellow-500")}}function $(r,u){if(1&r&&(e.j41(0,"span",66),e.EFF(1),e.k0s()),2&r){const t=e.XpG(2);e.Y8G("ngClass",null!=t.currentUser&&t.currentUser.isValidated?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"),e.R7$(),e.SpI(" ",null!=t.currentUser&&t.currentUser.isValidated?"Valid\xe9":"En attente"," ")}}function w(r,u){if(1&r&&(e.j41(0,"div",67)(1,"span",68),e.qSk(),e.j41(2,"svg",69),e.nrm(3,"path",70),e.k0s(),e.EFF(4),e.k0s()()),2&r){const t=e.XpG(2);e.R7$(),e.Y8G("ngClass",null!=t.currentUser&&t.currentUser.isValidated?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"),e.R7$(3),e.SpI(" ",null!=t.currentUser&&t.currentUser.isValidated?"Compte valid\xe9":"Validation en cours"," ")}}function R(r,u){1&r&&(e.qex(0),e.j41(1,"a",71),e.qSk(),e.j41(2,"svg",59),e.nrm(3,"path",49)(4,"path",50),e.k0s(),e.EFF(5," Mes annonces "),e.k0s(),e.bVm())}function M(r,u){1&r&&(e.qex(0),e.j41(1,"a",72),e.qSk(),e.j41(2,"svg",59),e.nrm(3,"path",73)(4,"path",74),e.k0s(),e.EFF(5," Administration "),e.k0s(),e.bVm())}function S(r,u){if(1&r){const t=e.RV6();e.j41(0,"div",39)(1,"div",16)(2,"div",40),e.EFF(3),e.k0s(),e.DNE(4,T,1,1,"div",41),e.k0s(),e.j41(5,"div",42)(6,"div",43),e.EFF(7," Bonjour, "),e.j41(8,"span",44),e.EFF(9),e.k0s()(),e.j41(10,"div",45)(11,"span"),e.EFF(12),e.k0s(),e.DNE(13,$,2,2,"span",46),e.k0s()(),e.j41(14,"div",16)(15,"button",47),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.goToDashboard())}),e.qSk(),e.j41(16,"svg",48),e.nrm(17,"path",49)(18,"path",50),e.k0s(),e.EFF(19," Mon espace \u25bc "),e.k0s(),e.joV(),e.j41(20,"div",51)(21,"div",52)(22,"div",53)(23,"div",40),e.EFF(24),e.k0s(),e.j41(25,"div")(26,"div",54),e.EFF(27),e.k0s(),e.j41(28,"div",55),e.EFF(29),e.k0s()()(),e.DNE(30,w,5,2,"div",56),e.k0s(),e.j41(31,"div",57)(32,"a",58),e.qSk(),e.j41(33,"svg",59),e.nrm(34,"path",60),e.k0s(),e.EFF(35," Mes r\xe9servations "),e.k0s(),e.DNE(36,R,6,0,"ng-container",61)(37,M,6,0,"ng-container",61),e.k0s(),e.joV(),e.nrm(38,"div",62),e.j41(39,"button",63),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.logout())}),e.qSk(),e.j41(40,"svg",59),e.nrm(41,"path",64),e.k0s(),e.EFF(42," D\xe9connexion "),e.k0s()()()()}if(2&r){const t=e.XpG();e.R7$(3),e.SpI(" ",t.userInitials," "),e.R7$(),e.Y8G("ngIf","agriculteur"===(null==t.currentUser?null:t.currentUser.userType)),e.R7$(5),e.JRh(t.userDisplayName),e.R7$(3),e.JRh(t.userRoleLabel),e.R7$(),e.Y8G("ngIf","agriculteur"===(null==t.currentUser?null:t.currentUser.userType)),e.R7$(11),e.SpI(" ",t.userInitials," "),e.R7$(3),e.JRh(t.userDisplayName),e.R7$(2),e.JRh(t.userRoleLabel),e.R7$(),e.Y8G("ngIf","agriculteur"===(null==t.currentUser?null:t.currentUser.userType)),e.R7$(6),e.Y8G("ngIf","agriculteur"===(null==t.currentUser?null:t.currentUser.userType)),e.R7$(),e.Y8G("ngIf","admin"===(null==t.currentUser?null:t.currentUser.userType))}}function N(r,u){1&r&&(e.qSk(),e.nrm(0,"path",75))}function P(r,u){1&r&&(e.qSk(),e.nrm(0,"path",76))}function V(r,u){if(1&r){const t=e.RV6();e.j41(0,"div",77),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.closeMobileMenu())}),e.k0s()}}function B(r,u){if(1&r){const t=e.RV6();e.qex(0),e.j41(1,"a",88),e.bIt("click",function(){e.eBV(t);const i=e.XpG(2);return e.Njj(i.closeMobileMenu())}),e.EFF(2," Connexion "),e.k0s(),e.j41(3,"a",89),e.bIt("click",function(){e.eBV(t);const i=e.XpG(2);return e.Njj(i.closeMobileMenu())}),e.EFF(4," S'inscrire "),e.k0s(),e.bVm()}}function O(r,u){if(1&r){const t=e.RV6();e.j41(0,"button",90),e.bIt("click",function(){e.eBV(t);const i=e.XpG(2);return i.goToDashboard(),e.Njj(i.closeMobileMenu())}),e.EFF(1,"Mon espace"),e.k0s(),e.j41(2,"button",91),e.bIt("click",function(){e.eBV(t);const i=e.XpG(2);return i.logout(),e.Njj(i.closeMobileMenu())}),e.EFF(3,"D\xe9connexion"),e.k0s()}}function G(r,u){if(1&r){const t=e.RV6();e.j41(0,"div",78)(1,"div",79)(2,"nav",80)(3,"a",81),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.closeMobileMenu())}),e.EFF(4," Accueil "),e.k0s(),e.j41(5,"a",82),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.closeMobileMenu())}),e.EFF(6," March\xe9s "),e.k0s(),e.j41(7,"a",83),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.closeMobileMenu())}),e.EFF(8," A propos "),e.k0s(),e.j41(9,"a",83),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.closeMobileMenu())}),e.EFF(10," Forum "),e.k0s()(),e.j41(11,"div",84)(12,"div",85)(13,"span",86),e.EFF(14,"Panier"),e.k0s(),e.j41(15,"div",12),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.toggleCart())}),e.qSk(),e.j41(16,"svg",13),e.nrm(17,"path",14),e.k0s(),e.joV(),e.j41(18,"span",15),e.EFF(19),e.k0s()()()(),e.j41(20,"div",87),e.DNE(21,B,5,0,"ng-container",20)(22,O,4,0,"ng-template",null,1,e.C5r),e.k0s()()()}if(2&r){const t=e.sdS(23),s=e.XpG();e.R7$(19),e.JRh(s.cartItemCount),e.R7$(2),e.Y8G("ngIf",!s.isLoggedIn())("ngIfElse",t)}}let H=(()=>{class r{get cartItemCount(){return this.cartService.getCartItemCount()}get unreadCount(){return this.notifications?this.notifications.filter(t=>!t.read).length:0}constructor(t,s,i){this.router=t,this.dataService=s,this.cartService=i,this.isCartOpen=!1,this.isMobileMenuOpen=!1,this.cartItems=[],this.cartSubscription=new a.yU,this.currentUser=null,this.notifications=[],this.showNotifications=!1}ngOnInit(){this.loadCurrentUser(),window.addEventListener("storage",t=>{"currentUser"===t.key&&this.loadCurrentUser()}),this.loadNotifications(),this.cartSubscription=this.cartService.getCart().subscribe(t=>{this.cartItems=t})}ngOnDestroy(){this.cartSubscription&&this.cartSubscription.unsubscribe()}loadCurrentUser(){try{const t=localStorage.getItem("currentUser");this.currentUser=t?JSON.parse(t):null}catch{this.currentUser=null}this.loadNotifications()}loadNotifications(){this.currentUser&&this.currentUser.id?this.dataService.getNotificationsForUser(this.currentUser.id).subscribe({next:t=>{this.notifications=t||[]},error:t=>{console.error("Error loading notifications",t),this.notifications=[]}}):this.notifications=[]}isLoggedIn(){return!!this.currentUser}get userDisplayName(){return this.currentUser?`${this.currentUser.firstName||""} ${this.currentUser.lastName||""}`.trim():""}get userInitials(){if(!this.currentUser)return"";const s=this.currentUser.lastName||"";return`${(this.currentUser.firstName||"").charAt(0)}${s.charAt(0)}`.toUpperCase()}get userRoleLabel(){return this.currentUser?{agriculteur:"Agriculteur",client:"Client",admin:"Administrateur",investisseur:"Investisseur",agronome:"Agronome","agent-terrain":"Agent Terrain",etat:"Institution"}[this.currentUser.userType]||this.currentUser.userType:""}goToDashboard(){this.router.navigate(this.currentUser?[{agriculteur:"/dashboard-agriculteur",client:"/dashboard-institutionnel",admin:"/dashboard-admin",investisseur:"/dashboard-institutionnel",agronome:"/dashboard-institutionnel","agent-terrain":"/dashboard-institutionnel",etat:"/dashboard-institutionnel"}[this.currentUser.userType]||"/"]:["/connexion"])}logout(){localStorage.removeItem("currentUser"),this.currentUser=null,this.router.navigate(["/"])}toggleCart(){this.isCartOpen=!this.isCartOpen}toggleNotifications(){this.showNotifications=!this.showNotifications,this.showNotifications&&this.notifications.length&&(this.notifications.filter(s=>!s.read).slice(0,10).forEach(s=>this.dataService.markNotificationRead(s.id).subscribe()),setTimeout(()=>this.loadNotifications(),300))}closeCart(){this.isCartOpen=!1}toggleMobileMenu(){this.isMobileMenuOpen=!this.isMobileMenuOpen}closeMobileMenu(){this.isMobileMenuOpen=!1}onContinueShopping(){this.closeCart()}onCheckout(){console.log("Proceeding to checkout..."),this.closeCart()}onUpdateQuantity(t){this.cartService.updateQuantity(t.itemId,t.quantity)}onRemoveItem(t){this.cartService.removeFromCart(t)}static{this.\u0275fac=function(s){return new(s||r)(e.rXU(b.Ix),e.rXU(d.u),e.rXU(_.m))}}static{this.\u0275cmp=e.VBU({type:r,selectors:[["app-header"]],standalone:!0,features:[e.aNF],decls:37,vars:11,consts:[["userMenu",""],["mobileUserMenu",""],[1,"fixed","top-0","left-0","right-0","bg-white","py-3","px-4","md:px-8","shadow-sm","z-50"],[1,"max-w-7xl","mx-auto","flex","items-center","justify-between"],["routerLink","/",1,"flex","items-center","gap-2","cursor-pointer"],["src","/images/logo-senteranga.png","alt","SenTeranga Logo",1,"h-8","md:h-12","w-auto"],[1,"text-senteranga-green","text-lg","md:text-2xl","font-bold","hidden","sm:block"],[1,"hidden","lg:flex","items-center","gap-8"],["routerLink","/",1,"text-black","text-base","hover:text-senteranga-green","transition-colors"],["routerLink","/marche-agricole",1,"text-black","text-base","hover:text-senteranga-green","transition-colors"],["href","#",1,"text-black","text-base","hover:text-senteranga-green","transition-colors"],[1,"hidden","lg:flex","items-center","gap-3"],[1,"relative","cursor-pointer",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6","text-senteranga-green"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"],[1,"absolute","-top-1","-right-1","bg-senteranga-green","text-white","text-xs","font-medium","rounded-full","w-4","h-4","flex","items-center","justify-center"],[1,"relative"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6 6 0 10-12 0v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"],["class","absolute -top-1 -right-1 bg-red-600 text-white text-xs font-medium rounded-full w-4 h-4 flex items-center justify-center",4,"ngIf"],["class","absolute right-0 mt-2 bg-white border rounded shadow-lg w-80 z-50 p-3",4,"ngIf"],[4,"ngIf","ngIfElse"],[1,"lg:hidden","p-2","rounded-md","text-gray-600","hover:text-gray-900","hover:bg-gray-100","focus:outline-none","focus:ring-2","focus:ring-inset","focus:ring-senteranga-green",3,"click"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-6","w-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 6h16M4 12h16M4 18h16",4,"ngIf"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12",4,"ngIf"],["class","lg:hidden fixed inset-0 top-16 bg-black bg-opacity-50 z-40",3,"click",4,"ngIf"],["class","lg:hidden absolute top-full left-0 right-0 bg-white shadow-lg border-t border-gray-200 z-50 transform transition-all duration-300 ease-in-out",4,"ngIf"],[3,"close","continueShopping","checkout","updateQuantity","removeItem","isOpen","items"],[1,"absolute","-top-1","-right-1","bg-red-600","text-white","text-xs","font-medium","rounded-full","w-4","h-4","flex","items-center","justify-center"],[1,"absolute","right-0","mt-2","bg-white","border","rounded","shadow-lg","w-80","z-50","p-3"],[1,"font-semibold","mb-2"],["class","text-sm text-gray-600",4,"ngIf"],["class","py-2 border-b last:border-b-0",4,"ngFor","ngForOf"],[1,"text-sm","text-gray-600"],[1,"py-2","border-b","last:border-b-0"],[1,"text-sm","font-medium"],[1,"text-xs","text-gray-600"],["routerLink","/connexion",1,"px-4","py-2","text-senteranga-green","text-sm","font-medium","hover:bg-gray-50","rounded","transition-colors","inline-block","text-center"],["routerLink","/inscription",1,"px-4","py-2","bg-senteranga-green","text-white","text-sm","font-medium","rounded","hover:bg-senteranga-green-dark","transition-colors","inline-block","text-center"],[1,"flex","items-center","gap-3"],[1,"w-8","h-8","bg-senteranga-green","rounded-full","flex","items-center","justify-center","text-white","font-bold","text-sm"],["class","absolute -bottom-1 -right-1 w-3 h-3 rounded-full border-2 border-white",3,"ngClass",4,"ngIf"],[1,"hidden","md:block"],[1,"text-sm","text-gray-700"],[1,"font-semibold"],[1,"text-xs","text-gray-500","flex","items-center","gap-1"],["class","px-1.5 py-0.5 rounded text-xs font-medium",3,"ngClass",4,"ngIf"],[1,"px-3","py-2","bg-white","border","border-gray-200","rounded","text-sm","hover:bg-gray-50","flex","items-center","gap-1",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2H5a2 2 0 00-2-2z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8 5a2 2 0 012-2h4a2 2 0 012 2v2H8V5z"],[1,"absolute","right-0","mt-1","bg-white","border","border-gray-200","rounded","shadow-lg","w-56","z-50"],[1,"px-4","py-3","border-b","border-gray-100"],[1,"flex","items-center","gap-2"],[1,"text-sm","font-medium","text-gray-900"],[1,"text-xs","text-gray-500"],["class","mt-2",4,"ngIf"],[1,"py-1"],["routerLink","/dashboard-reservations",1,"block","px-4","py-2","text-sm","text-gray-700","hover:bg-gray-50"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","inline","mr-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"],[4,"ngIf"],[1,"border-t","border-gray-100"],[1,"block","w-full","text-left","px-4","py-2","text-sm","text-red-600","hover:bg-gray-50",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"],[1,"absolute","-bottom-1","-right-1","w-3","h-3","rounded-full","border-2","border-white",3,"ngClass"],[1,"px-1.5","py-0.5","rounded","text-xs","font-medium",3,"ngClass"],[1,"mt-2"],[1,"inline-flex","items-center","px-2","py-1","rounded-full","text-xs","font-medium",3,"ngClass"],["fill","currentColor","viewBox","0 0 20 20",1,"w-3","h-3","mr-1"],["fill-rule","evenodd","d","M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule","evenodd"],["routerLink","/dashboard-agriculteur",1,"block","px-4","py-2","text-sm","text-gray-700","hover:bg-gray-50"],["routerLink","/dashboard-admin",1,"block","px-4","py-2","text-sm","text-gray-700","hover:bg-gray-50"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 12a3 3 0 11-6 0 3 3 0 016 0z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 6h16M4 12h16M4 18h16"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"lg:hidden","fixed","inset-0","top-16","bg-black","bg-opacity-50","z-40",3,"click"],[1,"lg:hidden","absolute","top-full","left-0","right-0","bg-white","shadow-lg","border-t","border-gray-200","z-50","transform","transition-all","duration-300","ease-in-out"],[1,"px-4","py-6","space-y-4"],[1,"space-y-2"],["routerLink","/",1,"block","px-3","py-2","text-base","font-medium","text-gray-900","hover:text-senteranga-green","hover:bg-gray-50","rounded-md","transition-colors",3,"click"],["routerLink","/marche-agricole",1,"block","px-3","py-2","text-base","font-medium","text-gray-900","hover:text-senteranga-green","hover:bg-gray-50","rounded-md","transition-colors",3,"click"],["href","#",1,"block","px-3","py-2","text-base","font-medium","text-gray-900","hover:text-senteranga-green","hover:bg-gray-50","rounded-md","transition-colors",3,"click"],[1,"border-t","border-gray-200","pt-4"],[1,"flex","items-center","justify-between","px-3","py-2"],[1,"text-base","font-medium","text-gray-900"],[1,"border-t","border-gray-200","pt-4","space-y-3"],["routerLink","/connexion",1,"block","w-full","px-4","py-3","text-center","text-senteranga-green","text-base","font-medium","border","border-senteranga-green","rounded-md","hover:bg-senteranga-green","hover:text-white","transition-colors",3,"click"],["routerLink","/inscription",1,"block","w-full","px-4","py-3","text-center","bg-senteranga-green","text-white","text-base","font-medium","rounded-md","hover:bg-senteranga-green-dark","transition-colors",3,"click"],[1,"block","w-full","px-4","py-3","text-center","bg-white","border","rounded-md",3,"click"],[1,"block","w-full","px-4","py-3","text-center","bg-red-500","text-white","rounded-md",3,"click"]],template:function(s,i){if(1&s){const g=e.RV6();e.j41(0,"header",2)(1,"div",3)(2,"a",4),e.nrm(3,"img",5),e.j41(4,"span",6),e.EFF(5,"Portail SenTeranga"),e.k0s()(),e.j41(6,"nav",7)(7,"a",8),e.EFF(8,"Accueil"),e.k0s(),e.j41(9,"a",9),e.EFF(10,"March\xe9s"),e.k0s(),e.j41(11,"a",10),e.EFF(12,"A propos"),e.k0s(),e.j41(13,"a",10),e.EFF(14,"Forum"),e.k0s()(),e.j41(15,"div",11)(16,"div",12),e.bIt("click",function(){return e.eBV(g),e.Njj(i.toggleCart())}),e.qSk(),e.j41(17,"svg",13),e.nrm(18,"path",14),e.k0s(),e.joV(),e.j41(19,"span",15),e.EFF(20),e.k0s()(),e.j41(21,"div",16)(22,"div",12),e.bIt("click",function(){return e.eBV(g),e.Njj(i.toggleNotifications())}),e.qSk(),e.j41(23,"svg",13),e.nrm(24,"path",17),e.k0s(),e.DNE(25,p,2,1,"span",18),e.k0s(),e.DNE(26,x,6,2,"div",19),e.k0s(),e.DNE(27,F,5,0,"ng-container",20)(28,S,43,11,"ng-template",null,0,e.C5r),e.k0s(),e.joV(),e.j41(30,"button",21),e.bIt("click",function(){return e.eBV(g),e.Njj(i.toggleMobileMenu())}),e.qSk(),e.j41(31,"svg",22),e.DNE(32,N,1,0,"path",23)(33,P,1,0,"path",24),e.k0s()()(),e.DNE(34,V,1,0,"div",25)(35,G,24,3,"div",26),e.k0s(),e.joV(),e.j41(36,"app-cart-popup",27),e.bIt("close",function(){return e.eBV(g),e.Njj(i.closeCart())})("continueShopping",function(){return e.eBV(g),e.Njj(i.onContinueShopping())})("checkout",function(){return e.eBV(g),e.Njj(i.onCheckout())})("updateQuantity",function(E){return e.eBV(g),e.Njj(i.onUpdateQuantity(E))})("removeItem",function(E){return e.eBV(g),e.Njj(i.onRemoveItem(E))}),e.k0s()}if(2&s){const g=e.sdS(29);e.R7$(20),e.JRh(i.cartItemCount),e.R7$(5),e.Y8G("ngIf",null==i.notifications?null:i.notifications.length),e.R7$(),e.Y8G("ngIf",i.showNotifications),e.R7$(),e.Y8G("ngIf",!i.isLoggedIn())("ngIfElse",g),e.R7$(5),e.Y8G("ngIf",!i.isMobileMenuOpen),e.R7$(),e.Y8G("ngIf",i.isMobileMenuOpen),e.R7$(),e.Y8G("ngIf",i.isMobileMenuOpen),e.R7$(),e.Y8G("ngIf",i.isMobileMenuOpen),e.R7$(),e.Y8G("isOpen",i.isCartOpen)("items",i.cartItems)}},dependencies:[h.MD,h.YU,h.Sq,h.bT,b.iI,b.Wk,n],encapsulation:2})}}return r})()},6868:(j,v,l)=>{l.d(v,{m:()=>y});var h=l(4412),b=l(5312),e=l(4438),C=l(1626);let y=(()=>{class f{constructor(o){this.http=o,this.CART_STORAGE_KEY="senteranga_cart",this.cartSubject=new h.t([]),this.cart$=this.cartSubject.asObservable(),this.apiUrl=b.c.apiUrl,this.loadCartFromStorage()}loadCartFromStorage(){try{const o=localStorage.getItem(this.CART_STORAGE_KEY);if(o){const c=JSON.parse(o);this.cartSubject.next(c)}}catch(o){console.error("Error loading cart from storage:",o),this.cartSubject.next([])}}saveCartToStorage(o){try{localStorage.setItem(this.CART_STORAGE_KEY,JSON.stringify(o))}catch(c){console.error("Error saving cart to storage:",c)}}getCartItems(){return this.cartSubject.value}getCart(){return this.cart$}getCartState(){const o=this.getCartItems(),c=o.reduce((n,a)=>n+a.unitPrice*a.quantity,0);return{items:o,total:c}}getCartItemCount(){return this.getCartItems().reduce((o,c)=>o+c.quantity,0)}addToCart(o,c=1){const n=this.getCartItems(),a=n.findIndex(d=>d.id===o.id);if(a>-1)n[a].quantity+=c;else{const d={id:o.id,name:o.titre||o.name,producer:this.getProducerName(o),unitPrice:o.prixParUnite||o.prix||0,unit:o.unite||"unit\xe9",quantity:c,imageUrl:this.getProductImage(o)};n.push(d)}this.cartSubject.next([...n]),this.saveCartToStorage(n)}removeFromCart(o){const c=this.getCartItems().filter(n=>n.id!==o);this.cartSubject.next(c),this.saveCartToStorage(c)}updateQuantity(o,c){if(c<=0)return void this.removeFromCart(o);const n=this.getCartItems(),a=n.findIndex(d=>d.id===o);a>-1&&(n[a].quantity=c,this.cartSubject.next([...n]),this.saveCartToStorage(n))}clearCart(){this.cartSubject.next([]),this.saveCartToStorage([])}getProducerName(o){return o.agriculteurId?o.agriculteurId:o.producer||"Producteur inconnu"}getProductImage(o){return o.images&&o.images.length>0?o.images[0]:o.imageUrl||o.image||"/images/placeholder.png"}createReservation(o,c,n=1){const a={id:`reservation-${Date.now()}`,productId:o.id,productTitle:o.name||o.titre,clientId:c.id,clientName:`${c.firstName} ${c.lastName}`,clientEmail:c.email,clientPhone:c.phone,agriculteurId:o.producer?.id||o.agriculteurId,quantity:n,reservationDate:new Date,status:"active"};return this.http.post(`${this.apiUrl}/reservations`,a)}getReservationsForFarmer(o){return this.http.get(`${this.apiUrl}/reservations?agriculteurId=${o}&_sort=reservationDate&_order=asc`)}getReservationsForClient(o){return this.http.get(`${this.apiUrl}/reservations?clientId=${o}&_sort=reservationDate&_order=desc`)}updateReservationStatus(o,c){return this.http.patch(`${this.apiUrl}/reservations/${o}`,{status:c})}deleteReservation(o){return this.http.delete(`${this.apiUrl}/reservations/${o}`)}static{this.\u0275fac=function(c){return new(c||f)(e.KVO(C.Qq))}}static{this.\u0275prov=e.jDH({token:f,factory:f.\u0275fac,providedIn:"root"})}}return f})()},8490:(j,v,l)=>{l.d(v,{u:()=>I});var h=l(5312),b=l(7673),e=l(6354),C=l(9437),y=l(4438),f=l(1626);let I=(()=>{class o{constructor(n){this.http=n,this.apiUrl=h.c.apiUrl}getRegions(){return this.http.get(`${this.apiUrl}/regions`)}updateUser(n){return this.http.put(`${this.apiUrl}/users/${n.id}`,n)}createNotification(n){return this.http.post(`${this.apiUrl}/notifications`,n)}getUserTypes(){return this.http.get(`${this.apiUrl}/userTypes`)}getClientTypes(){return this.http.get(`${this.apiUrl}/clientTypes`)}getInvestorTypes(){return this.http.get(`${this.apiUrl}/investorTypes`)}getMinistries(){return this.http.get(`${this.apiUrl}/ministries`)}getStructures(){return this.http.get(`${this.apiUrl}/structures`)}getCertifications(){return this.http.get(`${this.apiUrl}/certifications`)}getTestUsers(){return this.http.get(`${this.apiUrl}/users`)}authenticateUser(n,a){const d=n.replace(/^(\+221|221)/,""),_=this.getRegisteredUsersFromStorage();return this.getTestUsers().pipe((0,e.T)(p=>p.find(x=>(x.phone||"").toString().replace(/^(\+221|221)/,"")===d&&x.password===a)||_.find(x=>(x.phone||"").toString().replace(/^(\+221|221)/,"")===d&&x.password===a)||null))}registerUser(n){const a=n.telephone.replace(/^(\+221|221)/,"");return this.getTestUsers().pipe((0,e.T)(d=>{if(d.find(m=>m.phone.replace(/^(\+221|221)/,"")===a))return{success:!1,error:"Un compte avec ce num\xe9ro de t\xe9l\xe9phone existe d\xe9j\xe0"};const p={id:`user-${Date.now()}`,email:n.email||"",password:n.password,userType:n.userType.id,firstName:n.prenom,lastName:n.nom,phone:n.telephone,region:n.region||void 0,department:n.departement||n.department||void 0,village:n.village||void 0,clientType:n.clientType||void 0,investorType:n.investorType||void 0,investmentAmount:n.montantInvestissement||void 0,professionalEmail:n.emailPro||void 0,structure:n.structure||void 0,interventionRegions:n.regionsIntervention||void 0,governmentId:n.governmentId||void 0,ministry:n.ministry||void 0,agentCode:n.agentCode||void 0,adminCode:n.adminCode||void 0,isValidated:!1,validationStatus:"pending",bankAccount:void 0};return this.http.post(`${this.apiUrl}/users`,p).subscribe({next:m=>{console.log("User registered successfully:",m)},error:m=>{console.error("Error saving user:",m)}}),{success:!0,user:p}}))}getRegisteredUsersFromStorage(){const n=localStorage.getItem("registeredUsers");return n?JSON.parse(n):[]}getDepartementsByRegion(n){return this.getRegions().pipe((0,e.T)(a=>{const d=a.find(_=>_.id===n);return d?d.departements:[]}))}createAnnouncement(n){return this.http.post(`${this.apiUrl}/announcements`,n)}getAnnouncementsByUser(n){return this.http.get(`${this.apiUrl}/announcements?userId=${n}`)}getNotificationsForUser(n){return this.http.get(`${this.apiUrl}/notifications?userId=${n}&_sort=createdAt&_order=desc`)}markNotificationRead(n){return this.http.patch(`${this.apiUrl}/notifications/${n}`,{read:!0})}updateUserBankAccount(n,a){return this.http.patch(`${this.apiUrl}/users/${n}`,{bankAccount:a})}getSeedsCatalog(){return this.http.get(`${this.apiUrl}/seeds`).pipe((0,C.W)(n=>(console.warn("seeds endpoint missing or error",n),(0,b.of)([]))))}createSeedOrder(n){return this.http.post(`${this.apiUrl}/seedOrders`,n)}getAlertsByRegion(n){return this.http.get(`${this.apiUrl}/agronomeAlerts?region=${n}`)}createProduct(n){return this.http.post(`${this.apiUrl}/products`,n)}getProductsByUser(n){return this.http.get(`${this.apiUrl}/products?agriculteurId=${n}`)}getProductsByCategory(n){return this.http.get(`${this.apiUrl}/products?categorie=${n}`)}getProductById(n){return this.http.get(`${this.apiUrl}/products/${n}`)}updateProduct(n){return this.http.put(`${this.apiUrl}/products/${n.id}`,n)}updateProductStatus(n,a,d){const _={statutValidation:a,dateMaj:(new Date).toISOString()};return d&&(_.statutDisponibilite=d),this.http.patch(`${this.apiUrl}/products/${n}`,_)}deleteProduct(n){return this.http.delete(`${this.apiUrl}/products/${n}`)}getAllProducts(){return this.http.get(`${this.apiUrl}/products`)}validateUserRegistration(n,a){return this.getUserTypes().pipe((0,e.T)(d=>{const _=d.find(m=>m.id===n);if(!_)return{valid:!1,errors:["Type d'utilisateur invalide"]};const p=[];return _.requiredFields.forEach(m=>{a[m]||p.push(`Le champ ${m} est requis`)}),"agriculteur"===n&&(a.region||p.push("La r\xe9gion est requise"),a.departement||p.push("Le d\xe9partement est requis"),a.village||p.push("Le village est requis")),"client"===n&&(a.clientType||p.push("Le type de client est requis")),"investisseur"===n&&((!a.email||!this.isValidEmail(a.email))&&p.push("Email invalide"),a.investorType||p.push("Le type d'investisseur est requis"),(!a.montantInvestissement||a.montantInvestissement<1e5)&&p.push("Montant minimum: 100 000 FCFA")),"agronome"===n&&((!a.emailPro||!this.isValidEmail(a.emailPro))&&p.push("Email professionnel invalide"),a.structure||p.push("La structure est requise"),(!a.regionsIntervention||0===a.regionsIntervention.length)&&p.push("Au moins une r\xe9gion d'intervention requise")),{valid:0===p.length,errors:p}}))}isValidEmail(n){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n)}static{this.\u0275fac=function(a){return new(a||o)(y.KVO(f.Qq))}}static{this.\u0275prov=y.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})()},5312:(j,v,l)=>{l.d(v,{c:()=>h});const h={production:!1,apiUrl:"https://json-server-senteranga.onrender.com/api"}}}]);