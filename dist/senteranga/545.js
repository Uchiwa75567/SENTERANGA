"use strict";(self.webpackChunksenteranga=self.webpackChunksenteranga||[]).push([[545],{5473:(I,b,u)=>{u.d(b,{n:()=>e});var _=u(177),o=u(4438);let e=(()=>{class x{static{this.\u0275fac=function(k){return new(k||x)}}static{this.\u0275cmp=o.VBU({type:x,selectors:[["app-footer"]],standalone:!0,features:[o.aNF],decls:45,vars:0,consts:[[1,"bg-senteranga-green","text-white","py-8","sm:py-12","md:py-16","px-4","sm:px-6","md:px-8"],[1,"max-w-7xl","mx-auto"],[1,"grid","grid-cols-1","sm:grid-cols-2","lg:grid-cols-3","gap-8","sm:gap-10","md:gap-12","mb-8","sm:mb-10","md:mb-12"],[1,"sm:col-span-2","lg:col-span-1"],[1,"flex","items-center","gap-2","sm:gap-3","mb-4"],["src","/images/logo-senteranga.png","alt","SenTeranga Logo",1,"h-12","sm:h-14","w-auto"],[1,"text-2xl","sm:text-3xl","font-bold"],[1,"text-sm","sm:text-base","text-green-100","leading-relaxed","mb-4","sm:mb-6"],["src","/icons/social-media.svg","alt","Social Media",1,"h-6","sm:h-8"],[1,"text-lg","sm:text-xl","font-bold","mb-4","sm:mb-6"],[1,"space-y-2","sm:space-y-3"],["href","#",1,"text-base","sm:text-lg","hover:text-green-100","transition-colors"],["href","#",1,"text-sm","sm:text-base","hover:text-green-100","transition-colors"],[1,"border-t","border-green-600","pt-6","sm:pt-8","flex","flex-col","sm:flex-row","justify-between","items-center","gap-3","sm:gap-4","text-center","sm:text-left"],[1,"text-xs","sm:text-sm","text-green-100"]],template:function(k,i){1&k&&(o.j41(0,"footer",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),o.nrm(5,"img",5),o.j41(6,"span",6),o.EFF(7,"SenTeranga"),o.k0s()(),o.j41(8,"p",7),o.EFF(9," L'interface institutionnelle et professionnelle du syst\xe8me alimentaire national s\xe9n\xe9galais. Autonomiser les agriculteurs, connecter les march\xe9s et construire un avenir durable. "),o.k0s(),o.nrm(10,"img",8),o.k0s(),o.j41(11,"div")(12,"h3",9),o.EFF(13,"March\xe9s Digital"),o.k0s(),o.j41(14,"ul",10)(15,"li")(16,"a",11),o.EFF(17,"March\xe9 Agricol"),o.k0s()(),o.j41(18,"li")(19,"a",11),o.EFF(20,"March\xe9 \xc9levage"),o.k0s()(),o.j41(21,"li")(22,"a",11),o.EFF(23,"March\xe9 P\xeache"),o.k0s()()()(),o.j41(24,"div")(25,"h3",9),o.EFF(26,"Support"),o.k0s(),o.j41(27,"ul",10)(28,"li")(29,"a",12),o.EFF(30,"Help Center"),o.k0s()(),o.j41(31,"li")(32,"a",12),o.EFF(33,"Contact Us"),o.k0s()(),o.j41(34,"li")(35,"a",12),o.EFF(36,"Privacy Policy"),o.k0s()(),o.j41(37,"li")(38,"a",12),o.EFF(39,"Terms of Service"),o.k0s()()()()(),o.j41(40,"div",13)(41,"p",14),o.EFF(42,"\xa9 2024 SENTERANGA. All rights reserved."),o.k0s(),o.j41(43,"p",14),o.EFF(44,"Powered by Readdy"),o.k0s()()()())},dependencies:[_.MD],encapsulation:2})}}return x})()},4121:(I,b,u)=>{u.d(b,{l:()=>N});var _=u(177),o=u(5776),e=u(4438);function k(s,g){if(1&s){const t=e.RV6();e.j41(0,"div",2),e.bIt("click",function(){e.eBV(t);const r=e.XpG();return e.Njj(r.onClose())}),e.k0s()}}function i(s,g){if(1&s){const t=e.RV6();e.j41(0,"div",20),e.nrm(1,"img",21),e.j41(2,"div",22)(3,"h3",23),e.EFF(4),e.k0s(),e.j41(5,"p",24),e.EFF(6),e.k0s(),e.j41(7,"p",25),e.EFF(8),e.k0s()(),e.j41(9,"div",26)(10,"button",27),e.bIt("click",function(){const r=e.eBV(t).$implicit,m=e.XpG(2);return e.Njj(m.decrementQuantity(r))}),e.nrm(11,"img",28),e.k0s(),e.j41(12,"span",29),e.EFF(13),e.k0s(),e.j41(14,"button",8),e.bIt("click",function(){const r=e.eBV(t).$implicit,m=e.XpG(2);return e.Njj(m.incrementQuantity(r))}),e.nrm(15,"img",30),e.k0s()(),e.j41(16,"div",31)(17,"span",32),e.EFF(18),e.k0s(),e.j41(19,"button",33),e.bIt("click",function(){const r=e.eBV(t).$implicit,m=e.XpG(2);return e.Njj(m.onRemoveItem(r.id))}),e.EFF(20," Supprimer "),e.k0s()()()}if(2&s){const t=g.$implicit,a=e.XpG(2);e.R7$(),e.Y8G("src",t.imageUrl,e.B4B)("alt",t.name),e.R7$(3),e.JRh(t.name),e.R7$(2),e.SpI("Par ",t.producer,""),e.R7$(2),e.SpI(" ",a.formatUnitPrice(t.unitPrice,t.unit)," "),e.R7$(2),e.AVh("opacity-50",t.quantity<=1),e.Y8G("disabled",t.quantity<=1),e.R7$(3),e.SpI(" ",t.quantity," "),e.R7$(5),e.SpI(" ",a.formatCurrency(a.getItemTotal(t))," ")}}function l(s,g){if(1&s){const t=e.RV6();e.j41(0,"div",3),e.bIt("click",function(r){return e.eBV(t),e.Njj(r.stopPropagation())}),e.j41(1,"div",4)(2,"div",5),e.nrm(3,"img",6),e.j41(4,"h2",7),e.EFF(5),e.k0s()(),e.j41(6,"button",8),e.bIt("click",function(){e.eBV(t);const r=e.XpG();return e.Njj(r.onClose())}),e.nrm(7,"img",9),e.k0s()(),e.j41(8,"div",10)(9,"div",11),e.DNE(10,i,21,10,"div",12),e.k0s()(),e.j41(11,"div",13)(12,"div",14)(13,"span",15),e.EFF(14,"Total:"),e.k0s(),e.j41(15,"span",16),e.EFF(16),e.k0s()(),e.j41(17,"div",17)(18,"button",18),e.bIt("click",function(){e.eBV(t);const r=e.XpG();return e.Njj(r.onContinueShopping())}),e.EFF(19," Continuer mes Achats "),e.k0s(),e.j41(20,"button",19),e.bIt("click",function(){e.eBV(t);const r=e.XpG();return e.Njj(r.onCheckout())}),e.EFF(21," Passer Commande "),e.k0s()()()()}if(2&s){const t=e.XpG();e.R7$(5),e.SpI(" Mon Panier ",t.formatCartCount(t.totalItems)," "),e.R7$(5),e.Y8G("ngForOf",t.items),e.R7$(6),e.SpI(" ",t.formatCurrency(t.cartTotal)," ")}}let n=(()=>{class s{constructor(){this.items=[],this.isOpen=!1,this.close=new e.bkB,this.continueShopping=new e.bkB,this.checkout=new e.bkB,this.updateQuantity=new e.bkB,this.removeItem=new e.bkB}get totalItems(){return this.items.length}get cartTotal(){return this.items.reduce((t,a)=>t+a.unitPrice*a.quantity,0)}formatCurrency(t){return(s=>`\u20a3${s.toLocaleString("fr-FR")}`)(t)}formatUnitPrice(t,a){return((s,g)=>`\u20a3${s}/${g}`)(t,a)}formatCartCount(t){return(s=>`(${s} article${s>1?"s":""})`)(t)}getItemTotal(t){return t.unitPrice*t.quantity}onClose(){this.close.emit()}onContinueShopping(){this.continueShopping.emit(),this.close.emit()}onCheckout(){this.checkout.emit()}incrementQuantity(t){this.updateQuantity.emit({itemId:t.id,quantity:t.quantity+1})}decrementQuantity(t){t.quantity>1&&this.updateQuantity.emit({itemId:t.id,quantity:t.quantity-1})}onRemoveItem(t){this.removeItem.emit(t)}static{this.\u0275fac=function(a){return new(a||s)}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["app-cart-popup"]],inputs:{items:"items",isOpen:"isOpen"},outputs:{close:"close",continueShopping:"continueShopping",checkout:"checkout",updateQuantity:"updateQuantity",removeItem:"removeItem"},standalone:!0,features:[e.aNF],decls:2,vars:2,consts:[["class","fixed inset-0 bg-black bg-opacity-50 z-50",3,"click",4,"ngIf"],["class","fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-white rounded-lg shadow-2xl z-50 w-full max-w-2xl max-h-[90vh] flex flex-col",3,"click",4,"ngIf"],[1,"fixed","inset-0","bg-black","bg-opacity-50","z-50",3,"click"],[1,"fixed","top-1/2","left-1/2","transform","-translate-x-1/2","-translate-y-1/2","bg-white","rounded-lg","shadow-2xl","z-50","w-full","max-w-2xl","max-h-[90vh]","flex","flex-col",3,"click"],[1,"flex","items-center","justify-between","px-6","py-4","border-b","border-gray-200"],[1,"flex","items-center","gap-3"],["src","/icons/cart-icon.svg","alt","Cart",1,"w-5","h-5"],[1,"text-gray-900","text-xl","font-bold"],[1,"hover:opacity-70","transition-opacity",3,"click"],["src","/icons/close-icon.svg","alt","Close",1,"w-3","h-3"],[1,"flex-1","overflow-y-auto","px-6","py-4"],[1,"space-y-4"],["class","flex items-center gap-4 p-4 border border-gray-200 rounded-lg",4,"ngFor","ngForOf"],[1,"border-t","border-gray-200","px-6","py-4"],[1,"flex","items-center","justify-between","mb-4"],[1,"text-gray-900","text-lg","font-medium"],[1,"text-senteranga-green","text-2xl","font-bold"],[1,"flex","items-center","gap-4"],[1,"flex-1","px-6","py-3","border-2","border-senteranga-green","text-senteranga-green","text-base","font-medium","rounded-lg","hover:bg-senteranga-green","hover:text-white","transition-colors",3,"click"],[1,"flex-1","px-6","py-3","bg-senteranga-green","text-white","text-base","font-medium","rounded-lg","hover:bg-senteranga-green-dark","transition-colors",3,"click"],[1,"flex","items-center","gap-4","p-4","border","border-gray-200","rounded-lg"],[1,"w-16","h-16","rounded-lg","object-cover","flex-shrink-0",3,"src","alt"],[1,"flex-1","min-w-0"],[1,"text-gray-900","text-base","font-medium","truncate"],[1,"text-gray-600","text-sm"],[1,"text-senteranga-green","text-sm","font-medium"],[1,"flex","items-center","gap-3","flex-shrink-0"],[1,"hover:opacity-70","transition-opacity",3,"click","disabled"],["src","/icons/minus-icon.svg","alt","Decrease",1,"w-2","h-0.5"],[1,"text-black","text-base","font-medium","min-w-[2rem]","text-center"],["src","/icons/plus-icon.svg","alt","Increase",1,"w-2","h-2"],[1,"flex","flex-col","items-end","gap-1","flex-shrink-0"],[1,"text-gray-900","text-base","font-bold"],[1,"text-red-500","text-sm","font-normal","hover:text-red-600","transition-colors",3,"click"]],template:function(a,r){1&a&&e.DNE(0,k,1,0,"div",0)(1,l,22,3,"div",1),2&a&&(e.Y8G("ngIf",r.isOpen),e.R7$(),e.Y8G("ngIf",r.isOpen))},dependencies:[_.MD,_.Sq,_.bT],encapsulation:2})}}return s})();var c=u(8359),p=u(8490),f=u(6868);function d(s,g){if(1&s&&(e.j41(0,"span",28),e.EFF(1),e.k0s()),2&s){const t=e.XpG();e.R7$(),e.JRh(t.unreadCount)}}function h(s,g){1&s&&(e.j41(0,"div",33),e.EFF(1,"Aucune notification"),e.k0s())}function F(s,g){if(1&s&&(e.j41(0,"li",34)(1,"div",35),e.EFF(2),e.k0s(),e.j41(3,"div",36),e.EFF(4),e.k0s()()),2&s){const t=g.$implicit;e.R7$(2),e.JRh(t.title),e.R7$(2),e.JRh(t.message)}}function C(s,g){if(1&s&&(e.j41(0,"div",29)(1,"h4",30),e.EFF(2,"Notifications"),e.k0s(),e.DNE(3,h,2,0,"div",31),e.j41(4,"ul"),e.DNE(5,F,5,2,"li",32),e.k0s()()),2&s){const t=e.XpG();e.R7$(3),e.Y8G("ngIf",0===t.notifications.length),e.R7$(2),e.Y8G("ngForOf",t.notifications)}}function E(s,g){1&s&&(e.qex(0),e.j41(1,"a",37),e.EFF(2," Connexion "),e.k0s(),e.j41(3,"a",38),e.EFF(4," S'inscrire "),e.k0s(),e.bVm())}function T(s,g){if(1&s){const t=e.RV6();e.j41(0,"div",39)(1,"div",40),e.EFF(2,"Bonjour, "),e.j41(3,"span",41),e.EFF(4),e.k0s()(),e.j41(5,"button",42),e.bIt("click",function(){e.eBV(t);const r=e.XpG();return e.Njj(r.goToDashboard())}),e.EFF(6,"Mon espace"),e.k0s(),e.j41(7,"button",43),e.bIt("click",function(){e.eBV(t);const r=e.XpG();return e.Njj(r.logout())}),e.EFF(8,"D\xe9connexion"),e.k0s()()}if(2&s){const t=e.XpG();e.R7$(4),e.JRh(t.userDisplayName)}}function M(s,g){1&s&&(e.qSk(),e.nrm(0,"path",44))}function $(s,g){1&s&&(e.qSk(),e.nrm(0,"path",45))}function S(s,g){if(1&s){const t=e.RV6();e.j41(0,"div",46),e.bIt("click",function(){e.eBV(t);const r=e.XpG();return e.Njj(r.closeMobileMenu())}),e.k0s()}}function w(s,g){if(1&s){const t=e.RV6();e.qex(0),e.j41(1,"a",57),e.bIt("click",function(){e.eBV(t);const r=e.XpG(2);return e.Njj(r.closeMobileMenu())}),e.EFF(2," Connexion "),e.k0s(),e.j41(3,"a",58),e.bIt("click",function(){e.eBV(t);const r=e.XpG(2);return e.Njj(r.closeMobileMenu())}),e.EFF(4," S'inscrire "),e.k0s(),e.bVm()}}function R(s,g){if(1&s){const t=e.RV6();e.j41(0,"button",59),e.bIt("click",function(){e.eBV(t);const r=e.XpG(2);return r.goToDashboard(),e.Njj(r.closeMobileMenu())}),e.EFF(1,"Mon espace"),e.k0s(),e.j41(2,"button",60),e.bIt("click",function(){e.eBV(t);const r=e.XpG(2);return r.logout(),e.Njj(r.closeMobileMenu())}),e.EFF(3,"D\xe9connexion"),e.k0s()}}function P(s,g){if(1&s){const t=e.RV6();e.j41(0,"div",47)(1,"div",48)(2,"nav",49)(3,"a",50),e.bIt("click",function(){e.eBV(t);const r=e.XpG();return e.Njj(r.closeMobileMenu())}),e.EFF(4," Accueil "),e.k0s(),e.j41(5,"a",51),e.bIt("click",function(){e.eBV(t);const r=e.XpG();return e.Njj(r.closeMobileMenu())}),e.EFF(6," March\xe9s "),e.k0s(),e.j41(7,"a",52),e.bIt("click",function(){e.eBV(t);const r=e.XpG();return e.Njj(r.closeMobileMenu())}),e.EFF(8," A propos "),e.k0s(),e.j41(9,"a",52),e.bIt("click",function(){e.eBV(t);const r=e.XpG();return e.Njj(r.closeMobileMenu())}),e.EFF(10," Forum "),e.k0s()(),e.j41(11,"div",53)(12,"div",54)(13,"span",55),e.EFF(14,"Panier"),e.k0s(),e.j41(15,"div",12),e.bIt("click",function(){e.eBV(t);const r=e.XpG();return e.Njj(r.toggleCart())}),e.qSk(),e.j41(16,"svg",13),e.nrm(17,"path",14),e.k0s(),e.joV(),e.j41(18,"span",15),e.EFF(19),e.k0s()()()(),e.j41(20,"div",56),e.DNE(21,w,5,0,"ng-container",20)(22,R,4,0,"ng-template",null,1,e.C5r),e.k0s()()()}if(2&s){const t=e.sdS(23),a=e.XpG();e.R7$(19),e.JRh(a.cartItemCount),e.R7$(2),e.Y8G("ngIf",!a.isLoggedIn())("ngIfElse",t)}}let N=(()=>{class s{get cartItemCount(){return this.cartService.getCartItemCount()}get unreadCount(){return this.notifications?this.notifications.filter(t=>!t.read).length:0}constructor(t,a,r){this.router=t,this.dataService=a,this.cartService=r,this.isCartOpen=!1,this.isMobileMenuOpen=!1,this.cartItems=[],this.cartSubscription=new c.yU,this.currentUser=null,this.notifications=[],this.showNotifications=!1}ngOnInit(){this.loadCurrentUser(),window.addEventListener("storage",t=>{"currentUser"===t.key&&this.loadCurrentUser()}),this.loadNotifications(),this.cartSubscription=this.cartService.getCart().subscribe(t=>{this.cartItems=t})}ngOnDestroy(){this.cartSubscription&&this.cartSubscription.unsubscribe()}loadCurrentUser(){try{const t=localStorage.getItem("currentUser");this.currentUser=t?JSON.parse(t):null}catch{this.currentUser=null}this.loadNotifications()}loadNotifications(){this.currentUser&&this.currentUser.id?this.dataService.getNotificationsForUser(this.currentUser.id).subscribe({next:t=>{this.notifications=t||[]},error:t=>{console.error("Error loading notifications",t),this.notifications=[]}}):this.notifications=[]}isLoggedIn(){return!!this.currentUser}get userDisplayName(){return this.currentUser?`${this.currentUser.firstName||""} ${this.currentUser.lastName||""}`.trim():""}goToDashboard(){this.router.navigate(this.currentUser?[{agriculteur:"/dashboard-agriculteur",client:"/dashboard-institutionnel",admin:"/dashboard-admin",investisseur:"/dashboard-institutionnel",agronome:"/dashboard-institutionnel","agent-terrain":"/dashboard-institutionnel",etat:"/dashboard-institutionnel"}[this.currentUser.userType]||"/"]:["/connexion"])}logout(){localStorage.removeItem("currentUser"),this.currentUser=null,this.router.navigate(["/"])}toggleCart(){this.isCartOpen=!this.isCartOpen}toggleNotifications(){this.showNotifications=!this.showNotifications,this.showNotifications&&this.notifications.length&&(this.notifications.filter(a=>!a.read).slice(0,10).forEach(a=>this.dataService.markNotificationRead(a.id).subscribe()),setTimeout(()=>this.loadNotifications(),300))}closeCart(){this.isCartOpen=!1}toggleMobileMenu(){this.isMobileMenuOpen=!this.isMobileMenuOpen}closeMobileMenu(){this.isMobileMenuOpen=!1}onContinueShopping(){this.closeCart()}onCheckout(){console.log("Proceeding to checkout..."),this.closeCart()}onUpdateQuantity(t){this.cartService.updateQuantity(t.itemId,t.quantity)}onRemoveItem(t){this.cartService.removeFromCart(t)}static{this.\u0275fac=function(a){return new(a||s)(e.rXU(o.Ix),e.rXU(p.u),e.rXU(f.m))}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["app-header"]],standalone:!0,features:[e.aNF],decls:37,vars:11,consts:[["userMenu",""],["mobileUserMenu",""],[1,"fixed","top-0","left-0","right-0","bg-white","py-3","px-4","md:px-8","shadow-sm","z-50"],[1,"max-w-7xl","mx-auto","flex","items-center","justify-between"],["routerLink","/",1,"flex","items-center","gap-2","cursor-pointer"],["src","/images/logo-senteranga.png","alt","SenTeranga Logo",1,"h-8","md:h-12","w-auto"],[1,"text-senteranga-green","text-lg","md:text-2xl","font-bold","hidden","sm:block"],[1,"hidden","lg:flex","items-center","gap-8"],["routerLink","/",1,"text-black","text-base","hover:text-senteranga-green","transition-colors"],["routerLink","/marche-agricole",1,"text-black","text-base","hover:text-senteranga-green","transition-colors"],["href","#",1,"text-black","text-base","hover:text-senteranga-green","transition-colors"],[1,"hidden","lg:flex","items-center","gap-3"],[1,"relative","cursor-pointer",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6","text-senteranga-green"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"],[1,"absolute","-top-1","-right-1","bg-senteranga-green","text-white","text-xs","font-medium","rounded-full","w-4","h-4","flex","items-center","justify-center"],[1,"relative"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6 6 0 10-12 0v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"],["class","absolute -top-1 -right-1 bg-red-600 text-white text-xs font-medium rounded-full w-4 h-4 flex items-center justify-center",4,"ngIf"],["class","absolute right-0 mt-2 bg-white border rounded shadow-lg w-80 z-50 p-3",4,"ngIf"],[4,"ngIf","ngIfElse"],[1,"lg:hidden","p-2","rounded-md","text-gray-600","hover:text-gray-900","hover:bg-gray-100","focus:outline-none","focus:ring-2","focus:ring-inset","focus:ring-senteranga-green",3,"click"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-6","w-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 6h16M4 12h16M4 18h16",4,"ngIf"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12",4,"ngIf"],["class","lg:hidden fixed inset-0 top-16 bg-black bg-opacity-50 z-40",3,"click",4,"ngIf"],["class","lg:hidden absolute top-full left-0 right-0 bg-white shadow-lg border-t border-gray-200 z-50 transform transition-all duration-300 ease-in-out",4,"ngIf"],[3,"close","continueShopping","checkout","updateQuantity","removeItem","isOpen","items"],[1,"absolute","-top-1","-right-1","bg-red-600","text-white","text-xs","font-medium","rounded-full","w-4","h-4","flex","items-center","justify-center"],[1,"absolute","right-0","mt-2","bg-white","border","rounded","shadow-lg","w-80","z-50","p-3"],[1,"font-semibold","mb-2"],["class","text-sm text-gray-600",4,"ngIf"],["class","py-2 border-b last:border-b-0",4,"ngFor","ngForOf"],[1,"text-sm","text-gray-600"],[1,"py-2","border-b","last:border-b-0"],[1,"text-sm","font-medium"],[1,"text-xs","text-gray-600"],["routerLink","/connexion",1,"px-4","py-2","text-senteranga-green","text-sm","font-medium","hover:bg-gray-50","rounded","transition-colors","inline-block","text-center"],["routerLink","/inscription",1,"px-4","py-2","bg-senteranga-green","text-white","text-sm","font-medium","rounded","hover:bg-senteranga-green-dark","transition-colors","inline-block","text-center"],[1,"flex","items-center","gap-3"],[1,"text-sm","text-gray-700"],[1,"font-semibold"],[1,"px-3","py-2","bg-white","border","border-gray-200","rounded","text-sm","hover:bg-gray-50",3,"click"],[1,"px-3","py-2","bg-red-500","text-white","rounded","text-sm","hover:bg-red-600",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 6h16M4 12h16M4 18h16"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"lg:hidden","fixed","inset-0","top-16","bg-black","bg-opacity-50","z-40",3,"click"],[1,"lg:hidden","absolute","top-full","left-0","right-0","bg-white","shadow-lg","border-t","border-gray-200","z-50","transform","transition-all","duration-300","ease-in-out"],[1,"px-4","py-6","space-y-4"],[1,"space-y-2"],["routerLink","/",1,"block","px-3","py-2","text-base","font-medium","text-gray-900","hover:text-senteranga-green","hover:bg-gray-50","rounded-md","transition-colors",3,"click"],["routerLink","/marche-agricole",1,"block","px-3","py-2","text-base","font-medium","text-gray-900","hover:text-senteranga-green","hover:bg-gray-50","rounded-md","transition-colors",3,"click"],["href","#",1,"block","px-3","py-2","text-base","font-medium","text-gray-900","hover:text-senteranga-green","hover:bg-gray-50","rounded-md","transition-colors",3,"click"],[1,"border-t","border-gray-200","pt-4"],[1,"flex","items-center","justify-between","px-3","py-2"],[1,"text-base","font-medium","text-gray-900"],[1,"border-t","border-gray-200","pt-4","space-y-3"],["routerLink","/connexion",1,"block","w-full","px-4","py-3","text-center","text-senteranga-green","text-base","font-medium","border","border-senteranga-green","rounded-md","hover:bg-senteranga-green","hover:text-white","transition-colors",3,"click"],["routerLink","/inscription",1,"block","w-full","px-4","py-3","text-center","bg-senteranga-green","text-white","text-base","font-medium","rounded-md","hover:bg-senteranga-green-dark","transition-colors",3,"click"],[1,"block","w-full","px-4","py-3","text-center","bg-white","border","rounded-md",3,"click"],[1,"block","w-full","px-4","py-3","text-center","bg-red-500","text-white","rounded-md",3,"click"]],template:function(a,r){if(1&a){const m=e.RV6();e.j41(0,"header",2)(1,"div",3)(2,"a",4),e.nrm(3,"img",5),e.j41(4,"span",6),e.EFF(5,"Portail SenTeranga"),e.k0s()(),e.j41(6,"nav",7)(7,"a",8),e.EFF(8,"Accueil"),e.k0s(),e.j41(9,"a",9),e.EFF(10,"March\xe9s"),e.k0s(),e.j41(11,"a",10),e.EFF(12,"A propos"),e.k0s(),e.j41(13,"a",10),e.EFF(14,"Forum"),e.k0s()(),e.j41(15,"div",11)(16,"div",12),e.bIt("click",function(){return e.eBV(m),e.Njj(r.toggleCart())}),e.qSk(),e.j41(17,"svg",13),e.nrm(18,"path",14),e.k0s(),e.joV(),e.j41(19,"span",15),e.EFF(20),e.k0s()(),e.j41(21,"div",16)(22,"div",12),e.bIt("click",function(){return e.eBV(m),e.Njj(r.toggleNotifications())}),e.qSk(),e.j41(23,"svg",13),e.nrm(24,"path",17),e.k0s(),e.DNE(25,d,2,1,"span",18),e.k0s(),e.DNE(26,C,6,2,"div",19),e.k0s(),e.DNE(27,E,5,0,"ng-container",20)(28,T,9,1,"ng-template",null,0,e.C5r),e.k0s(),e.joV(),e.j41(30,"button",21),e.bIt("click",function(){return e.eBV(m),e.Njj(r.toggleMobileMenu())}),e.qSk(),e.j41(31,"svg",22),e.DNE(32,M,1,0,"path",23)(33,$,1,0,"path",24),e.k0s()()(),e.DNE(34,S,1,0,"div",25)(35,P,24,3,"div",26),e.k0s(),e.joV(),e.j41(36,"app-cart-popup",27),e.bIt("close",function(){return e.eBV(m),e.Njj(r.closeCart())})("continueShopping",function(){return e.eBV(m),e.Njj(r.onContinueShopping())})("checkout",function(){return e.eBV(m),e.Njj(r.onCheckout())})("updateQuantity",function(U){return e.eBV(m),e.Njj(r.onUpdateQuantity(U))})("removeItem",function(U){return e.eBV(m),e.Njj(r.onRemoveItem(U))}),e.k0s()}if(2&a){const m=e.sdS(29);e.R7$(20),e.JRh(r.cartItemCount),e.R7$(5),e.Y8G("ngIf",null==r.notifications?null:r.notifications.length),e.R7$(),e.Y8G("ngIf",r.showNotifications),e.R7$(),e.Y8G("ngIf",!r.isLoggedIn())("ngIfElse",m),e.R7$(5),e.Y8G("ngIf",!r.isMobileMenuOpen),e.R7$(),e.Y8G("ngIf",r.isMobileMenuOpen),e.R7$(),e.Y8G("ngIf",r.isMobileMenuOpen),e.R7$(),e.Y8G("ngIf",r.isMobileMenuOpen),e.R7$(),e.Y8G("isOpen",r.isCartOpen)("items",r.cartItems)}},dependencies:[_.MD,_.Sq,_.bT,o.iI,o.Wk,n],encapsulation:2})}}return s})()},6868:(I,b,u)=>{u.d(b,{m:()=>y});var _=u(4412),o=u(5312),e=u(4438),x=u(1626);let y=(()=>{class v{constructor(i){this.http=i,this.CART_STORAGE_KEY="senteranga_cart",this.cartSubject=new _.t([]),this.cart$=this.cartSubject.asObservable(),this.apiUrl=o.c.apiUrl,this.loadCartFromStorage()}loadCartFromStorage(){try{const i=localStorage.getItem(this.CART_STORAGE_KEY);if(i){const l=JSON.parse(i);this.cartSubject.next(l)}}catch(i){console.error("Error loading cart from storage:",i),this.cartSubject.next([])}}saveCartToStorage(i){try{localStorage.setItem(this.CART_STORAGE_KEY,JSON.stringify(i))}catch(l){console.error("Error saving cart to storage:",l)}}getCartItems(){return this.cartSubject.value}getCart(){return this.cart$}getCartState(){const i=this.getCartItems(),l=i.reduce((n,c)=>n+c.unitPrice*c.quantity,0);return{items:i,total:l}}getCartItemCount(){return this.getCartItems().reduce((i,l)=>i+l.quantity,0)}addToCart(i,l=1){const n=this.getCartItems(),c=n.findIndex(p=>p.id===i.id);if(c>-1)n[c].quantity+=l;else{const p={id:i.id,name:i.titre||i.name,producer:this.getProducerName(i),unitPrice:i.prixParUnite||i.prix||0,unit:i.unite||"unit\xe9",quantity:l,imageUrl:this.getProductImage(i)};n.push(p)}this.cartSubject.next([...n]),this.saveCartToStorage(n)}removeFromCart(i){const l=this.getCartItems().filter(n=>n.id!==i);this.cartSubject.next(l),this.saveCartToStorage(l)}updateQuantity(i,l){if(l<=0)return void this.removeFromCart(i);const n=this.getCartItems(),c=n.findIndex(p=>p.id===i);c>-1&&(n[c].quantity=l,this.cartSubject.next([...n]),this.saveCartToStorage(n))}clearCart(){this.cartSubject.next([]),this.saveCartToStorage([])}getProducerName(i){return i.agriculteurId?i.agriculteurId:i.producer||"Producteur inconnu"}getProductImage(i){return i.images&&i.images.length>0?i.images[0]:i.imageUrl||i.image||"/images/placeholder.png"}createReservation(i,l,n=1){const c={id:`reservation-${Date.now()}`,productId:i.id,productTitle:i.name||i.titre,clientId:l.id,clientName:`${l.firstName} ${l.lastName}`,clientEmail:l.email,clientPhone:l.phone,agriculteurId:i.producer?.id||i.agriculteurId,quantity:n,reservationDate:new Date,status:"active"};return this.http.post(`${this.apiUrl}/reservations`,c)}getReservationsForFarmer(i){return this.http.get(`${this.apiUrl}/reservations?agriculteurId=${i}&_sort=reservationDate&_order=asc`)}getReservationsForClient(i){return this.http.get(`${this.apiUrl}/reservations?clientId=${i}&_sort=reservationDate&_order=desc`)}updateReservationStatus(i,l){return this.http.patch(`${this.apiUrl}/reservations/${i}`,{status:l})}deleteReservation(i){return this.http.delete(`${this.apiUrl}/reservations/${i}`)}static{this.\u0275fac=function(l){return new(l||v)(e.KVO(x.Qq))}}static{this.\u0275prov=e.jDH({token:v,factory:v.\u0275fac,providedIn:"root"})}}return v})()},8490:(I,b,u)=>{u.d(b,{u:()=>k});var _=u(5312),o=u(7673),e=u(6354),x=u(9437),y=u(4438),v=u(1626);let k=(()=>{class i{constructor(n){this.http=n,this.apiUrl=_.c.apiUrl}getRegions(){return this.http.get(`${this.apiUrl}/regions`)}updateUser(n){return this.http.put(`${this.apiUrl}/users/${n.id}`,n)}createNotification(n){return this.http.post(`${this.apiUrl}/notifications`,n)}getUserTypes(){return this.http.get(`${this.apiUrl}/userTypes`)}getClientTypes(){return this.http.get(`${this.apiUrl}/clientTypes`)}getInvestorTypes(){return this.http.get(`${this.apiUrl}/investorTypes`)}getMinistries(){return this.http.get(`${this.apiUrl}/ministries`)}getStructures(){return this.http.get(`${this.apiUrl}/structures`)}getCertifications(){return this.http.get(`${this.apiUrl}/certifications`)}getTestUsers(){return this.http.get(`${this.apiUrl}/users`)}authenticateUser(n,c){const p=n.replace(/^(\+221|221)/,""),f=this.getRegisteredUsersFromStorage();return this.getTestUsers().pipe((0,e.T)(d=>d.find(C=>(C.phone||"").toString().replace(/^(\+221|221)/,"")===p&&C.password===c)||f.find(C=>(C.phone||"").toString().replace(/^(\+221|221)/,"")===p&&C.password===c)||null))}registerUser(n){const c=n.telephone.replace(/^(\+221|221)/,"");return this.getTestUsers().pipe((0,e.T)(p=>{if(p.find(h=>h.phone.replace(/^(\+221|221)/,"")===c))return{success:!1,error:"Un compte avec ce num\xe9ro de t\xe9l\xe9phone existe d\xe9j\xe0"};const d={id:`user-${Date.now()}`,email:n.email||"",password:n.password,userType:n.userType.id,firstName:n.prenom,lastName:n.nom,phone:n.telephone,region:n.region||void 0,department:n.departement||n.department||void 0,village:n.village||void 0,clientType:n.clientType||void 0,investorType:n.investorType||void 0,investmentAmount:n.montantInvestissement||void 0,professionalEmail:n.emailPro||void 0,structure:n.structure||void 0,interventionRegions:n.regionsIntervention||void 0,governmentId:n.governmentId||void 0,ministry:n.ministry||void 0,agentCode:n.agentCode||void 0,adminCode:n.adminCode||void 0,isValidated:!1,validationStatus:"pending",bankAccount:void 0};return this.http.post(`${this.apiUrl}/users`,d).subscribe({next:h=>{console.log("User registered successfully:",h)},error:h=>{console.error("Error saving user:",h)}}),{success:!0,user:d}}))}getRegisteredUsersFromStorage(){const n=localStorage.getItem("registeredUsers");return n?JSON.parse(n):[]}getDepartementsByRegion(n){return this.getRegions().pipe((0,e.T)(c=>{const p=c.find(f=>f.id===n);return p?p.departements:[]}))}createAnnouncement(n){return this.http.post(`${this.apiUrl}/announcements`,n)}getAnnouncementsByUser(n){return this.http.get(`${this.apiUrl}/announcements?userId=${n}`)}getNotificationsForUser(n){return this.http.get(`${this.apiUrl}/notifications?userId=${n}&_sort=createdAt&_order=desc`)}markNotificationRead(n){return this.http.patch(`${this.apiUrl}/notifications/${n}`,{read:!0})}updateUserBankAccount(n,c){return this.http.patch(`${this.apiUrl}/users/${n}`,{bankAccount:c})}getSeedsCatalog(){return this.http.get(`${this.apiUrl}/seeds`).pipe((0,x.W)(n=>(console.warn("seeds endpoint missing or error",n),(0,o.of)([]))))}createSeedOrder(n){return this.http.post(`${this.apiUrl}/seedOrders`,n)}getAlertsByRegion(n){return this.http.get(`${this.apiUrl}/agronomeAlerts?region=${n}`)}createProduct(n){return this.http.post(`${this.apiUrl}/products`,n)}getProductsByUser(n){return this.http.get(`${this.apiUrl}/products?agriculteurId=${n}`)}getProductsByCategory(n){return this.http.get(`${this.apiUrl}/products?categorie=${n}`)}getProductById(n){return this.http.get(`${this.apiUrl}/products/${n}`)}updateProduct(n){return this.http.put(`${this.apiUrl}/products/${n.id}`,n)}updateProductStatus(n,c,p){const f={statutValidation:c,dateMaj:(new Date).toISOString()};return p&&(f.statutDisponibilite=p),this.http.patch(`${this.apiUrl}/products/${n}`,f)}deleteProduct(n){return this.http.delete(`${this.apiUrl}/products/${n}`)}getAllProducts(){return this.http.get(`${this.apiUrl}/products`)}validateUserRegistration(n,c){return this.getUserTypes().pipe((0,e.T)(p=>{const f=p.find(h=>h.id===n);if(!f)return{valid:!1,errors:["Type d'utilisateur invalide"]};const d=[];return f.requiredFields.forEach(h=>{c[h]||d.push(`Le champ ${h} est requis`)}),"agriculteur"===n&&(c.region||d.push("La r\xe9gion est requise"),c.departement||d.push("Le d\xe9partement est requis"),c.village||d.push("Le village est requis")),"client"===n&&(c.clientType||d.push("Le type de client est requis")),"investisseur"===n&&((!c.email||!this.isValidEmail(c.email))&&d.push("Email invalide"),c.investorType||d.push("Le type d'investisseur est requis"),(!c.montantInvestissement||c.montantInvestissement<1e5)&&d.push("Montant minimum: 100 000 FCFA")),"agronome"===n&&((!c.emailPro||!this.isValidEmail(c.emailPro))&&d.push("Email professionnel invalide"),c.structure||d.push("La structure est requise"),(!c.regionsIntervention||0===c.regionsIntervention.length)&&d.push("Au moins une r\xe9gion d'intervention requise")),{valid:0===d.length,errors:d}}))}isValidEmail(n){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n)}static{this.\u0275fac=function(c){return new(c||i)(y.KVO(v.Qq))}}static{this.\u0275prov=y.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})()},5312:(I,b,u)=>{u.d(b,{c:()=>_});const _={production:!1,apiUrl:"https://json-server-senteranga.onrender.com/api"}}}]);