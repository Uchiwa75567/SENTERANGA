"use strict";(self.webpackChunksenteranga=self.webpackChunksenteranga||[]).push([[743],{743:(Q,h,u)=>{u.r(h),u.d(h,{DashboardAgriculteurComponent:()=>X});var v=u(467),g=u(177),_=u(5776),k=u(4121),F=u(5473),i=u(4341),y=u(8032),d=u.n(y),e=u(4438),E=u(8174);const j=(n,a,t)=>({"bg-yellow-500 text-white":n,"bg-green-500 text-white":a,"bg-red-500 text-white":t}),C=(n,a,t)=>({"bg-yellow-100 text-yellow-800":n,"bg-green-100 text-green-800":a,"bg-red-100 text-red-800":t});function w(n,a){1&n&&(e.j41(0,"div",29)(1,"label",30),e.qSk(),e.j41(2,"svg",71),e.nrm(3,"path",72),e.k0s(),e.EFF(4," P\xe9riode de disponibilit\xe9 "),e.k0s(),e.joV(),e.j41(5,"div",10)(6,"div")(7,"label",11),e.EFF(8,"D\xe9but de p\xe9riode *"),e.k0s(),e.nrm(9,"input",73),e.k0s(),e.j41(10,"div")(11,"label",11),e.EFF(12,"Fin de p\xe9riode *"),e.k0s(),e.nrm(13,"input",74),e.k0s()(),e.j41(14,"div",75)(15,"p",76)(16,"strong"),e.qSk(),e.j41(17,"svg",71),e.nrm(18,"path",77),e.k0s(),e.EFF(19," Note : "),e.k0s(),e.EFF(20," Cette annonce sera indisponible jusqu'\xe0 validation par l'administration, puis disponible uniquement pendant la p\xe9riode d\xe9finie. "),e.k0s()()())}function D(n,a){if(1&n){const t=e.RV6();e.j41(0,"div",78),e.nrm(1,"video",79),e.j41(2,"button",80),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.capturePhoto())}),e.EFF(3," \u{1f4f8} Capturer "),e.k0s()()}}function A(n,a){if(1&n&&(e.j41(0,"div",81),e.qSk(),e.j41(1,"svg",71),e.nrm(2,"path",82),e.k0s(),e.EFF(3),e.k0s()),2&n){const t=e.XpG();e.R7$(3),e.SpI(" ",t.uploadedImageCount," image(s) s\xe9lectionn\xe9e(s) ")}}function M(n,a){1&n&&(e.j41(0,"div",83),e.qSk(),e.j41(1,"svg",71),e.nrm(2,"path",69),e.k0s(),e.EFF(3," Aucune image s\xe9lectionn\xe9e. L'image est obligatoire pour publier un produit. "),e.k0s())}function I(n,a){1&n&&(e.qSk(),e.j41(0,"svg",84),e.nrm(1,"path",85),e.k0s())}function P(n,a){1&n&&(e.j41(0,"div",109),e.qSk(),e.j41(1,"svg",110),e.nrm(2,"path",111),e.k0s()())}function O(n,a){1&n&&(e.j41(0,"span"),e.qSk(),e.j41(1,"svg",103),e.nrm(2,"path",112),e.k0s(),e.EFF(3," En attente "),e.k0s())}function S(n,a){1&n&&(e.j41(0,"span"),e.qSk(),e.j41(1,"svg",103),e.nrm(2,"path",82),e.k0s(),e.EFF(3," Valid\xe9 "),e.k0s())}function R(n,a){1&n&&(e.j41(0,"span"),e.qSk(),e.j41(1,"svg",103),e.nrm(2,"path",113),e.k0s(),e.EFF(3," Rejet\xe9 "),e.k0s())}function T(n,a){1&n&&(e.j41(0,"div",114),e.qSk(),e.j41(1,"svg",103),e.nrm(2,"path",115),e.k0s(),e.EFF(3," Annonce "),e.k0s())}function $(n,a){if(1&n&&(e.j41(0,"span",118)(1,"span",119),e.EFF(2),e.k0s()()),2&n){const t=e.XpG(2).$implicit,r=e.XpG(2);e.R7$(),e.Y8G("ngClass",e.sMw(2,C,"en_attente"===r.getAnnouncementStatus(t),"validee"===r.getAnnouncementStatus(t),"rejetee"===r.getAnnouncementStatus(t))),e.R7$(),e.SpI(" Statut: ","en_attente"===r.getAnnouncementStatus(t)?"\u23f3 Validation en attente":"validee"===r.getAnnouncementStatus(t)?"\u2713 Valid\xe9e":"\u2717 Rejet\xe9e"," ")}}function V(n,a){if(1&n&&(e.j41(0,"div",116),e.EFF(1," \u{1f4c5} "),e.j41(2,"strong"),e.EFF(3,"P\xe9riode approximative:"),e.k0s(),e.nrm(4,"br"),e.EFF(5),e.nI1(6,"date"),e.nI1(7,"date"),e.DNE(8,$,3,6,"span",117),e.k0s()),2&n){const t=e.XpG().$implicit,r=e.XpG(2);e.R7$(5),e.Lme(" De ",e.i5U(6,3,r.getAnnouncementStartDate(t),"dd/MM/yyyy")," \xe0 ",e.i5U(7,6,r.getAnnouncementEndDate(t),"dd/MM/yyyy")," "),e.R7$(3),e.Y8G("ngIf",r.getAnnouncementStatus(t))}}function q(n,a){if(1&n&&(e.j41(0,"div",91)(1,"div",92),e.DNE(2,P,3,0,"div",93),e.j41(3,"div",94)(4,"span",95),e.EFF(5),e.k0s()(),e.j41(6,"div",96),e.DNE(7,O,4,0,"span",97)(8,S,4,0,"span",97)(9,R,4,0,"span",97),e.k0s(),e.DNE(10,T,4,0,"div",98),e.k0s(),e.j41(11,"div",99)(12,"div",100)(13,"span",101),e.EFF(14),e.k0s()(),e.j41(15,"div",102)(16,"div"),e.qSk(),e.j41(17,"svg",103),e.nrm(18,"path",8),e.k0s(),e.EFF(19),e.k0s(),e.joV(),e.j41(20,"div"),e.qSk(),e.j41(21,"svg",103),e.nrm(22,"path",88),e.k0s(),e.EFF(23),e.k0s(),e.joV(),e.j41(24,"div"),e.qSk(),e.j41(25,"svg",103),e.nrm(26,"path",55),e.k0s(),e.EFF(27),e.k0s(),e.joV(),e.j41(28,"div"),e.qSk(),e.j41(29,"svg",103),e.nrm(30,"path",104),e.k0s(),e.EFF(31),e.k0s()(),e.joV(),e.j41(32,"div",105),e.qSk(),e.j41(33,"svg",103),e.nrm(34,"path",106)(35,"path",107),e.k0s(),e.EFF(36),e.k0s(),e.DNE(37,V,9,9,"div",108),e.k0s()()),2&n){const t=a.$implicit,r=e.XpG(2);e.R7$(),e.xc7("background-image",t.images&&t.images.length>0?"url("+t.images[0]+")":"none")("background-size","cover")("background-position","center"),e.R7$(),e.Y8G("ngIf",!t.images||0===t.images.length),e.R7$(3),e.JRh(t.titre),e.R7$(),e.Y8G("ngClass",e.sMw(22,j,"en_attente"===t.statutValidation,"valid\xe9"===t.statutValidation,"rejet\xe9"===t.statutValidation)),e.R7$(),e.Y8G("ngIf","en_attente"===t.statutValidation),e.R7$(),e.Y8G("ngIf","valid\xe9"===t.statutValidation),e.R7$(),e.Y8G("ngIf","rejet\xe9"===t.statutValidation),e.R7$(),e.Y8G("ngIf",r.isAnnouncement(t)),e.R7$(4),e.SpI(" ",t.categorie," "),e.R7$(5),e.Lme(" Quantit\xe9: ",t.quantite," ",t.unite," "),e.R7$(4),e.Lme(" Minimum: ",t.quantiteMinimale||"-"," ",t.unite," "),e.R7$(4),e.SpI(" Prix/unit\xe9: ",t.prixParUnite||"-"," FCFA "),e.R7$(4),e.SpI(" Total: ",t.prix," FCFA "),e.R7$(5),e.SpI(" ",t.localisation," "),e.R7$(),e.Y8G("ngIf",r.isAnnouncement(t))}}function U(n,a){if(1&n&&(e.j41(0,"div",86)(1,"h4",87),e.qSk(),e.j41(2,"svg",54),e.nrm(3,"path",88),e.k0s(),e.EFF(4),e.k0s(),e.joV(),e.j41(5,"div",89),e.DNE(6,q,38,26,"div",90),e.k0s()()),2&n){const t=e.XpG();e.R7$(4),e.SpI(" Mes produits (",t.products.length,") "),e.R7$(2),e.Y8G("ngForOf",t.products)}}function N(n,a){1&n&&(e.j41(0,"div",120),e.EFF(1,"Aucun produit trouv\xe9."),e.k0s())}function B(n,a){if(1&n){const t=e.RV6();e.j41(0,"div",123)(1,"div",124)(2,"div",125)(3,"div",126),e.EFF(4),e.k0s(),e.j41(5,"div",127),e.qSk(),e.j41(6,"svg",71),e.nrm(7,"path",104),e.k0s(),e.EFF(8),e.k0s()(),e.joV(),e.j41(9,"div",128)(10,"input",129),e.mxI("ngModelChange",function(o){const s=e.eBV(t).$implicit,l=e.XpG(2);return e.DH7(l.seedOrderQty[s.id],o)||(l.seedOrderQty[s.id]=o),e.Njj(o)}),e.k0s(),e.j41(11,"button",130),e.bIt("click",function(){const o=e.eBV(t).$implicit,s=e.XpG(2);return e.Njj(s.orderSeed(o))}),e.EFF(12," Commander "),e.k0s()()()()}if(2&n){const t=a.$implicit,r=e.XpG(2);e.R7$(4),e.JRh(t.name),e.R7$(4),e.Lme(" ",t.price," FCFA / ",t.unit||"unit\xe9"," "),e.R7$(2),e.R50("ngModel",r.seedOrderQty[t.id])}}function G(n,a){if(1&n&&(e.j41(0,"div",121),e.DNE(1,B,13,4,"div",122),e.k0s()),2&n){const t=e.XpG();e.R7$(),e.Y8G("ngForOf",t.seeds)}}function L(n,a){1&n&&(e.j41(0,"div",120),e.EFF(1,"Aucune alerte pour votre r\xe9gion pour le moment."),e.k0s())}function Y(n,a){if(1&n&&(e.j41(0,"li",132)(1,"div",133),e.EFF(2),e.k0s(),e.j41(3,"div",134),e.EFF(4),e.k0s()()),2&n){const t=a.$implicit;e.R7$(2),e.JRh(t.title),e.R7$(2),e.JRh(t.message)}}function z(n,a){if(1&n&&(e.j41(0,"ul",31),e.DNE(1,Y,5,2,"li",131),e.k0s()),2&n){const t=e.XpG();e.R7$(),e.Y8G("ngForOf",t.alerts)}}let X=(()=>{class n{constructor(t,r){this.dataService=t,this.fb=r,this.products=[],this.seeds=[],this.seedOrderQty={},this.alerts=[],this.currentUser=null,this.uploadedImageCount=0,this.selectedImages=[],this.cameraActive=!1,this.stream=null,this.isPublishing=!1}ngOnInit(){const t=localStorage.getItem("currentUser");this.currentUser=t?JSON.parse(t):null,this.productForm=this.fb.group({titre:["",i.k0.required],description:["",i.k0.required],categorie:["",i.k0.required],quantite:["",[i.k0.required,i.k0.min(0)]],quantiteMinimale:["",[i.k0.required,i.k0.min(0)]],prixParUnite:["",[i.k0.required,i.k0.min(0)]],unite:["",i.k0.required],localisation:["",i.k0.required],publicationType:["product",i.k0.required],periodeApproximativeDebut:[""],periodeApproximativeFin:[""]}),this.bankForm=this.fb.group({bankName:[""],accountNumber:[""]}),this.loadInitial()}loadInitial(){this.currentUser&&(this.dataService.getProductsByUser(this.currentUser.id).subscribe(t=>this.products=t||[]),this.dataService.getSeedsCatalog().subscribe(t=>{this.seeds=t||[],this.seeds.forEach(r=>this.seedOrderQty[r.id]=1)}),this.currentUser.region&&this.dataService.getAlertsByRegion(this.currentUser.region).subscribe(t=>this.alerts=t||[]),this.currentUser.bankAccount&&this.bankForm.patchValue(this.currentUser.bankAccount))}onImagesSelected(t){this.selectedImages=Array.from(t.target.files||[]),this.uploadedImageCount=this.selectedImages.length}startCamera(){this.cameraActive=!0,navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}}).then(t=>{this.stream=t,setTimeout(()=>{const r=document.getElementById("cameraVideo");r&&(r.srcObject=t)},100)}).catch(t=>{console.error("Camera error:",t),d().fire({icon:"error",title:"Erreur d'acc\xe8s \xe0 la cam\xe9ra",text:"V\xe9rifiez les permissions de votre navigateur",confirmButtonColor:"#22c55e"}),this.cameraActive=!1})}capturePhoto(){const t=document.getElementById("cameraVideo"),r=document.getElementById("cameraCanvas");if(!t||!r)return;const o=r.getContext("2d");o&&(r.width=t.videoWidth,r.height=t.videoHeight,o.drawImage(t,0,0),r.toBlob(s=>{if(s){const l=new File([s],`photo-${Date.now()}.jpg`,{type:"image/jpeg"});this.selectedImages.push(l),this.uploadedImageCount=this.selectedImages.length}},"image/jpeg",.95))}stopCamera(){this.cameraActive=!1,this.stream&&(this.stream.getTracks().forEach(t=>t.stop()),this.stream=null)}publishProduct(){var t=this;return(0,v.A)(function*(){if(t.productForm.valid&&t.currentUser){if(0===t.selectedImages.length)return d().fire({icon:"warning",title:"Image obligatoire",text:"Veuillez importer une photo ou en photographier une avant de publier le produit.",confirmButtonColor:"#22c55e"}),void console.warn("Image upload required but none selected");t.isPublishing=!0;try{let r=[];if(t.selectedImages.length){const m="djha1kqvu",p="senteranga_products";r=yield Promise.all(t.selectedImages.map(function(){var W=(0,v.A)(function*(x,K){const b=new FormData;b.append("file",x),b.append("upload_preset",p),b.append("folder","senteranga_products");const f=yield fetch(`https://api.cloudinary.com/v1_1/${m}/image/upload`,{method:"POST",body:b});if(!f.ok)throw new Error(`Cloudinary upload failed: ${f.statusText}`);return(yield f.json()).secure_url});return function(x,K){return W.apply(this,arguments)}}()))}const o=parseFloat(t.productForm.value.quantite)||0,s=parseFloat(t.productForm.value.prixParUnite)||0,l=o*s,c="announcement"===t.productForm.value.publicationType;if(c){const m=t.productForm.value.periodeApproximativeDebut,p=t.productForm.value.periodeApproximativeFin;if(!m||!p)return void d().fire({icon:"warning",title:"P\xe9riodes requises",text:"Veuillez d\xe9finir la p\xe9riode approximative de disponibilit\xe9 pour l'annonce.",confirmButtonColor:"#22c55e"});if(new Date(m)>=new Date(p))return void d().fire({icon:"warning",title:"P\xe9riodes invalides",text:"La p\xe9riode de fin doit \xeatre post\xe9rieure \xe0 la p\xe9riode de d\xe9but.",confirmButtonColor:"#22c55e"})}const H={id:`prod-${Date.now()}`,agriculteurId:t.currentUser.id,titre:t.productForm.value.titre,description:t.productForm.value.description,categorie:t.productForm.value.categorie,quantite:o,quantiteMinimale:parseFloat(t.productForm.value.quantiteMinimale),prix:l,prixParUnite:s,unite:t.productForm.value.unite,localisation:t.productForm.value.localisation,images:r,statutValidation:"en_attente",statutDisponibilite:c?"reserv\xe9":"disponible",datePublication:(new Date).toISOString(),dateMaj:(new Date).toISOString(),isAnnonce:c,periodeApproximativeDebut:c?t.productForm.value.periodeApproximativeDebut:void 0,periodeApproximativeFin:c?t.productForm.value.periodeApproximativeFin:void 0,statutAnnonce:c?"en_attente":void 0};t.dataService.createProduct(H).subscribe({next:m=>{t.products.unshift(m);const p=c?"Votre annonce est en attente de validation par l'administration. Elle sera disponible selon les dates d\xe9finies une fois valid\xe9e.":"Votre produit est en attente de validation par l'administration.";d().fire({icon:"success",title:c?"Annonce publi\xe9e !":"Produit publi\xe9 !",text:p,confirmButtonColor:"#22c55e"}),t.resetProductForm(),t.isPublishing=!1},error:m=>{console.error("Error publishing product",m),d().fire({icon:"error",title:"Erreur de publication",text:"Une erreur s'est produite lors de la publication du produit.",confirmButtonColor:"#22c55e"}),t.isPublishing=!1}})}catch(r){console.error("Image upload failed",r),d().fire({icon:"error",title:"\xc9chec de l'upload",text:"Une erreur s'est produite lors de l'upload des images.",confirmButtonColor:"#22c55e"}),t.isPublishing=!1}}else{const r=Object.keys(t.productForm.controls).filter(s=>t.productForm.get(s)?.invalid);console.warn("Product form invalid controls:",r);const o=r.length?r.join(", "):"inconnus";d().fire({icon:"warning",title:"Champs obligatoires manquants",text:"Veuillez remplir tous les champs obligatoires. Champs invalides: "+o,confirmButtonColor:"#22c55e"})}})()}resetProductForm(){this.productForm.reset(),this.selectedImages=[],this.uploadedImageCount=0,this.stopCamera()}convertImagesToBase64(t){return Promise.all(t.map(r=>new Promise(o=>{const s=new FileReader;s.onload=()=>{o(s.result)},s.readAsDataURL(r)})))}saveBankAccount(){if(!this.currentUser)return;const t=this.bankForm.value;this.dataService.updateUserBankAccount(this.currentUser.id,{bankName:t.bankName||"",accountNumber:t.accountNumber||""}).subscribe({next:o=>{this.currentUser=o,localStorage.setItem("currentUser",JSON.stringify(o)),d().fire({icon:"success",title:"Succ\xe8s",text:"Compte bancaire enregistr\xe9 avec succ\xe8s",confirmButtonColor:"#22c55e"})},error:o=>{console.error(o),d().fire({icon:"error",title:"Erreur",text:"Erreur lors de l'enregistrement du compte bancaire",confirmButtonColor:"#22c55e"})}})}isAnnouncement(t){return!0===t.isAnnonce}getAnnouncementStartDate(t){return t.periodeApproximativeDebut||""}getAnnouncementEndDate(t){return t.periodeApproximativeFin||""}getAnnouncementStatus(t){return t.statutAnnonce||""}orderSeed(t){if(!this.currentUser)return;const r=this.seedOrderQty[t.id]||1,o={id:`order-${Date.now()}`,userId:this.currentUser.id,seedId:t.id,seedName:t.name,quantity:r,total:(t.price||0)*r,status:"paid",createdAt:(new Date).toISOString()};this.dataService.createSeedOrder(o).subscribe({next:s=>{d().fire({icon:"success",title:"Commande pass\xe9e",text:`Commande pass\xe9e: ${o.seedName} x${r}`,confirmButtonColor:"#22c55e"})},error:s=>{console.error(s),d().fire({icon:"error",title:"Erreur de commande",text:"Une erreur s'est produite lors de la commande",confirmButtonColor:"#22c55e"})}})}static{this.\u0275fac=function(r){return new(r||n)(e.rXU(E.u),e.rXU(i.ok))}}static{this.\u0275cmp=e.VBU({type:n,selectors:[["app-dashboard-agriculteur"]],standalone:!0,features:[e.aNF],decls:151,vars:19,consts:[[1,"pt-20","w-full","px-4","sm:px-6","md:px-8","py-6","sm:py-8","bg-gray-50"],[1,"max-w-7xl","mx-auto"],[1,"text-2xl","sm:text-3xl","md:text-4xl","font-bold","mb-6","sm:mb-8","text-gray-900"],[1,"grid","grid-cols-1","lg:grid-cols-3","gap-4","sm:gap-6"],[1,"lg:col-span-2","space-y-4","sm:space-y-6"],[1,"bg-white","rounded-lg","shadow","p-4","sm:p-6"],[1,"text-lg","sm:text-xl","font-bold","mb-4","sm:mb-5","text-gray-900"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6","inline","mr-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"],[1,"space-y-3","sm:space-y-4",3,"ngSubmit","formGroup"],[1,"grid","grid-cols-1","sm:grid-cols-2","gap-3","sm:gap-4"],[1,"block","text-sm","font-semibold","mb-2","text-gray-700"],["formControlName","titre","placeholder","Ex: Tomates rouges","required","",1,"w-full","bg-white","border","border-gray-300","rounded-lg","px-3","sm:px-4","py-2","sm:py-3","text-base","focus:ring-2","focus:ring-senteranga-green","focus:border-transparent","outline-none"],["formControlName","categorie","required","",1,"w-full","bg-white","border","border-gray-300","rounded-lg","px-3","sm:px-4","py-2","sm:py-3","text-base","focus:ring-2","focus:ring-senteranga-green","focus:border-transparent","outline-none"],["value",""],["value","L\xe9gumes"],["value","Fruits"],["value","C\xe9r\xe9ales"],["formControlName","description","rows","4","placeholder","D\xe9crivez votre produit...","required","",1,"w-full","bg-white","border","border-gray-300","rounded-lg","px-3","sm:px-4","py-2","sm:py-3","text-base","focus:ring-2","focus:ring-senteranga-green","focus:border-transparent","outline-none"],[1,"grid","grid-cols-2","sm:grid-cols-4","gap-3","sm:gap-4"],["type","number","formControlName","quantite","placeholder","Quantit\xe9","min","0","required","",1,"w-full","bg-white","border","border-gray-300","rounded-lg","px-3","sm:px-4","py-2","sm:py-3","text-base","focus:ring-2","focus:ring-senteranga-green","focus:border-transparent","outline-none"],["type","number","formControlName","quantiteMinimale","placeholder","Min","min","0","required","",1,"w-full","bg-white","border","border-gray-300","rounded-lg","px-3","sm:px-4","py-2","sm:py-3","text-base","focus:ring-2","focus:ring-senteranga-green","focus:border-transparent","outline-none"],["formControlName","unite","required","",1,"w-full","bg-white","border","border-gray-300","rounded-lg","px-3","sm:px-4","py-2","sm:py-3","text-base","focus:ring-2","focus:ring-senteranga-green","focus:border-transparent","outline-none"],["value","kg"],["value","tonne"],["value","litre"],["value","unite"],["type","number","formControlName","prixParUnite","placeholder","Prix","min","0","required","",1,"w-full","bg-white","border","border-gray-300","rounded-lg","px-3","sm:px-4","py-2","sm:py-3","text-base","focus:ring-2","focus:ring-senteranga-green","focus:border-transparent","outline-none"],["formControlName","localisation","placeholder","Ville, Village, etc.","required","",1,"w-full","bg-white","border","border-gray-300","rounded-lg","px-3","sm:px-4","py-2","sm:py-3","text-base","focus:ring-2","focus:ring-senteranga-green","focus:border-transparent","outline-none"],[1,"border-t","pt-4"],[1,"block","text-sm","font-bold","mb-3","text-gray-900"],[1,"space-y-3"],[1,"flex","items-center"],["type","radio","id","product","formControlName","publicationType","value","product",1,"mr-3"],["for","product",1,"text-sm","font-medium"],["type","radio","id","announcement","formControlName","publicationType","value","announcement",1,"mr-3"],["for","announcement",1,"text-sm","font-medium"],["class","border-t pt-4",4,"ngIf"],[1,"border-l-4","border-senteranga-green","pl-4"],[1,"text-red-600","font-bold"],[1,"ml-2","inline-block","px-2","py-1","bg-red-50","text-red-700","text-xs","font-semibold","rounded"],[1,"flex","flex-col","sm:flex-row","gap-2","sm:gap-3","mb-4"],["type","file","id","fileInput","multiple","","accept","image/*",1,"flex-1","border","border-gray-300","rounded-lg","px-3","sm:px-4","py-2","sm:py-3","text-sm","focus:ring-2","focus:ring-senteranga-green","focus:border-transparent","outline-none",3,"change"],["type","button",1,"px-4","py-2","sm:py-3","bg-blue-600","text-white","rounded-lg","hover:bg-blue-700","font-medium","text-sm","sm:text-base","whitespace-nowrap",3,"click"],["class","border border-gray-300 rounded-lg p-3 sm:p-4 bg-gray-100 mb-4",4,"ngIf"],["class","text-sm font-medium text-green-600 mt-2 p-3 bg-green-50 rounded-lg",4,"ngIf"],["class","text-sm font-medium text-red-600 mt-2 p-3 bg-red-50 rounded-lg border border-red-200",4,"ngIf"],["id","cameraCanvas",2,"display","none"],[1,"flex","flex-col","sm:flex-row","gap-2","sm:gap-3","pt-2","sm:pt-4"],["type","submit",1,"px-6","py-2","sm:py-3","bg-senteranga-green","text-white","rounded-lg","hover:bg-green-700","disabled:bg-gray-400","disabled:cursor-not-allowed","font-semibold","text-sm","sm:text-base","flex","items-center","justify-center","gap-2",3,"disabled"],["class","w-4 h-4 animate-spin","fill","none","stroke","currentColor","viewBox","0 0 24 24",4,"ngIf"],["type","button",1,"px-6","py-2","sm:py-3","bg-gray-200","text-gray-700","rounded-lg","hover:bg-gray-300","font-medium","text-sm","sm:text-base",3,"click"],["class","mt-6 sm:mt-8 pt-6 sm:pt-8 border-t",4,"ngIf"],[1,"text-lg","sm:text-xl","font-bold","mb-3","text-gray-900"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","inline","mr-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"],[1,"text-sm","text-gray-600","mb-4"],[1,"w-full","px-6","py-2","sm:py-3","bg-blue-600","text-white","rounded-lg","hover:bg-blue-700","font-medium","text-sm","sm:text-base"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M3.055 11H5a2 2 0 012 2v1a2 2 0 002 2 2 2 0 012 2v2.945M8 3.935V5.5A2.5 2.5 0 0010.5 8h.5a2 2 0 012 2 2 2 0 104 0 2 2 0 012-2h1.064M15 20.488V18a2 2 0 012-2h3.064"],["class","text-sm text-gray-600 py-6 text-center bg-gray-50 rounded-lg",4,"ngIf"],["class","space-y-3 sm:space-y-4",4,"ngIf"],[1,"space-y-4","sm:space-y-6"],[1,"text-lg","sm:text-xl","font-bold","mb-4","text-gray-900"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"],["formControlName","bankName","placeholder","Nom de la banque",1,"w-full","bg-white","border","border-gray-300","rounded-lg","px-3","sm:px-4","py-2","sm:py-3","text-base","focus:ring-2","focus:ring-senteranga-green","focus:border-transparent","outline-none"],["formControlName","accountNumber","placeholder","IBAN ou num\xe9ro de compte",1,"w-full","bg-white","border","border-gray-300","rounded-lg","px-3","sm:px-4","py-2","sm:py-3","text-base","focus:ring-2","focus:ring-senteranga-green","focus:border-transparent","outline-none"],[1,"flex","flex-col","sm:flex-row","gap-2","sm:gap-3"],["type","submit",1,"flex-1","px-4","py-2","sm:py-3","bg-green-600","text-white","rounded-lg","hover:bg-green-700","font-medium","text-sm","sm:text-base"],["type","button",1,"flex-1","px-4","py-2","sm:py-3","bg-gray-200","text-gray-700","rounded-lg","hover:bg-gray-300","font-medium","text-sm","sm:text-base",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"],["class","space-y-3",4,"ngIf"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","inline","mr-1"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"],["type","date","formControlName","periodeApproximativeDebut","required","",1,"w-full","bg-white","border","border-gray-300","rounded-lg","px-3","sm:px-4","py-2","sm:py-3","text-base","focus:ring-2","focus:ring-senteranga-green","focus:border-transparent","outline-none"],["type","date","formControlName","periodeApproximativeFin","required","",1,"w-full","bg-white","border","border-gray-300","rounded-lg","px-3","sm:px-4","py-2","sm:py-3","text-base","focus:ring-2","focus:ring-senteranga-green","focus:border-transparent","outline-none"],[1,"mt-3","p-3","bg-blue-50","border","border-blue-200","rounded-lg"],[1,"text-sm","text-blue-700"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"border","border-gray-300","rounded-lg","p-3","sm:p-4","bg-gray-100","mb-4"],["id","cameraVideo","autoplay","","playsinline","",1,"w-full","rounded-lg","mb-3",2,"max-height","300px"],["type","button",1,"w-full","px-4","py-2","sm:py-3","bg-green-600","text-white","rounded-lg","hover:bg-green-700","font-medium","text-sm","sm:text-base",3,"click"],[1,"text-sm","font-medium","text-green-600","mt-2","p-3","bg-green-50","rounded-lg"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5 13l4 4L19 7"],[1,"text-sm","font-medium","text-red-600","mt-2","p-3","bg-red-50","rounded-lg","border","border-red-200"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","animate-spin"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"],[1,"mt-6","sm:mt-8","pt-6","sm:pt-8","border-t"],[1,"text-lg","font-bold","mb-6","text-gray-900"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-6"],["class","bg-white rounded-xl overflow-hidden shadow-md hover:shadow-xl transition-shadow",4,"ngFor","ngForOf"],[1,"bg-white","rounded-xl","overflow-hidden","shadow-md","hover:shadow-xl","transition-shadow"],[1,"relative","h-48","rounded-t-xl","overflow-hidden","bg-gray-200"],["class","w-full h-full flex items-center justify-center bg-gray-100",4,"ngIf"],[1,"absolute","bottom-3","left-3","bg-white/95","px-3","py-1","rounded-md","shadow-sm"],[1,"text-sm","font-bold","text-gray-900"],[1,"absolute","top-3","right-3","px-2","py-1","rounded-full","text-xs","font-semibold",3,"ngClass"],[4,"ngIf"],["class","absolute top-3 left-3 px-2 py-1 rounded-full text-xs font-semibold bg-purple-500 text-white",4,"ngIf"],[1,"p-4","space-y-3"],[1,"flex","items-center","gap-2"],[1,"px-2","py-1","rounded","text-xs","font-semibold","bg-blue-50","text-blue-600"],[1,"space-y-1","text-xs","font-medium","text-gray-900"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-3","h-3","inline","mr-1"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"],[1,"text-xs","text-gray-600","pt-2","border-t"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 11a3 3 0 11-6 0 3 3 0 016 0z"],["class","text-xs text-purple-600 pt-2 border-t bg-purple-50 p-2 rounded",4,"ngIf"],[1,"w-full","h-full","flex","items-center","justify-center","bg-gray-100"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-12","h-12","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"absolute","top-3","left-3","px-2","py-1","rounded-full","text-xs","font-semibold","bg-purple-500","text-white"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M11 5.882V19.24a1.76 1.76 0 01-3.417.592l-2.147-6.15M18 13a3 3 0 100-6M5.436 13.683A4.001 4.001 0 017 6h1.832c4.1 0 7.625-1.234 9.168-3v14c-1.543-1.766-5.067-3-9.168-3H7a3.988 3.988 0 01-1.564-.317z"],[1,"text-xs","text-purple-600","pt-2","border-t","bg-purple-50","p-2","rounded"],["class","block mt-1",4,"ngIf"],[1,"block","mt-1"],[1,"inline-flex","text-xs","px-2","py-1","rounded-full","font-semibold",3,"ngClass"],[1,"text-sm","text-gray-600","py-6","text-center","bg-gray-50","rounded-lg"],[1,"space-y-3","sm:space-y-4"],["class","border border-gray-300 rounded-lg p-4 hover:shadow transition",4,"ngFor","ngForOf"],[1,"border","border-gray-300","rounded-lg","p-4","hover:shadow","transition"],[1,"flex","flex-col","sm:flex-row","sm:items-center","sm:justify-between","gap-3"],[1,"flex-1"],[1,"font-semibold","text-gray-900"],[1,"text-sm","text-gray-600","mt-1"],[1,"flex","items-center","gap-2","w-full","sm:w-auto"],["type","number","min","1",1,"w-16","bg-white","border","border-gray-300","rounded-lg","px-2","py-2","text-sm","focus:ring-2","focus:ring-senteranga-green","outline-none",3,"ngModelChange","ngModel"],[1,"flex-1","sm:flex-none","px-4","py-2","bg-senteranga-green","text-white","rounded-lg","hover:bg-green-700","font-medium","text-sm",3,"click"],["class","border-l-4 border-orange-500 pl-3 sm:pl-4 py-2",4,"ngFor","ngForOf"],[1,"border-l-4","border-orange-500","pl-3","sm:pl-4","py-2"],[1,"font-semibold","text-gray-900","text-sm"],[1,"text-xs","text-gray-600","mt-1"]],template:function(r,o){if(1&r&&(e.nrm(0,"app-header"),e.j41(1,"section",0)(2,"div",1)(3,"h1",2),e.EFF(4,"Espace Agriculteur"),e.k0s(),e.j41(5,"div",3)(6,"div",4)(7,"div",5)(8,"h2",6),e.qSk(),e.j41(9,"svg",7),e.nrm(10,"path",8),e.k0s(),e.EFF(11," Publier un produit "),e.k0s(),e.joV(),e.j41(12,"form",9),e.bIt("ngSubmit",function(){return o.publishProduct()}),e.j41(13,"div",10)(14,"div")(15,"label",11),e.EFF(16,"Titre *"),e.k0s(),e.nrm(17,"input",12),e.k0s(),e.j41(18,"div")(19,"label",11),e.EFF(20,"Cat\xe9gorie *"),e.k0s(),e.j41(21,"select",13)(22,"option",14),e.EFF(23,"S\xe9lectionner une cat\xe9gorie"),e.k0s(),e.j41(24,"option",15),e.EFF(25,"L\xe9gumes"),e.k0s(),e.j41(26,"option",16),e.EFF(27,"Fruits"),e.k0s(),e.j41(28,"option",17),e.EFF(29,"C\xe9r\xe9ales"),e.k0s()()()(),e.j41(30,"div")(31,"label",11),e.EFF(32,"Description *"),e.k0s(),e.nrm(33,"textarea",18),e.k0s(),e.j41(34,"div",19)(35,"div")(36,"label",11),e.EFF(37,"Quantit\xe9 *"),e.k0s(),e.nrm(38,"input",20),e.k0s(),e.j41(39,"div")(40,"label",11),e.EFF(41,"Min. *"),e.k0s(),e.nrm(42,"input",21),e.k0s(),e.j41(43,"div")(44,"label",11),e.EFF(45,"Unit\xe9 *"),e.k0s(),e.j41(46,"select",22)(47,"option",14),e.EFF(48,"Unit\xe9"),e.k0s(),e.j41(49,"option",23),e.EFF(50,"kg"),e.k0s(),e.j41(51,"option",24),e.EFF(52,"Tonne"),e.k0s(),e.j41(53,"option",25),e.EFF(54,"Litre"),e.k0s(),e.j41(55,"option",26),e.EFF(56,"Unit\xe9"),e.k0s()()(),e.j41(57,"div")(58,"label",11),e.EFF(59,"Prix/unit\xe9 *"),e.k0s(),e.nrm(60,"input",27),e.k0s()(),e.j41(61,"div")(62,"label",11),e.EFF(63,"Localisation *"),e.k0s(),e.nrm(64,"input",28),e.k0s(),e.j41(65,"div",29)(66,"label",30),e.EFF(67,"Type de publication"),e.k0s(),e.j41(68,"div",31)(69,"div",32),e.nrm(70,"input",33),e.j41(71,"label",34),e.EFF(72,"Produit imm\xe9diat \u2014 Disponible tout de suite"),e.k0s()(),e.j41(73,"div",32),e.nrm(74,"input",35),e.j41(75,"label",36),e.EFF(76,"Annonce \u2014 Disponible \xe0 une p\xe9riode d\xe9finie"),e.k0s()()()(),e.DNE(77,w,21,0,"div",37),e.j41(78,"div",38)(79,"label",30),e.EFF(80," \u{1f4f7} Images "),e.j41(81,"span",39),e.EFF(82,"*"),e.k0s(),e.j41(83,"span",40),e.EFF(84,"OBLIGATOIRE"),e.k0s()(),e.j41(85,"div",41)(86,"input",42),e.bIt("change",function(l){return o.onImagesSelected(l)}),e.k0s(),e.j41(87,"button",43),e.bIt("click",function(){return o.cameraActive?o.stopCamera():o.startCamera()}),e.EFF(88),e.k0s()(),e.DNE(89,D,4,0,"div",44)(90,A,4,1,"div",45)(91,M,4,0,"div",46),e.k0s(),e.nrm(92,"canvas",47),e.j41(93,"div",48)(94,"button",49),e.DNE(95,I,2,0,"svg",50),e.j41(96,"span"),e.EFF(97),e.k0s()(),e.j41(98,"button",51),e.bIt("click",function(){return o.resetProductForm()}),e.EFF(99," Annuler "),e.k0s()()(),e.DNE(100,U,7,2,"div",52),e.k0s(),e.j41(101,"div",5)(102,"h2",53),e.qSk(),e.j41(103,"svg",54),e.nrm(104,"path",55),e.k0s(),e.EFF(105," Demande de subvention / investissement "),e.k0s(),e.joV(),e.j41(106,"p",56),e.EFF(107,"Formulaires de demande (subvention / investissement) \u2014 visibilit\xe9 pour les institutions et investisseurs."),e.k0s(),e.j41(108,"button",57),e.EFF(109," Faire une demande "),e.k0s()(),e.j41(110,"div",5)(111,"h2",53),e.qSk(),e.j41(112,"svg",54),e.nrm(113,"path",58),e.k0s(),e.EFF(114," Catalogue de semences "),e.k0s(),e.joV(),e.j41(115,"p",56),e.EFF(116,"Consultez le catalogue, commandez et payez pour am\xe9liorer votre production."),e.k0s(),e.DNE(117,N,2,0,"div",59)(118,G,2,1,"div",60),e.k0s()(),e.j41(119,"aside",61)(120,"div",5)(121,"h3",62),e.qSk(),e.j41(122,"svg",54),e.nrm(123,"path",63),e.k0s(),e.EFF(124," Compte bancaire "),e.k0s(),e.joV(),e.j41(125,"p",56),e.EFF(126,"Ajouter un compte pour recevoir paiements et subventions."),e.k0s(),e.j41(127,"form",9),e.bIt("ngSubmit",function(){return o.saveBankAccount()}),e.j41(128,"div")(129,"label",11),e.EFF(130,"Banque"),e.k0s(),e.nrm(131,"input",64),e.k0s(),e.j41(132,"div")(133,"label",11),e.EFF(134,"Num\xe9ro de compte"),e.k0s(),e.nrm(135,"input",65),e.k0s(),e.j41(136,"div",66)(137,"button",67),e.EFF(138," \u2713 Enregistrer "),e.k0s(),e.j41(139,"button",68),e.bIt("click",function(){return o.bankForm.reset()}),e.EFF(140," Annuler "),e.k0s()()()(),e.j41(141,"div",5)(142,"h3",62),e.qSk(),e.j41(143,"svg",54),e.nrm(144,"path",69),e.k0s(),e.EFF(145," Alertes / Conseils "),e.k0s(),e.joV(),e.j41(146,"p",56),e.EFF(147,"Recevez des alertes filtr\xe9es par r\xe9gion."),e.k0s(),e.DNE(148,L,2,0,"div",59)(149,z,2,1,"ul",70),e.k0s()()()()(),e.nrm(150,"app-footer")),2&r){let s;e.R7$(12),e.AVh("opacity-50",o.isPublishing)("pointer-events-none",o.isPublishing),e.Y8G("formGroup",o.productForm),e.R7$(65),e.Y8G("ngIf","announcement"===(null==(s=o.productForm.get("publicationType"))?null:s.value)),e.R7$(11),e.SpI(" ",o.cameraActive?"\u2715 Fermer":"\u{1f4f7} Photo"," "),e.R7$(),e.Y8G("ngIf",o.cameraActive),e.R7$(),e.Y8G("ngIf",o.uploadedImageCount>0),e.R7$(),e.Y8G("ngIf",0===o.uploadedImageCount),e.R7$(3),e.Y8G("disabled",o.isPublishing),e.R7$(),e.Y8G("ngIf",o.isPublishing),e.R7$(2),e.JRh(o.isPublishing?"Publication en cours...":"Publier le produit"),e.R7$(3),e.Y8G("ngIf",o.products.length>0),e.R7$(17),e.Y8G("ngIf",0===o.seeds.length),e.R7$(),e.Y8G("ngIf",o.seeds.length>0),e.R7$(9),e.Y8G("formGroup",o.bankForm),e.R7$(21),e.Y8G("ngIf",0===o.alerts.length),e.R7$(),e.Y8G("ngIf",o.alerts.length>0)}},dependencies:[g.MD,g.YU,g.Sq,g.bT,g.vh,_.iI,k.l,F.n,i.X1,i.qT,i.xH,i.y7,i.me,i.Q0,i.wz,i.Fm,i.BC,i.cb,i.YS,i.VZ,i.j4,i.JD,i.YN,i.vS],styles:["input[_ngcontent-%COMP%]:focus, textarea[_ngcontent-%COMP%]:focus, select[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 3px #00843d1a}button[_ngcontent-%COMP%], input[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{transition:all .3s ease}@media (max-width: 640px){button[_ngcontent-%COMP%], input[type=submit][_ngcontent-%COMP%], input[type=button][_ngcontent-%COMP%]{min-height:44px}input[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{font-size:16px}video[_ngcontent-%COMP%]{width:100%;object-fit:cover}.grid-cols-2[_ngcontent-%COMP%]{grid-template-columns:1fr 1fr;gap:.75rem}.flex-col.sm\\:flex-row[_ngcontent-%COMP%]{gap:.5rem}aside[_ngcontent-%COMP%]{order:2}}@media (min-width: 640px) and (max-width: 1024px){.grid-cols-1.sm\\:grid-cols-2[_ngcontent-%COMP%]{grid-template-columns:1fr 1fr}.grid-cols-2.sm\\:grid-cols-4[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}@media (min-width: 1024px){.grid-cols-2.sm\\:grid-cols-4[_ngcontent-%COMP%]{grid-template-columns:repeat(4,1fr)}aside[_ngcontent-%COMP%]{position:sticky;top:120px}}@media (max-width: 640px){h1[_ngcontent-%COMP%]{font-size:1.5rem;line-height:2rem}h2[_ngcontent-%COMP%]{font-size:1.125rem;line-height:1.75rem}h3[_ngcontent-%COMP%]{font-size:1rem;line-height:1.5rem}}.bg-yellow-100[_ngcontent-%COMP%], .bg-green-100[_ngcontent-%COMP%], .bg-red-100[_ngcontent-%COMP%]{white-space:nowrap}.border-gray-300[_ngcontent-%COMP%]{border-width:1px}.focus\\:ring-2[_ngcontent-%COMP%]{transition:box-shadow .2s ease}html[_ngcontent-%COMP%]{scroll-behavior:smooth}#cameraVideo[_ngcontent-%COMP%]{background:#000;border-radius:.5rem;display:block;width:100%}.border-gray-300[_ngcontent-%COMP%]:hover{transition:all .2s ease}form[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{margin-bottom:1rem}@media (max-width: 640px){form[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{margin-bottom:.75rem}}@media (prefers-reduced-motion: reduce){*[_ngcontent-%COMP%]{animation:none!important;transition:none!important}}"]})}}return n})()}}]);