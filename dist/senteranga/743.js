"use strict";(self.webpackChunksenteranga=self.webpackChunksenteranga||[]).push([[743],{5473:(C,h,u)=>{u.d(h,{n:()=>k});var v=u(177),i=u(4438);let k=(()=>{class f{static{this.\u0275fac=function(b){return new(b||f)}}static{this.\u0275cmp=i.VBU({type:f,selectors:[["app-footer"]],standalone:!0,features:[i.aNF],decls:45,vars:0,consts:[[1,"bg-senteranga-green","text-white","py-8","sm:py-12","md:py-16","px-4","sm:px-6","md:px-8"],[1,"max-w-7xl","mx-auto"],[1,"grid","grid-cols-1","sm:grid-cols-2","lg:grid-cols-3","gap-8","sm:gap-10","md:gap-12","mb-8","sm:mb-10","md:mb-12"],[1,"sm:col-span-2","lg:col-span-1"],[1,"flex","items-center","gap-2","sm:gap-3","mb-4"],["src","/images/logo-senteranga.png","alt","SenTeranga Logo",1,"h-12","sm:h-14","w-auto"],[1,"text-2xl","sm:text-3xl","font-bold"],[1,"text-sm","sm:text-base","text-green-100","leading-relaxed","mb-4","sm:mb-6"],["src","/icons/social-media.svg","alt","Social Media",1,"h-6","sm:h-8"],[1,"text-lg","sm:text-xl","font-bold","mb-4","sm:mb-6"],[1,"space-y-2","sm:space-y-3"],["href","#",1,"text-base","sm:text-lg","hover:text-green-100","transition-colors"],["href","#",1,"text-sm","sm:text-base","hover:text-green-100","transition-colors"],[1,"border-t","border-green-600","pt-6","sm:pt-8","flex","flex-col","sm:flex-row","justify-between","items-center","gap-3","sm:gap-4","text-center","sm:text-left"],[1,"text-xs","sm:text-sm","text-green-100"]],template:function(b,d){1&b&&(i.j41(0,"footer",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),i.nrm(5,"img",5),i.j41(6,"span",6),i.EFF(7,"SenTeranga"),i.k0s()(),i.j41(8,"p",7),i.EFF(9," L'interface institutionnelle et professionnelle du syst\xe8me alimentaire national s\xe9n\xe9galais. Autonomiser les agriculteurs, connecter les march\xe9s et construire un avenir durable. "),i.k0s(),i.nrm(10,"img",8),i.k0s(),i.j41(11,"div")(12,"h3",9),i.EFF(13,"March\xe9s Digital"),i.k0s(),i.j41(14,"ul",10)(15,"li")(16,"a",11),i.EFF(17,"March\xe9 Agricol"),i.k0s()(),i.j41(18,"li")(19,"a",11),i.EFF(20,"March\xe9 \xc9levage"),i.k0s()(),i.j41(21,"li")(22,"a",11),i.EFF(23,"March\xe9 P\xeache"),i.k0s()()()(),i.j41(24,"div")(25,"h3",9),i.EFF(26,"Support"),i.k0s(),i.j41(27,"ul",10)(28,"li")(29,"a",12),i.EFF(30,"Help Center"),i.k0s()(),i.j41(31,"li")(32,"a",12),i.EFF(33,"Contact Us"),i.k0s()(),i.j41(34,"li")(35,"a",12),i.EFF(36,"Privacy Policy"),i.k0s()(),i.j41(37,"li")(38,"a",12),i.EFF(39,"Terms of Service"),i.k0s()()()()(),i.j41(40,"div",13)(41,"p",14),i.EFF(42,"\xa9 2024 SENTERANGA. All rights reserved."),i.k0s(),i.j41(43,"p",14),i.EFF(44,"Powered by Readdy"),i.k0s()()()())},dependencies:[v.MD],encapsulation:2})}}return f})()},743:(C,h,u)=>{u.r(h),u.d(h,{DashboardAgriculteurComponent:()=>ae});var v=u(467),i=u(177),k=u(5776),f=u(4121),w=u(5473),l=u(4341),b=u(8032),d=u.n(b),e=u(4438),D=u(8490),A=u(6868);const I=(n,s,t)=>({"bg-yellow-500 text-white":n,"bg-green-500 text-white":s,"bg-red-500 text-white":t}),M=(n,s,t)=>({"bg-yellow-100 text-yellow-800":n,"bg-green-100 text-green-800":s,"bg-red-100 text-red-800":t}),R=(n,s)=>({"bg-yellow-100 text-yellow-800":n,"bg-green-100 text-green-800":s});function P(n,s){1&n&&(e.j41(0,"div",29)(1,"label",30),e.qSk(),e.j41(2,"svg",76),e.nrm(3,"path",77),e.k0s(),e.EFF(4," P\xe9riode de disponibilit\xe9 "),e.k0s(),e.joV(),e.j41(5,"div",10)(6,"div")(7,"label",11),e.EFF(8,"D\xe9but de p\xe9riode *"),e.k0s(),e.nrm(9,"input",78),e.k0s(),e.j41(10,"div")(11,"label",11),e.EFF(12,"Fin de p\xe9riode *"),e.k0s(),e.nrm(13,"input",79),e.k0s()(),e.j41(14,"div",80)(15,"p",81)(16,"strong"),e.qSk(),e.j41(17,"svg",76),e.nrm(18,"path",82),e.k0s(),e.EFF(19," Note : "),e.k0s(),e.EFF(20," Cette annonce sera indisponible jusqu'\xe0 validation par l'administration, puis disponible uniquement pendant la p\xe9riode d\xe9finie. "),e.k0s()()())}function S(n,s){if(1&n){const t=e.RV6();e.j41(0,"div",83),e.nrm(1,"video",84),e.j41(2,"button",85),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.capturePhoto())}),e.EFF(3," \u{1f4f8} Capturer "),e.k0s()()}}function O(n,s){if(1&n&&(e.j41(0,"div",86),e.qSk(),e.j41(1,"svg",76),e.nrm(2,"path",87),e.k0s(),e.EFF(3),e.k0s()),2&n){const t=e.XpG();e.R7$(3),e.SpI(" ",t.uploadedImageCount," image(s) s\xe9lectionn\xe9e(s) ")}}function $(n,s){1&n&&(e.j41(0,"div",88),e.qSk(),e.j41(1,"svg",76),e.nrm(2,"path",74),e.k0s(),e.EFF(3," Aucune image s\xe9lectionn\xe9e. L'image est obligatoire pour publier un produit. "),e.k0s())}function T(n,s){1&n&&(e.qSk(),e.j41(0,"svg",89),e.nrm(1,"path",90),e.k0s())}function V(n,s){1&n&&(e.j41(0,"div",114),e.qSk(),e.j41(1,"svg",115),e.nrm(2,"path",116),e.k0s()())}function B(n,s){1&n&&(e.j41(0,"span"),e.qSk(),e.j41(1,"svg",108),e.nrm(2,"path",117),e.k0s(),e.EFF(3," En attente "),e.k0s())}function N(n,s){1&n&&(e.j41(0,"span"),e.qSk(),e.j41(1,"svg",108),e.nrm(2,"path",87),e.k0s(),e.EFF(3," Valid\xe9 "),e.k0s())}function U(n,s){1&n&&(e.j41(0,"span"),e.qSk(),e.j41(1,"svg",108),e.nrm(2,"path",118),e.k0s(),e.EFF(3," Rejet\xe9 "),e.k0s())}function G(n,s){1&n&&(e.j41(0,"div",119),e.qSk(),e.j41(1,"svg",108),e.nrm(2,"path",120),e.k0s(),e.EFF(3," Annonce "),e.k0s())}function q(n,s){if(1&n&&(e.j41(0,"span",123)(1,"span",124),e.EFF(2),e.k0s()()),2&n){const t=e.XpG(2).$implicit,r=e.XpG(2);e.R7$(),e.Y8G("ngClass",e.sMw(2,M,"en_attente"===r.getAnnouncementStatus(t),"validee"===r.getAnnouncementStatus(t),"rejetee"===r.getAnnouncementStatus(t))),e.R7$(),e.SpI(" Statut: ","en_attente"===r.getAnnouncementStatus(t)?"\u23f3 Validation en attente":"validee"===r.getAnnouncementStatus(t)?"\u2713 Valid\xe9e":"\u2717 Rejet\xe9e"," ")}}function L(n,s){if(1&n&&(e.j41(0,"div",121),e.EFF(1," \u{1f4c5} "),e.j41(2,"strong"),e.EFF(3,"P\xe9riode approximative:"),e.k0s(),e.nrm(4,"br"),e.EFF(5),e.nI1(6,"date"),e.nI1(7,"date"),e.DNE(8,q,3,6,"span",122),e.k0s()),2&n){const t=e.XpG().$implicit,r=e.XpG(2);e.R7$(5),e.Lme(" De ",e.i5U(6,3,r.getAnnouncementStartDate(t),"dd/MM/yyyy")," \xe0 ",e.i5U(7,6,r.getAnnouncementEndDate(t),"dd/MM/yyyy")," "),e.R7$(3),e.Y8G("ngIf",r.getAnnouncementStatus(t))}}function Y(n,s){if(1&n&&(e.j41(0,"div",96)(1,"div",97),e.DNE(2,V,3,0,"div",98),e.j41(3,"div",99)(4,"span",100),e.EFF(5),e.k0s()(),e.j41(6,"div",101),e.DNE(7,B,4,0,"span",102)(8,N,4,0,"span",102)(9,U,4,0,"span",102),e.k0s(),e.DNE(10,G,4,0,"div",103),e.k0s(),e.j41(11,"div",104)(12,"div",105)(13,"span",106),e.EFF(14),e.k0s()(),e.j41(15,"div",107)(16,"div"),e.qSk(),e.j41(17,"svg",108),e.nrm(18,"path",8),e.k0s(),e.EFF(19),e.k0s(),e.joV(),e.j41(20,"div"),e.qSk(),e.j41(21,"svg",108),e.nrm(22,"path",93),e.k0s(),e.EFF(23),e.k0s(),e.joV(),e.j41(24,"div"),e.qSk(),e.j41(25,"svg",108),e.nrm(26,"path",60),e.k0s(),e.EFF(27),e.k0s(),e.joV(),e.j41(28,"div"),e.qSk(),e.j41(29,"svg",108),e.nrm(30,"path",109),e.k0s(),e.EFF(31),e.k0s()(),e.joV(),e.j41(32,"div",110),e.qSk(),e.j41(33,"svg",108),e.nrm(34,"path",111)(35,"path",112),e.k0s(),e.EFF(36),e.k0s(),e.DNE(37,L,9,9,"div",113),e.k0s()()),2&n){const t=s.$implicit,r=e.XpG(2);e.R7$(),e.xc7("background-image",t.images&&t.images.length>0?"url("+t.images[0]+")":"none")("background-size","cover")("background-position","center"),e.R7$(),e.Y8G("ngIf",!t.images||0===t.images.length),e.R7$(3),e.JRh(t.titre),e.R7$(),e.Y8G("ngClass",e.sMw(22,I,"en_attente"===t.statutValidation,"valid\xe9"===t.statutValidation,"rejet\xe9"===t.statutValidation)),e.R7$(),e.Y8G("ngIf","en_attente"===t.statutValidation),e.R7$(),e.Y8G("ngIf","valid\xe9"===t.statutValidation),e.R7$(),e.Y8G("ngIf","rejet\xe9"===t.statutValidation),e.R7$(),e.Y8G("ngIf",r.isAnnouncement(t)),e.R7$(4),e.SpI(" ",t.categorie," "),e.R7$(5),e.Lme(" Quantit\xe9: ",t.quantite," ",t.unite," "),e.R7$(4),e.Lme(" Minimum: ",t.quantiteMinimale||"-"," ",t.unite," "),e.R7$(4),e.SpI(" Prix/unit\xe9: ",t.prixParUnite||"-"," FCFA "),e.R7$(4),e.SpI(" Total: ",t.prix," FCFA "),e.R7$(5),e.SpI(" ",t.localisation," "),e.R7$(),e.Y8G("ngIf",r.isAnnouncement(t))}}function z(n,s){if(1&n&&(e.j41(0,"div",91)(1,"h4",92),e.qSk(),e.j41(2,"svg",54),e.nrm(3,"path",93),e.k0s(),e.EFF(4),e.k0s(),e.joV(),e.j41(5,"div",94),e.DNE(6,Y,38,26,"div",95),e.k0s()()),2&n){const t=e.XpG();e.R7$(4),e.SpI(" Mes produits (",t.products.length,") "),e.R7$(2),e.Y8G("ngForOf",t.products)}}function X(n,s){1&n&&(e.j41(0,"div",125),e.qSk(),e.j41(1,"svg",126),e.nrm(2,"path",127),e.k0s(),e.joV(),e.j41(3,"p"),e.EFF(4,"Aucune r\xe9servation pour le moment"),e.k0s()())}function H(n,s){if(1&n){const t=e.RV6();e.j41(0,"div",130)(1,"div",131)(2,"div",132)(3,"div",133),e.EFF(4),e.k0s(),e.j41(5,"div")(6,"h4",134),e.EFF(7),e.k0s(),e.j41(8,"p",135),e.EFF(9),e.k0s()()(),e.j41(10,"span",136),e.EFF(11," Active "),e.k0s()(),e.j41(12,"div",137)(13,"div",138)(14,"div",139),e.EFF(15,"Client int\xe9ress\xe9 :"),e.k0s(),e.j41(16,"div",140),e.EFF(17,' Informations confidentielles - Utilisez le bouton "Valider" pour accepter la r\xe9servation '),e.k0s()()(),e.j41(18,"div",141)(19,"span"),e.qSk(),e.j41(20,"svg",76),e.nrm(21,"path",117),e.k0s(),e.EFF(22),e.nI1(23,"date"),e.k0s(),e.joV(),e.j41(24,"div",142)(25,"button",143),e.bIt("click",function(){const o=e.eBV(t).$implicit,a=e.XpG(2);return e.Njj(a.validateReservation(o,"fulfilled"))}),e.EFF(26," Accepter "),e.k0s(),e.j41(27,"button",144),e.bIt("click",function(){const o=e.eBV(t).$implicit,a=e.XpG(2);return e.Njj(a.validateReservation(o,"cancelled"))}),e.EFF(28," Refuser "),e.k0s()()()()}if(2&n){const t=s.$implicit,r=s.index;e.R7$(4),e.SpI(" ",r+1," "),e.R7$(3),e.JRh(t.productTitle),e.R7$(2),e.SpI("Quantit\xe9: ",t.quantity,""),e.R7$(13),e.SpI(" R\xe9serv\xe9 le ",e.i5U(23,6,t.reservationDate,"dd/MM/yyyy \xe0 HH:mm")," "),e.R7$(3),e.Y8G("disabled","active"!==t.status),e.R7$(2),e.Y8G("disabled","active"!==t.status)}}function W(n,s){if(1&n&&(e.j41(0,"div",128),e.DNE(1,H,29,9,"div",129),e.k0s()),2&n){const t=e.XpG();e.R7$(),e.Y8G("ngForOf",t.reservations)}}function K(n,s){1&n&&(e.j41(0,"div",125),e.qSk(),e.j41(1,"svg",126),e.nrm(2,"path",58),e.k0s(),e.joV(),e.j41(3,"p"),e.EFF(4,"Aucune annonce \xe0 g\xe9rer pour le moment"),e.k0s()())}function J(n,s){if(1&n){const t=e.RV6();e.j41(0,"button",151),e.bIt("click",function(){e.eBV(t);const o=e.XpG().$implicit,a=e.XpG(2);return e.Njj(a.makeAnnouncementAvailable(o))}),e.EFF(1," Rendre Disponible "),e.k0s()}}function Q(n,s){1&n&&(e.j41(0,"span",152),e.EFF(1," \u2713 D\xe9j\xe0 disponible "),e.k0s())}function Z(n,s){if(1&n&&(e.j41(0,"div",130)(1,"div",131)(2,"div",132)(3,"div",145),e.EFF(4),e.k0s(),e.j41(5,"div")(6,"h4",134),e.EFF(7),e.k0s(),e.j41(8,"p",135),e.EFF(9),e.k0s()()(),e.j41(10,"span",146),e.EFF(11," Annonce "),e.k0s()(),e.j41(12,"div",137)(13,"div",138)(14,"span",147),e.EFF(15,"Statut actuel:"),e.k0s(),e.j41(16,"span",148),e.EFF(17),e.k0s()()(),e.j41(18,"div",141)(19,"span"),e.qSk(),e.j41(20,"svg",76),e.nrm(21,"path",117),e.k0s(),e.EFF(22),e.nI1(23,"date"),e.k0s(),e.DNE(24,J,2,0,"button",149)(25,Q,2,0,"span",150),e.k0s()()),2&n){const t=s.$implicit,r=s.index;e.R7$(4),e.SpI(" ",r+1," "),e.R7$(3),e.JRh(t.titre||t.name),e.R7$(2),e.SpI("Cat\xe9gorie: ",t.categorie||t.category,""),e.R7$(7),e.Y8G("ngClass",e.l_i(11,R,"reserv\xe9"===t.statutDisponibilite,"disponible"===t.statutDisponibilite)),e.R7$(),e.SpI(" ","reserv\xe9"===t.statutDisponibilite?"R\xe9serv\xe9":"Disponible"," "),e.R7$(5),e.SpI(" Cr\xe9\xe9 le ",e.i5U(23,8,t.datePublication,"dd/MM/yyyy")," "),e.R7$(2),e.Y8G("ngIf","reserv\xe9"===t.statutDisponibilite),e.R7$(),e.Y8G("ngIf","disponible"===t.statutDisponibilite)}}function ee(n,s){if(1&n&&(e.j41(0,"div",128),e.DNE(1,Z,26,14,"div",129),e.k0s()),2&n){const t=e.XpG();e.R7$(),e.Y8G("ngForOf",t.announcements)}}function te(n,s){1&n&&(e.j41(0,"div",153),e.EFF(1,"Aucun produit trouv\xe9."),e.k0s())}function ne(n,s){if(1&n){const t=e.RV6();e.j41(0,"div",156)(1,"div",157)(2,"div",158)(3,"div",134),e.EFF(4),e.k0s(),e.j41(5,"div",159),e.qSk(),e.j41(6,"svg",76),e.nrm(7,"path",109),e.k0s(),e.EFF(8),e.k0s()(),e.joV(),e.j41(9,"div",160)(10,"input",161),e.mxI("ngModelChange",function(o){const a=e.eBV(t).$implicit,m=e.XpG(2);return e.DH7(m.seedOrderQty[a.id],o)||(m.seedOrderQty[a.id]=o),e.Njj(o)}),e.k0s(),e.j41(11,"button",162),e.bIt("click",function(){const o=e.eBV(t).$implicit,a=e.XpG(2);return e.Njj(a.orderSeed(o))}),e.EFF(12," Commander "),e.k0s()()()()}if(2&n){const t=s.$implicit,r=e.XpG(2);e.R7$(4),e.JRh(t.name),e.R7$(4),e.Lme(" ",t.price," FCFA / ",t.unit||"unit\xe9"," "),e.R7$(2),e.R50("ngModel",r.seedOrderQty[t.id])}}function re(n,s){if(1&n&&(e.j41(0,"div",154),e.DNE(1,ne,13,4,"div",155),e.k0s()),2&n){const t=e.XpG();e.R7$(),e.Y8G("ngForOf",t.seeds)}}function oe(n,s){1&n&&(e.j41(0,"div",153),e.EFF(1,"Aucune alerte pour votre r\xe9gion pour le moment."),e.k0s())}function ie(n,s){if(1&n&&(e.j41(0,"li",164)(1,"div",165),e.EFF(2),e.k0s(),e.j41(3,"div",166),e.EFF(4),e.k0s()()),2&n){const t=s.$implicit;e.R7$(2),e.JRh(t.title),e.R7$(2),e.JRh(t.message)}}function se(n,s){if(1&n&&(e.j41(0,"ul",31),e.DNE(1,ie,5,2,"li",163),e.k0s()),2&n){const t=e.XpG();e.R7$(),e.Y8G("ngForOf",t.alerts)}}let ae=(()=>{class n{constructor(t,r,o){this.dataService=t,this.cartService=r,this.fb=o,this.products=[],this.reservations=[],this.announcements=[],this.seeds=[],this.seedOrderQty={},this.alerts=[],this.currentUser=null,this.uploadedImageCount=0,this.selectedImages=[],this.cameraActive=!1,this.stream=null,this.isPublishing=!1}ngOnInit(){const t=localStorage.getItem("currentUser");this.currentUser=t?JSON.parse(t):null,this.productForm=this.fb.group({titre:["",l.k0.required],description:["",l.k0.required],categorie:["",l.k0.required],quantite:["",[l.k0.required,l.k0.min(0)]],quantiteMinimale:["",[l.k0.required,l.k0.min(0)]],prixParUnite:["",[l.k0.required,l.k0.min(0)]],unite:["",l.k0.required],localisation:["",l.k0.required],publicationType:["product",l.k0.required],periodeApproximativeDebut:[""],periodeApproximativeFin:[""]}),this.bankForm=this.fb.group({bankName:[""],accountNumber:[""]}),this.loadInitial()}loadInitial(){this.currentUser&&(this.dataService.getProductsByUser(this.currentUser.id).subscribe(t=>{this.products=t||[],this.announcements=this.products.filter(r=>this.isAnnouncement(r))}),this.cartService.getReservationsForFarmer(this.currentUser.id).subscribe(t=>this.reservations=t||[]),this.dataService.getSeedsCatalog().subscribe(t=>{this.seeds=t||[],this.seeds.forEach(r=>this.seedOrderQty[r.id]=1)}),this.currentUser.region&&this.dataService.getAlertsByRegion(this.currentUser.region).subscribe(t=>this.alerts=t||[]),this.currentUser.bankAccount&&this.bankForm.patchValue(this.currentUser.bankAccount))}onImagesSelected(t){this.selectedImages=Array.from(t.target.files||[]),this.uploadedImageCount=this.selectedImages.length}startCamera(){this.cameraActive=!0,navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}}).then(t=>{this.stream=t,setTimeout(()=>{const r=document.getElementById("cameraVideo");r&&(r.srcObject=t)},100)}).catch(t=>{console.error("Camera error:",t),d().fire({icon:"error",title:"Erreur d'acc\xe8s \xe0 la cam\xe9ra",text:"V\xe9rifiez les permissions de votre navigateur",confirmButtonColor:"#22c55e"}),this.cameraActive=!1})}capturePhoto(){const t=document.getElementById("cameraVideo"),r=document.getElementById("cameraCanvas");if(!t||!r)return;const o=r.getContext("2d");o&&(r.width=t.videoWidth,r.height=t.videoHeight,o.drawImage(t,0,0),r.toBlob(a=>{if(a){const m=new File([a],`photo-${Date.now()}.jpg`,{type:"image/jpeg"});this.selectedImages.push(m),this.uploadedImageCount=this.selectedImages.length}},"image/jpeg",.95))}stopCamera(){this.cameraActive=!1,this.stream&&(this.stream.getTracks().forEach(t=>t.stop()),this.stream=null)}publishProduct(){var t=this;return(0,v.A)(function*(){if(t.productForm.valid&&t.currentUser){if(0===t.selectedImages.length)return d().fire({icon:"warning",title:"Image obligatoire",text:"Veuillez importer une photo ou en photographier une avant de publier le produit.",confirmButtonColor:"#22c55e"}),void console.warn("Image upload required but none selected");t.isPublishing=!0;try{let r=[];if(t.selectedImages.length){const p="djha1kqvu",g="senteranga_products";r=yield Promise.all(t.selectedImages.map(function(){var E=(0,v.A)(function*(j,le){const _=new FormData;_.append("file",j),_.append("upload_preset",g),_.append("folder","senteranga_products");const y=yield fetch(`https://api.cloudinary.com/v1_1/${p}/image/upload`,{method:"POST",body:_});if(!y.ok)throw new Error(`Cloudinary upload failed: ${y.statusText}`);return(yield y.json()).secure_url});return function(j,le){return E.apply(this,arguments)}}()))}const o=parseFloat(t.productForm.value.quantite)||0,a=parseFloat(t.productForm.value.prixParUnite)||0,m=o*a,c="announcement"===t.productForm.value.publicationType;if(c){const p=t.productForm.value.periodeApproximativeDebut,g=t.productForm.value.periodeApproximativeFin;if(!p||!g)return void d().fire({icon:"warning",title:"P\xe9riodes requises",text:"Veuillez d\xe9finir la p\xe9riode approximative de disponibilit\xe9 pour l'annonce.",confirmButtonColor:"#22c55e"});if(new Date(p)>=new Date(g))return void d().fire({icon:"warning",title:"P\xe9riodes invalides",text:"La p\xe9riode de fin doit \xeatre post\xe9rieure \xe0 la p\xe9riode de d\xe9but.",confirmButtonColor:"#22c55e"})}const x={id:`prod-${Date.now()}`,agriculteurId:t.currentUser.id,titre:t.productForm.value.titre,description:t.productForm.value.description,categorie:t.productForm.value.categorie,quantite:o,quantiteMinimale:parseFloat(t.productForm.value.quantiteMinimale),prix:m,prixParUnite:a,unite:t.productForm.value.unite,localisation:t.productForm.value.localisation,images:r,statutValidation:"en_attente",statutDisponibilite:c?"reserv\xe9":"disponible",datePublication:(new Date).toISOString(),dateMaj:(new Date).toISOString(),isAnnonce:c,periodeApproximativeDebut:c?t.productForm.value.periodeApproximativeDebut:void 0,periodeApproximativeFin:c?t.productForm.value.periodeApproximativeFin:void 0,statutAnnonce:c?"en_attente":void 0};t.dataService.createProduct(x).subscribe({next:p=>{t.products.unshift(p);const g=c?"Votre annonce est en attente de validation par l'administration. Elle sera disponible selon les dates d\xe9finies une fois valid\xe9e.":"Votre produit est en attente de validation par l'administration.";d().fire({icon:"success",title:c?"Annonce publi\xe9e !":"Produit publi\xe9 !",text:g,confirmButtonColor:"#22c55e"}),t.resetProductForm(),t.isPublishing=!1},error:p=>{console.error("Error publishing product",p),d().fire({icon:"error",title:"Erreur de publication",text:"Une erreur s'est produite lors de la publication du produit.",confirmButtonColor:"#22c55e"}),t.isPublishing=!1}})}catch(r){console.error("Image upload failed",r),d().fire({icon:"error",title:"\xc9chec de l'upload",text:"Une erreur s'est produite lors de l'upload des images.",confirmButtonColor:"#22c55e"}),t.isPublishing=!1}}else{const r=Object.keys(t.productForm.controls).filter(a=>t.productForm.get(a)?.invalid);console.warn("Product form invalid controls:",r);const o=r.length?r.join(", "):"inconnus";d().fire({icon:"warning",title:"Champs obligatoires manquants",text:"Veuillez remplir tous les champs obligatoires. Champs invalides: "+o,confirmButtonColor:"#22c55e"})}})()}resetProductForm(){this.productForm.reset(),this.selectedImages=[],this.uploadedImageCount=0,this.stopCamera()}convertImagesToBase64(t){return Promise.all(t.map(r=>new Promise(o=>{const a=new FileReader;a.onload=()=>{o(a.result)},a.readAsDataURL(r)})))}saveBankAccount(){if(!this.currentUser)return;const t=this.bankForm.value;this.dataService.updateUserBankAccount(this.currentUser.id,{bankName:t.bankName||"",accountNumber:t.accountNumber||""}).subscribe({next:o=>{this.currentUser=o,localStorage.setItem("currentUser",JSON.stringify(o)),d().fire({icon:"success",title:"Succ\xe8s",text:"Compte bancaire enregistr\xe9 avec succ\xe8s",confirmButtonColor:"#22c55e"})},error:o=>{console.error(o),d().fire({icon:"error",title:"Erreur",text:"Erreur lors de l'enregistrement du compte bancaire",confirmButtonColor:"#22c55e"})}})}isAnnouncement(t){return!0===t.isAnnonce}getAnnouncementStartDate(t){return t.periodeApproximativeDebut||""}getAnnouncementEndDate(t){return t.periodeApproximativeFin||""}getAnnouncementStatus(t){return t.statutAnnonce||""}orderSeed(t){if(!this.currentUser)return;const r=this.seedOrderQty[t.id]||1,o={id:`order-${Date.now()}`,userId:this.currentUser.id,seedId:t.id,seedName:t.name,quantity:r,total:(t.price||0)*r,status:"paid",createdAt:(new Date).toISOString()};this.dataService.createSeedOrder(o).subscribe({next:a=>{d().fire({icon:"success",title:"Commande pass\xe9e",text:`Commande pass\xe9e: ${o.seedName} x${r}`,confirmButtonColor:"#22c55e"})},error:a=>{console.error(a),d().fire({icon:"error",title:"Erreur de commande",text:"Une erreur s'est produite lors de la commande",confirmButtonColor:"#22c55e"})}})}validateReservation(t,r){const a=`\xcates-vous s\xfbr de vouloir ${"fulfilled"===r?"accepter":"refuser"} cette r\xe9servation de ${t.quantity} ${t.productTitle} ?`;d().fire({title:"Confirmation",text:a,icon:"question",showCancelButton:!0,confirmButtonColor:"fulfilled"===r?"#22c55e":"#ef4444",cancelButtonColor:"#6b7280",confirmButtonText:"fulfilled"===r?"Accepter":"Refuser",cancelButtonText:"Annuler"}).then(m=>{m.isConfirmed&&this.cartService.updateReservationStatus(t.id,r).subscribe({next:c=>{const x=this.reservations.findIndex(E=>E.id===t.id);x>-1&&(this.reservations[x]=c);const p="fulfilled"===r?`Votre r\xe9servation pour ${t.productTitle} a \xe9t\xe9 accept\xe9e !`:`Votre r\xe9servation pour ${t.productTitle} a \xe9t\xe9 refus\xe9e.`,g={id:`notification-${Date.now()}`,userId:t.clientId,title:"fulfilled"===r?"R\xe9servation accept\xe9e":"R\xe9servation refus\xe9e",message:p,type:"reservation",read:!1,createdAt:(new Date).toISOString(),reservationId:t.id},F=JSON.parse(localStorage.getItem("notifications")||"[]");F.push(g),localStorage.setItem("notifications",JSON.stringify(F)),d().fire({icon:"success",title:"fulfilled"===r?"R\xe9servation accept\xe9e":"R\xe9servation refus\xe9e",text:`La r\xe9servation a \xe9t\xe9 ${"fulfilled"===r?"accept\xe9e":"refus\xe9e"} avec succ\xe8s.`,confirmButtonColor:"#22c55e"})},error:c=>{console.error("Error updating reservation:",c),d().fire({icon:"error",title:"Erreur",text:"Une erreur s'est produite lors de la validation de la r\xe9servation.",confirmButtonColor:"#22c55e"})}})})}makeAnnouncementAvailable(t){d().fire({title:"Confirmer la disponibilit\xe9",text:`\xcates-vous s\xfbr de vouloir rendre "${t.titre||t.name}" disponible maintenant ? Les clients pourront l'ajouter \xe0 leur panier.`,icon:"question",showCancelButton:!0,confirmButtonColor:"#22c55e",cancelButtonColor:"#6b7280",confirmButtonText:"Rendre disponible",cancelButtonText:"Annuler"}).then(r=>{r.isConfirmed&&this.dataService.updateProductStatus(t.id,"valid\xe9","disponible").subscribe({next:o=>{const a=this.announcements.findIndex(c=>c.id===t.id);a>-1&&(this.announcements[a]=o);const m=this.products.findIndex(c=>c.id===t.id);m>-1&&(this.products[m]=o),d().fire({icon:"success",title:"Annonce disponible",text:"Le produit est maintenant disponible pour achat imm\xe9diat.",confirmButtonColor:"#22c55e"})},error:o=>{console.error("Error updating announcement:",o),d().fire({icon:"error",title:"Erreur",text:"Une erreur s'est produite lors de la mise \xe0 jour de l'annonce.",confirmButtonColor:"#22c55e"})}})})}static{this.\u0275fac=function(r){return new(r||n)(e.rXU(D.u),e.rXU(A.m),e.rXU(l.ok))}}static{this.\u0275cmp=e.VBU({type:n,selectors:[["app-dashboard-agriculteur"]],standalone:!0,features:[e.aNF],decls:165,vars:25,consts:[[1,"pt-20","w-full","px-4","sm:px-6","md:px-8","py-6","sm:py-8","bg-gray-50"],[1,"max-w-7xl","mx-auto"],[1,"text-2xl","sm:text-3xl","md:text-4xl","font-bold","mb-6","sm:mb-8","text-gray-900"],[1,"grid","grid-cols-1","lg:grid-cols-3","gap-4","sm:gap-6"],[1,"lg:col-span-2","space-y-4","sm:space-y-6"],[1,"bg-white","rounded-lg","shadow","p-4","sm:p-6"],[1,"text-lg","sm:text-xl","font-bold","mb-4","sm:mb-5","text-gray-900"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6","inline","mr-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"],[1,"space-y-3","sm:space-y-4",3,"ngSubmit","formGroup"],[1,"grid","grid-cols-1","sm:grid-cols-2","gap-3","sm:gap-4"],[1,"block","text-sm","font-semibold","mb-2","text-gray-700"],["formControlName","titre","placeholder","Ex: Tomates rouges","required","",1,"w-full","bg-white","border","border-gray-300","rounded-lg","px-3","sm:px-4","py-2","sm:py-3","text-base","focus:ring-2","focus:ring-senteranga-green","focus:border-transparent","outline-none"],["formControlName","categorie","required","",1,"w-full","bg-white","border","border-gray-300","rounded-lg","px-3","sm:px-4","py-2","sm:py-3","text-base","focus:ring-2","focus:ring-senteranga-green","focus:border-transparent","outline-none"],["value",""],["value","L\xe9gumes"],["value","Fruits"],["value","C\xe9r\xe9ales"],["formControlName","description","rows","4","placeholder","D\xe9crivez votre produit...","required","",1,"w-full","bg-white","border","border-gray-300","rounded-lg","px-3","sm:px-4","py-2","sm:py-3","text-base","focus:ring-2","focus:ring-senteranga-green","focus:border-transparent","outline-none"],[1,"grid","grid-cols-2","sm:grid-cols-4","gap-3","sm:gap-4"],["type","number","formControlName","quantite","placeholder","Quantit\xe9","min","0","required","",1,"w-full","bg-white","border","border-gray-300","rounded-lg","px-3","sm:px-4","py-2","sm:py-3","text-base","focus:ring-2","focus:ring-senteranga-green","focus:border-transparent","outline-none"],["type","number","formControlName","quantiteMinimale","placeholder","Min","min","0","required","",1,"w-full","bg-white","border","border-gray-300","rounded-lg","px-3","sm:px-4","py-2","sm:py-3","text-base","focus:ring-2","focus:ring-senteranga-green","focus:border-transparent","outline-none"],["formControlName","unite","required","",1,"w-full","bg-white","border","border-gray-300","rounded-lg","px-3","sm:px-4","py-2","sm:py-3","text-base","focus:ring-2","focus:ring-senteranga-green","focus:border-transparent","outline-none"],["value","kg"],["value","tonne"],["value","litre"],["value","unite"],["type","number","formControlName","prixParUnite","placeholder","Prix","min","0","required","",1,"w-full","bg-white","border","border-gray-300","rounded-lg","px-3","sm:px-4","py-2","sm:py-3","text-base","focus:ring-2","focus:ring-senteranga-green","focus:border-transparent","outline-none"],["formControlName","localisation","placeholder","Ville, Village, etc.","required","",1,"w-full","bg-white","border","border-gray-300","rounded-lg","px-3","sm:px-4","py-2","sm:py-3","text-base","focus:ring-2","focus:ring-senteranga-green","focus:border-transparent","outline-none"],[1,"border-t","pt-4"],[1,"block","text-sm","font-bold","mb-3","text-gray-900"],[1,"space-y-3"],[1,"flex","items-center"],["type","radio","id","product","formControlName","publicationType","value","product",1,"mr-3"],["for","product",1,"text-sm","font-medium"],["type","radio","id","announcement","formControlName","publicationType","value","announcement",1,"mr-3"],["for","announcement",1,"text-sm","font-medium"],["class","border-t pt-4",4,"ngIf"],[1,"border-l-4","border-senteranga-green","pl-4"],[1,"text-red-600","font-bold"],[1,"ml-2","inline-block","px-2","py-1","bg-red-50","text-red-700","text-xs","font-semibold","rounded"],[1,"flex","flex-col","sm:flex-row","gap-2","sm:gap-3","mb-4"],["type","file","id","fileInput","multiple","","accept","image/*",1,"flex-1","border","border-gray-300","rounded-lg","px-3","sm:px-4","py-2","sm:py-3","text-sm","focus:ring-2","focus:ring-senteranga-green","focus:border-transparent","outline-none",3,"change"],["type","button",1,"px-4","py-2","sm:py-3","bg-blue-600","text-white","rounded-lg","hover:bg-blue-700","font-medium","text-sm","sm:text-base","whitespace-nowrap",3,"click"],["class","border border-gray-300 rounded-lg p-3 sm:p-4 bg-gray-100 mb-4",4,"ngIf"],["class","text-sm font-medium text-green-600 mt-2 p-3 bg-green-50 rounded-lg",4,"ngIf"],["class","text-sm font-medium text-red-600 mt-2 p-3 bg-red-50 rounded-lg border border-red-200",4,"ngIf"],["id","cameraCanvas",2,"display","none"],[1,"flex","flex-col","sm:flex-row","gap-2","sm:gap-3","pt-2","sm:pt-4"],["type","submit",1,"px-6","py-2","sm:py-3","bg-senteranga-green","text-white","rounded-lg","hover:bg-green-700","disabled:bg-gray-400","disabled:cursor-not-allowed","font-semibold","text-sm","sm:text-base","flex","items-center","justify-center","gap-2",3,"disabled"],["class","w-4 h-4 animate-spin","fill","none","stroke","currentColor","viewBox","0 0 24 24",4,"ngIf"],["type","button",1,"px-6","py-2","sm:py-3","bg-gray-200","text-gray-700","rounded-lg","hover:bg-gray-300","font-medium","text-sm","sm:text-base",3,"click"],["class","mt-6 sm:mt-8 pt-6 sm:pt-8 border-t",4,"ngIf"],[1,"text-lg","sm:text-xl","font-bold","mb-6","text-gray-900"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","inline","mr-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"],["class","text-center py-8 text-gray-500",4,"ngIf"],["class","space-y-4",4,"ngIf"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"],[1,"text-lg","sm:text-xl","font-bold","mb-3","text-gray-900"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"],[1,"text-sm","text-gray-600","mb-4"],[1,"w-full","px-6","py-2","sm:py-3","bg-blue-600","text-white","rounded-lg","hover:bg-blue-700","font-medium","text-sm","sm:text-base"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M3.055 11H5a2 2 0 012 2v1a2 2 0 002 2 2 2 0 012 2v2.945M8 3.935V5.5A2.5 2.5 0 0010.5 8h.5a2 2 0 012 2 2 2 0 104 0 2 2 0 012-2h1.064M15 20.488V18a2 2 0 012-2h3.064"],["class","text-sm text-gray-600 py-6 text-center bg-gray-50 rounded-lg",4,"ngIf"],["class","space-y-3 sm:space-y-4",4,"ngIf"],[1,"space-y-4","sm:space-y-6"],[1,"text-lg","sm:text-xl","font-bold","mb-4","text-gray-900"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"],["formControlName","bankName","placeholder","Nom de la banque",1,"w-full","bg-white","border","border-gray-300","rounded-lg","px-3","sm:px-4","py-2","sm:py-3","text-base","focus:ring-2","focus:ring-senteranga-green","focus:border-transparent","outline-none"],["formControlName","accountNumber","placeholder","IBAN ou num\xe9ro de compte",1,"w-full","bg-white","border","border-gray-300","rounded-lg","px-3","sm:px-4","py-2","sm:py-3","text-base","focus:ring-2","focus:ring-senteranga-green","focus:border-transparent","outline-none"],[1,"flex","flex-col","sm:flex-row","gap-2","sm:gap-3"],["type","submit",1,"flex-1","px-4","py-2","sm:py-3","bg-green-600","text-white","rounded-lg","hover:bg-green-700","font-medium","text-sm","sm:text-base"],["type","button",1,"flex-1","px-4","py-2","sm:py-3","bg-gray-200","text-gray-700","rounded-lg","hover:bg-gray-300","font-medium","text-sm","sm:text-base",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"],["class","space-y-3",4,"ngIf"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","inline","mr-1"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"],["type","date","formControlName","periodeApproximativeDebut","required","",1,"w-full","bg-white","border","border-gray-300","rounded-lg","px-3","sm:px-4","py-2","sm:py-3","text-base","focus:ring-2","focus:ring-senteranga-green","focus:border-transparent","outline-none"],["type","date","formControlName","periodeApproximativeFin","required","",1,"w-full","bg-white","border","border-gray-300","rounded-lg","px-3","sm:px-4","py-2","sm:py-3","text-base","focus:ring-2","focus:ring-senteranga-green","focus:border-transparent","outline-none"],[1,"mt-3","p-3","bg-blue-50","border","border-blue-200","rounded-lg"],[1,"text-sm","text-blue-700"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"border","border-gray-300","rounded-lg","p-3","sm:p-4","bg-gray-100","mb-4"],["id","cameraVideo","autoplay","","playsinline","",1,"w-full","rounded-lg","mb-3",2,"max-height","300px"],["type","button",1,"w-full","px-4","py-2","sm:py-3","bg-green-600","text-white","rounded-lg","hover:bg-green-700","font-medium","text-sm","sm:text-base",3,"click"],[1,"text-sm","font-medium","text-green-600","mt-2","p-3","bg-green-50","rounded-lg"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5 13l4 4L19 7"],[1,"text-sm","font-medium","text-red-600","mt-2","p-3","bg-red-50","rounded-lg","border","border-red-200"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","animate-spin"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"],[1,"mt-6","sm:mt-8","pt-6","sm:pt-8","border-t"],[1,"text-lg","font-bold","mb-6","text-gray-900"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-6"],["class","bg-white rounded-xl overflow-hidden shadow-md hover:shadow-xl transition-shadow",4,"ngFor","ngForOf"],[1,"bg-white","rounded-xl","overflow-hidden","shadow-md","hover:shadow-xl","transition-shadow"],[1,"relative","h-48","rounded-t-xl","overflow-hidden","bg-gray-200"],["class","w-full h-full flex items-center justify-center bg-gray-100",4,"ngIf"],[1,"absolute","bottom-3","left-3","bg-white/95","px-3","py-1","rounded-md","shadow-sm"],[1,"text-sm","font-bold","text-gray-900"],[1,"absolute","top-3","right-3","px-2","py-1","rounded-full","text-xs","font-semibold",3,"ngClass"],[4,"ngIf"],["class","absolute top-3 left-3 px-2 py-1 rounded-full text-xs font-semibold bg-purple-500 text-white",4,"ngIf"],[1,"p-4","space-y-3"],[1,"flex","items-center","gap-2"],[1,"px-2","py-1","rounded","text-xs","font-semibold","bg-blue-50","text-blue-600"],[1,"space-y-1","text-xs","font-medium","text-gray-900"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-3","h-3","inline","mr-1"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"],[1,"text-xs","text-gray-600","pt-2","border-t"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 11a3 3 0 11-6 0 3 3 0 016 0z"],["class","text-xs text-purple-600 pt-2 border-t bg-purple-50 p-2 rounded",4,"ngIf"],[1,"w-full","h-full","flex","items-center","justify-center","bg-gray-100"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-12","h-12","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"absolute","top-3","left-3","px-2","py-1","rounded-full","text-xs","font-semibold","bg-purple-500","text-white"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M11 5.882V19.24a1.76 1.76 0 01-3.417.592l-2.147-6.15M18 13a3 3 0 100-6M5.436 13.683A4.001 4.001 0 017 6h1.832c4.1 0 7.625-1.234 9.168-3v14c-1.543-1.766-5.067-3-9.168-3H7a3.988 3.988 0 01-1.564-.317z"],[1,"text-xs","text-purple-600","pt-2","border-t","bg-purple-50","p-2","rounded"],["class","block mt-1",4,"ngIf"],[1,"block","mt-1"],[1,"inline-flex","text-xs","px-2","py-1","rounded-full","font-semibold",3,"ngClass"],[1,"text-center","py-8","text-gray-500"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-12","h-12","mx-auto","mb-4","text-gray-300"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"],[1,"space-y-4"],["class","border border-gray-200 rounded-lg p-4 hover:bg-gray-50 transition-colors",4,"ngFor","ngForOf"],[1,"border","border-gray-200","rounded-lg","p-4","hover:bg-gray-50","transition-colors"],[1,"flex","items-start","justify-between","mb-3"],[1,"flex","items-center","gap-3"],[1,"w-8","h-8","bg-blue-100","rounded-full","flex","items-center","justify-center","text-blue-600","font-bold","text-sm"],[1,"font-semibold","text-gray-900"],[1,"text-sm","text-gray-600"],[1,"px-2","py-1","bg-green-100","text-green-800","rounded-full","text-xs","font-medium"],[1,"bg-gray-50","rounded-lg","p-3","mb-3"],[1,"text-sm"],[1,"font-medium","text-gray-700","mb-2"],[1,"text-gray-600","italic"],[1,"flex","items-center","justify-between","text-xs","text-gray-500"],[1,"flex","gap-2"],[1,"px-3","py-1","bg-green-600","text-white","text-xs","rounded","hover:bg-green-700","transition-colors",3,"click","disabled"],[1,"px-3","py-1","bg-red-600","text-white","text-xs","rounded","hover:bg-red-700","transition-colors",3,"click","disabled"],[1,"w-8","h-8","bg-purple-100","rounded-full","flex","items-center","justify-center","text-purple-600","font-bold","text-sm"],[1,"px-2","py-1","bg-purple-100","text-purple-800","rounded-full","text-xs","font-medium"],[1,"font-medium","text-gray-700"],[1,"ml-2","px-2","py-1","rounded-full","text-xs","font-semibold",3,"ngClass"],["class","px-4 py-2 bg-green-600 text-white text-xs rounded hover:bg-green-700 transition-colors",3,"click",4,"ngIf"],["class","text-green-600 font-medium",4,"ngIf"],[1,"px-4","py-2","bg-green-600","text-white","text-xs","rounded","hover:bg-green-700","transition-colors",3,"click"],[1,"text-green-600","font-medium"],[1,"text-sm","text-gray-600","py-6","text-center","bg-gray-50","rounded-lg"],[1,"space-y-3","sm:space-y-4"],["class","border border-gray-300 rounded-lg p-4 hover:shadow transition",4,"ngFor","ngForOf"],[1,"border","border-gray-300","rounded-lg","p-4","hover:shadow","transition"],[1,"flex","flex-col","sm:flex-row","sm:items-center","sm:justify-between","gap-3"],[1,"flex-1"],[1,"text-sm","text-gray-600","mt-1"],[1,"flex","items-center","gap-2","w-full","sm:w-auto"],["type","number","min","1",1,"w-16","bg-white","border","border-gray-300","rounded-lg","px-2","py-2","text-sm","focus:ring-2","focus:ring-senteranga-green","outline-none",3,"ngModelChange","ngModel"],[1,"flex-1","sm:flex-none","px-4","py-2","bg-senteranga-green","text-white","rounded-lg","hover:bg-green-700","font-medium","text-sm",3,"click"],["class","border-l-4 border-orange-500 pl-3 sm:pl-4 py-2",4,"ngFor","ngForOf"],[1,"border-l-4","border-orange-500","pl-3","sm:pl-4","py-2"],[1,"font-semibold","text-gray-900","text-sm"],[1,"text-xs","text-gray-600","mt-1"]],template:function(r,o){if(1&r&&(e.nrm(0,"app-header"),e.j41(1,"section",0)(2,"div",1)(3,"h1",2),e.EFF(4,"Espace Agriculteur"),e.k0s(),e.j41(5,"div",3)(6,"div",4)(7,"div",5)(8,"h2",6),e.qSk(),e.j41(9,"svg",7),e.nrm(10,"path",8),e.k0s(),e.EFF(11," Publier un produit "),e.k0s(),e.joV(),e.j41(12,"form",9),e.bIt("ngSubmit",function(){return o.publishProduct()}),e.j41(13,"div",10)(14,"div")(15,"label",11),e.EFF(16,"Titre *"),e.k0s(),e.nrm(17,"input",12),e.k0s(),e.j41(18,"div")(19,"label",11),e.EFF(20,"Cat\xe9gorie *"),e.k0s(),e.j41(21,"select",13)(22,"option",14),e.EFF(23,"S\xe9lectionner une cat\xe9gorie"),e.k0s(),e.j41(24,"option",15),e.EFF(25,"L\xe9gumes"),e.k0s(),e.j41(26,"option",16),e.EFF(27,"Fruits"),e.k0s(),e.j41(28,"option",17),e.EFF(29,"C\xe9r\xe9ales"),e.k0s()()()(),e.j41(30,"div")(31,"label",11),e.EFF(32,"Description *"),e.k0s(),e.nrm(33,"textarea",18),e.k0s(),e.j41(34,"div",19)(35,"div")(36,"label",11),e.EFF(37,"Quantit\xe9 *"),e.k0s(),e.nrm(38,"input",20),e.k0s(),e.j41(39,"div")(40,"label",11),e.EFF(41,"Min. *"),e.k0s(),e.nrm(42,"input",21),e.k0s(),e.j41(43,"div")(44,"label",11),e.EFF(45,"Unit\xe9 *"),e.k0s(),e.j41(46,"select",22)(47,"option",14),e.EFF(48,"Unit\xe9"),e.k0s(),e.j41(49,"option",23),e.EFF(50,"kg"),e.k0s(),e.j41(51,"option",24),e.EFF(52,"Tonne"),e.k0s(),e.j41(53,"option",25),e.EFF(54,"Litre"),e.k0s(),e.j41(55,"option",26),e.EFF(56,"Unit\xe9"),e.k0s()()(),e.j41(57,"div")(58,"label",11),e.EFF(59,"Prix/unit\xe9 *"),e.k0s(),e.nrm(60,"input",27),e.k0s()(),e.j41(61,"div")(62,"label",11),e.EFF(63,"Localisation *"),e.k0s(),e.nrm(64,"input",28),e.k0s(),e.j41(65,"div",29)(66,"label",30),e.EFF(67,"Type de publication"),e.k0s(),e.j41(68,"div",31)(69,"div",32),e.nrm(70,"input",33),e.j41(71,"label",34),e.EFF(72,"Produit imm\xe9diat \u2014 Disponible tout de suite"),e.k0s()(),e.j41(73,"div",32),e.nrm(74,"input",35),e.j41(75,"label",36),e.EFF(76,"Annonce \u2014 Disponible \xe0 une p\xe9riode d\xe9finie"),e.k0s()()()(),e.DNE(77,P,21,0,"div",37),e.j41(78,"div",38)(79,"label",30),e.EFF(80," \u{1f4f7} Images "),e.j41(81,"span",39),e.EFF(82,"*"),e.k0s(),e.j41(83,"span",40),e.EFF(84,"OBLIGATOIRE"),e.k0s()(),e.j41(85,"div",41)(86,"input",42),e.bIt("change",function(m){return o.onImagesSelected(m)}),e.k0s(),e.j41(87,"button",43),e.bIt("click",function(){return o.cameraActive?o.stopCamera():o.startCamera()}),e.EFF(88),e.k0s()(),e.DNE(89,S,4,0,"div",44)(90,O,4,1,"div",45)(91,$,4,0,"div",46),e.k0s(),e.nrm(92,"canvas",47),e.j41(93,"div",48)(94,"button",49),e.DNE(95,T,2,0,"svg",50),e.j41(96,"span"),e.EFF(97),e.k0s()(),e.j41(98,"button",51),e.bIt("click",function(){return o.resetProductForm()}),e.EFF(99," Annuler "),e.k0s()()(),e.DNE(100,z,7,2,"div",52),e.k0s(),e.j41(101,"div",5)(102,"h3",53),e.qSk(),e.j41(103,"svg",54),e.nrm(104,"path",55),e.k0s(),e.EFF(105),e.k0s(),e.DNE(106,X,5,0,"div",56)(107,W,2,1,"div",57),e.k0s(),e.joV(),e.j41(108,"div",5)(109,"h3",53),e.qSk(),e.j41(110,"svg",54),e.nrm(111,"path",58),e.k0s(),e.EFF(112),e.k0s(),e.DNE(113,K,5,0,"div",56)(114,ee,2,1,"div",57),e.k0s(),e.joV(),e.j41(115,"div",5)(116,"h2",59),e.qSk(),e.j41(117,"svg",54),e.nrm(118,"path",60),e.k0s(),e.EFF(119," Demande de subvention / investissement "),e.k0s(),e.joV(),e.j41(120,"p",61),e.EFF(121,"Formulaires de demande (subvention / investissement) \u2014 visibilit\xe9 pour les institutions et investisseurs."),e.k0s(),e.j41(122,"button",62),e.EFF(123," Faire une demande "),e.k0s()(),e.j41(124,"div",5)(125,"h2",59),e.qSk(),e.j41(126,"svg",54),e.nrm(127,"path",63),e.k0s(),e.EFF(128," Catalogue de semences "),e.k0s(),e.joV(),e.j41(129,"p",61),e.EFF(130,"Consultez le catalogue, commandez et payez pour am\xe9liorer votre production."),e.k0s(),e.DNE(131,te,2,0,"div",64)(132,re,2,1,"div",65),e.k0s()(),e.j41(133,"aside",66)(134,"div",5)(135,"h3",67),e.qSk(),e.j41(136,"svg",54),e.nrm(137,"path",68),e.k0s(),e.EFF(138," Compte bancaire "),e.k0s(),e.joV(),e.j41(139,"p",61),e.EFF(140,"Ajouter un compte pour recevoir paiements et subventions."),e.k0s(),e.j41(141,"form",9),e.bIt("ngSubmit",function(){return o.saveBankAccount()}),e.j41(142,"div")(143,"label",11),e.EFF(144,"Banque"),e.k0s(),e.nrm(145,"input",69),e.k0s(),e.j41(146,"div")(147,"label",11),e.EFF(148,"Num\xe9ro de compte"),e.k0s(),e.nrm(149,"input",70),e.k0s(),e.j41(150,"div",71)(151,"button",72),e.EFF(152," \u2713 Enregistrer "),e.k0s(),e.j41(153,"button",73),e.bIt("click",function(){return o.bankForm.reset()}),e.EFF(154," Annuler "),e.k0s()()()(),e.j41(155,"div",5)(156,"h3",67),e.qSk(),e.j41(157,"svg",54),e.nrm(158,"path",74),e.k0s(),e.EFF(159," Alertes / Conseils "),e.k0s(),e.joV(),e.j41(160,"p",61),e.EFF(161,"Recevez des alertes filtr\xe9es par r\xe9gion."),e.k0s(),e.DNE(162,oe,2,0,"div",64)(163,se,2,1,"ul",75),e.k0s()()()()(),e.nrm(164,"app-footer")),2&r){let a;e.R7$(12),e.AVh("opacity-50",o.isPublishing)("pointer-events-none",o.isPublishing),e.Y8G("formGroup",o.productForm),e.R7$(65),e.Y8G("ngIf","announcement"===(null==(a=o.productForm.get("publicationType"))?null:a.value)),e.R7$(11),e.SpI(" ",o.cameraActive?"\u2715 Fermer":"\u{1f4f7} Photo"," "),e.R7$(),e.Y8G("ngIf",o.cameraActive),e.R7$(),e.Y8G("ngIf",o.uploadedImageCount>0),e.R7$(),e.Y8G("ngIf",0===o.uploadedImageCount),e.R7$(3),e.Y8G("disabled",o.isPublishing),e.R7$(),e.Y8G("ngIf",o.isPublishing),e.R7$(2),e.JRh(o.isPublishing?"Publication en cours...":"Publier le produit"),e.R7$(3),e.Y8G("ngIf",o.products.length>0),e.R7$(5),e.SpI(" R\xe9servations (",o.reservations.length,") "),e.R7$(),e.Y8G("ngIf",0===o.reservations.length),e.R7$(),e.Y8G("ngIf",o.reservations.length>0),e.R7$(5),e.SpI(" Gestion des Annonces (",o.announcements.length,") "),e.R7$(),e.Y8G("ngIf",0===o.announcements.length),e.R7$(),e.Y8G("ngIf",o.announcements.length>0),e.R7$(17),e.Y8G("ngIf",0===o.seeds.length),e.R7$(),e.Y8G("ngIf",o.seeds.length>0),e.R7$(9),e.Y8G("formGroup",o.bankForm),e.R7$(21),e.Y8G("ngIf",0===o.alerts.length),e.R7$(),e.Y8G("ngIf",o.alerts.length>0)}},dependencies:[i.MD,i.YU,i.Sq,i.bT,i.vh,k.iI,f.l,w.n,l.X1,l.qT,l.xH,l.y7,l.me,l.Q0,l.wz,l.Fm,l.BC,l.cb,l.YS,l.VZ,l.j4,l.JD,l.YN,l.vS],styles:["input[_ngcontent-%COMP%]:focus, textarea[_ngcontent-%COMP%]:focus, select[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 3px #00843d1a}button[_ngcontent-%COMP%], input[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{transition:all .3s ease}@media (max-width: 640px){button[_ngcontent-%COMP%], input[type=submit][_ngcontent-%COMP%], input[type=button][_ngcontent-%COMP%]{min-height:44px}input[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{font-size:16px}video[_ngcontent-%COMP%]{width:100%;object-fit:cover}.grid-cols-2[_ngcontent-%COMP%]{grid-template-columns:1fr 1fr;gap:.75rem}.flex-col.sm\\:flex-row[_ngcontent-%COMP%]{gap:.5rem}aside[_ngcontent-%COMP%]{order:2}}@media (min-width: 640px) and (max-width: 1024px){.grid-cols-1.sm\\:grid-cols-2[_ngcontent-%COMP%]{grid-template-columns:1fr 1fr}.grid-cols-2.sm\\:grid-cols-4[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}@media (min-width: 1024px){.grid-cols-2.sm\\:grid-cols-4[_ngcontent-%COMP%]{grid-template-columns:repeat(4,1fr)}aside[_ngcontent-%COMP%]{position:sticky;top:120px}}@media (max-width: 640px){h1[_ngcontent-%COMP%]{font-size:1.5rem;line-height:2rem}h2[_ngcontent-%COMP%]{font-size:1.125rem;line-height:1.75rem}h3[_ngcontent-%COMP%]{font-size:1rem;line-height:1.5rem}}.bg-yellow-100[_ngcontent-%COMP%], .bg-green-100[_ngcontent-%COMP%], .bg-red-100[_ngcontent-%COMP%]{white-space:nowrap}.border-gray-300[_ngcontent-%COMP%]{border-width:1px}.focus\\:ring-2[_ngcontent-%COMP%]{transition:box-shadow .2s ease}html[_ngcontent-%COMP%]{scroll-behavior:smooth}#cameraVideo[_ngcontent-%COMP%]{background:#000;border-radius:.5rem;display:block;width:100%}.border-gray-300[_ngcontent-%COMP%]:hover{transition:all .2s ease}form[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{margin-bottom:1rem}@media (max-width: 640px){form[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{margin-bottom:.75rem}}@media (prefers-reduced-motion: reduce){*[_ngcontent-%COMP%]{animation:none!important;transition:none!important}}"]})}}return n})()}}]);