{"ast":null,"code":"import _asyncToGenerator from \"/home/bachir-uchiwa/Bureau/projet3D/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { CommonModule } from '@angular/common';\nimport { RouterModule } from '@angular/router';\nimport { HeaderComponent } from '../../components/header/header.component';\nimport { FooterComponent } from '../../components/footer/footer.component';\nimport { ReactiveFormsModule, FormsModule, Validators } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/data.service\";\nimport * as i2 from \"@angular/forms\";\nimport * as i3 from \"@angular/common\";\nconst _c0 = (a0, a1, a2) => ({\n  \"bg-yellow-100 text-yellow-800\": a0,\n  \"bg-green-100 text-green-800\": a1,\n  \"bg-red-100 text-red-800\": a2\n});\nfunction DashboardAgriculteurComponent_div_69_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r1 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 51);\n    i0.ɵɵelement(1, \"video\", 52);\n    i0.ɵɵelementStart(2, \"button\", 53);\n    i0.ɵɵlistener(\"click\", function DashboardAgriculteurComponent_div_69_Template_button_click_2_listener() {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.capturePhoto());\n    });\n    i0.ɵɵtext(3, \" \\uD83D\\uDCF8 Capturer photo \");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction DashboardAgriculteurComponent_div_70_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 54);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\"\", ctx_r1.uploadedImageCount, \" image(s) s\\u00E9lectionn\\u00E9e(s)\");\n  }\n}\nfunction DashboardAgriculteurComponent_div_77_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 58)(1, \"div\", 59)(2, \"div\")(3, \"div\", 60);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"div\", 61);\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(7, \"span\", 62);\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(9, \"div\", 63);\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"div\", 63);\n    i0.ɵɵtext(12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"div\", 64);\n    i0.ɵɵtext(14);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const p_r3 = ctx.$implicit;\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(p_r3.titre);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(p_r3.categorie);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction3(11, _c0, p_r3.statutValidation === \"en_attente\", p_r3.statutValidation === \"valid\\u00E9\", p_r3.statutValidation === \"rejet\\u00E9\"));\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", p_r3.statutValidation, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate3(\"\", p_r3.quantite, \" \", p_r3.unite, \" \\u2014 Prix total: \", p_r3.prix, \" FCFA\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate3(\"Quantit\\u00E9 min.: \", p_r3.quantiteMinimale || \"-\", \" \", p_r3.unite, \" \\u2014 Prix/unit\\u00E9: \", p_r3.prixParUnite || \"-\", \" FCFA\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(p_r3.localisation);\n  }\n}\nfunction DashboardAgriculteurComponent_div_77_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 55)(1, \"h4\", 56);\n    i0.ɵɵtext(2, \"Mes produits\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 7);\n    i0.ɵɵtemplate(4, DashboardAgriculteurComponent_div_77_div_4_Template, 15, 15, \"div\", 57);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.products);\n  }\n}\nfunction DashboardAgriculteurComponent_div_88_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 65);\n    i0.ɵɵtext(1, \"Aucun produit trouv\\u00E9.\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction DashboardAgriculteurComponent_div_89_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 68)(1, \"div\", 60);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 37);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"div\", 69)(6, \"input\", 70);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function DashboardAgriculteurComponent_div_89_div_1_Template_input_ngModelChange_6_listener($event) {\n      const s_r5 = i0.ɵɵrestoreView(_r4).$implicit;\n      const ctx_r1 = i0.ɵɵnextContext(2);\n      i0.ɵɵtwoWayBindingSet(ctx_r1.seedOrderQty[s_r5.id], $event) || (ctx_r1.seedOrderQty[s_r5.id] = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"button\", 71);\n    i0.ɵɵlistener(\"click\", function DashboardAgriculteurComponent_div_89_div_1_Template_button_click_7_listener() {\n      const s_r5 = i0.ɵɵrestoreView(_r4).$implicit;\n      const ctx_r1 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r1.orderSeed(s_r5));\n    });\n    i0.ɵɵtext(8, \"Commander\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const s_r5 = ctx.$implicit;\n    const ctx_r1 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(s_r5.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate2(\"Prix: \", s_r5.price, \" FCFA / \", s_r5.unit || \"unit\\u00E9\", \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtwoWayProperty(\"ngModel\", ctx_r1.seedOrderQty[s_r5.id]);\n  }\n}\nfunction DashboardAgriculteurComponent_div_89_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 66);\n    i0.ɵɵtemplate(1, DashboardAgriculteurComponent_div_89_div_1_Template, 9, 4, \"div\", 67);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.seeds);\n  }\n}\nfunction DashboardAgriculteurComponent_div_109_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 37);\n    i0.ɵɵtext(1, \"Aucune alerte pour votre r\\u00E9gion pour le moment.\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction DashboardAgriculteurComponent_ul_110_li_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\", 73)(1, \"div\", 60);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 61);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const a_r6 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(a_r6.title);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(a_r6.message);\n  }\n}\nfunction DashboardAgriculteurComponent_ul_110_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ul\");\n    i0.ɵɵtemplate(1, DashboardAgriculteurComponent_ul_110_li_1_Template, 5, 2, \"li\", 72);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.alerts);\n  }\n}\nexport let DashboardAgriculteurComponent = /*#__PURE__*/(() => {\n  class DashboardAgriculteurComponent {\n    constructor(dataService, fb) {\n      this.dataService = dataService;\n      this.fb = fb;\n      // Data\n      this.products = [];\n      this.seeds = [];\n      this.seedOrderQty = {};\n      this.alerts = [];\n      this.currentUser = null;\n      this.uploadedImageCount = 0;\n      this.selectedImages = [];\n      this.cameraActive = false;\n      this.stream = null;\n    }\n    ngOnInit() {\n      const raw = localStorage.getItem('currentUser');\n      this.currentUser = raw ? JSON.parse(raw) : null;\n      // Initialize forms\n      this.productForm = this.fb.group({\n        titre: ['', Validators.required],\n        description: ['', Validators.required],\n        categorie: ['', Validators.required],\n        quantite: ['', [Validators.required, Validators.min(0)]],\n        quantiteMinimale: ['', [Validators.required, Validators.min(0)]],\n        // 'prix' removed from form: we compute total price from quantite * prixParUnite\n        prixParUnite: ['', [Validators.required, Validators.min(0)]],\n        unite: ['', Validators.required],\n        localisation: ['', Validators.required]\n      });\n      this.bankForm = this.fb.group({\n        bankName: [''],\n        accountNumber: ['']\n      });\n      this.loadInitial();\n    }\n    loadInitial() {\n      if (!this.currentUser) return;\n      // Load user's products\n      this.dataService.getProductsByUser(this.currentUser.id).subscribe(list => this.products = list || []);\n      // Load seeds catalog\n      this.dataService.getSeedsCatalog().subscribe(list => {\n        this.seeds = list || [];\n        this.seeds.forEach(s => this.seedOrderQty[s.id] = 1);\n      });\n      // Load alerts filtered by region\n      if (this.currentUser.region) {\n        this.dataService.getAlertsByRegion(this.currentUser.region).subscribe(list => this.alerts = list || []);\n      }\n      // Bank info prefill\n      if (this.currentUser.bankAccount) {\n        this.bankForm.patchValue(this.currentUser.bankAccount);\n      }\n    }\n    // Handle image file selection\n    onImagesSelected(event) {\n      this.selectedImages = Array.from(event.target.files || []);\n      this.uploadedImageCount = this.selectedImages.length;\n    }\n    // Start camera\n    startCamera() {\n      this.cameraActive = true;\n      navigator.mediaDevices.getUserMedia({\n        video: {\n          facingMode: 'environment'\n        }\n      }).then(mediaStream => {\n        this.stream = mediaStream;\n        setTimeout(() => {\n          const video = document.getElementById('cameraVideo');\n          if (video) video.srcObject = mediaStream;\n        }, 100);\n      }).catch(err => {\n        console.error('Camera error:', err);\n        alert('Erreur d\\'accès à la caméra');\n        this.cameraActive = false;\n      });\n    }\n    // Capture photo from camera\n    capturePhoto() {\n      const video = document.getElementById('cameraVideo');\n      const canvas = document.getElementById('cameraCanvas');\n      if (!video || !canvas) return;\n      const ctx = canvas.getContext('2d');\n      if (!ctx) return;\n      canvas.width = video.videoWidth;\n      canvas.height = video.videoHeight;\n      ctx.drawImage(video, 0, 0);\n      canvas.toBlob(blob => {\n        if (blob) {\n          const file = new File([blob], `photo-${Date.now()}.jpg`, {\n            type: 'image/jpeg'\n          });\n          this.selectedImages.push(file);\n          this.uploadedImageCount = this.selectedImages.length;\n        }\n      }, 'image/jpeg', 0.95);\n    }\n    // Stop camera\n    stopCamera() {\n      this.cameraActive = false;\n      if (this.stream) {\n        this.stream.getTracks().forEach(track => track.stop());\n        this.stream = null;\n      }\n    }\n    // Publish product\n    publishProduct() {\n      var _this = this;\n      if (!this.productForm.valid || !this.currentUser) {\n        // Identify which controls are invalid to help debugging\n        const invalid = Object.keys(this.productForm.controls).filter(k => this.productForm.get(k)?.invalid);\n        console.warn('Product form invalid controls:', invalid);\n        const names = invalid.length ? invalid.join(', ') : 'inconnus';\n        alert('Veuillez remplir tous les champs obligatoires. Champs invalides: ' + names);\n        return;\n      }\n      // Convert images to base64 then upload them to Cloudinary via the upload server\n      this.convertImagesToBase64(this.selectedImages).then(/*#__PURE__*/function () {\n        var _ref = _asyncToGenerator(function* (base64Images) {\n          // upload to our small upload server\n          try {\n            let uploadedUrls = [];\n            if (base64Images.length) {\n              const resp = yield fetch('http://localhost:4201/upload-images', {\n                method: 'POST',\n                headers: {\n                  'Content-Type': 'application/json'\n                },\n                body: JSON.stringify({\n                  images: base64Images\n                })\n              });\n              if (!resp.ok) {\n                const txt = yield resp.text();\n                console.error('Upload server error:', resp.status, txt);\n                alert('Erreur lors de l\\'upload des images');\n                return;\n              }\n              const json = yield resp.json();\n              uploadedUrls = (json.uploaded || []).map(u => u.url);\n            }\n            // compute total price from quantity and price per unit\n            const q = parseFloat(_this.productForm.value.quantite) || 0;\n            const ppu = parseFloat(_this.productForm.value.prixParUnite) || 0;\n            const totalPrice = q * ppu;\n            const product = {\n              id: `prod-${Date.now()}`,\n              agriculteurId: _this.currentUser.id,\n              titre: _this.productForm.value.titre,\n              description: _this.productForm.value.description,\n              categorie: _this.productForm.value.categorie,\n              quantite: q,\n              quantiteMinimale: parseFloat(_this.productForm.value.quantiteMinimale),\n              prix: totalPrice,\n              prixParUnite: ppu,\n              unite: _this.productForm.value.unite,\n              localisation: _this.productForm.value.localisation,\n              images: uploadedUrls,\n              statutValidation: 'en_attente',\n              statutDisponibilite: 'disponible',\n              datePublication: new Date().toISOString(),\n              dateMaj: new Date().toISOString()\n            };\n            _this.dataService.createProduct(product).subscribe({\n              next: created => {\n                _this.products.unshift(created);\n                alert('Produit publié — en attente de validation');\n                _this.resetProductForm();\n              },\n              error: err => {\n                console.error('Error publishing product', err);\n                alert('Erreur lors de la publication du produit');\n              }\n            });\n          } catch (err) {\n            console.error('Image upload failed', err);\n            alert('Échec lors de l\\'upload des images');\n          }\n        });\n        return function (_x) {\n          return _ref.apply(this, arguments);\n        };\n      }());\n    }\n    // Reset product form and image selection\n    resetProductForm() {\n      this.productForm.reset();\n      this.selectedImages = [];\n      this.uploadedImageCount = 0;\n      this.stopCamera();\n    }\n    // Convert files to base64\n    convertImagesToBase64(files) {\n      return Promise.all(files.map(file => {\n        return new Promise(resolve => {\n          const reader = new FileReader();\n          reader.onload = () => {\n            resolve(reader.result);\n          };\n          reader.readAsDataURL(file);\n        });\n      }));\n    }\n    // Bank account save\n    saveBankAccount() {\n      if (!this.currentUser) return;\n      const bank = this.bankForm.value;\n      const payload = {\n        bankName: bank.bankName || '',\n        accountNumber: bank.accountNumber || ''\n      };\n      this.dataService.updateUserBankAccount(this.currentUser.id, payload).subscribe({\n        next: u => {\n          this.currentUser = u;\n          localStorage.setItem('currentUser', JSON.stringify(u));\n          alert('Compte bancaire enregistré');\n        },\n        error: err => {\n          console.error(err);\n          alert('Erreur lors de l\\'enregistrement');\n        }\n      });\n    }\n    // Order seed\n    orderSeed(seed) {\n      if (!this.currentUser) return;\n      const qty = this.seedOrderQty[seed.id] || 1;\n      const order = {\n        id: `order-${Date.now()}`,\n        userId: this.currentUser.id,\n        seedId: seed.id,\n        seedName: seed.name,\n        quantity: qty,\n        total: (seed.price || 0) * qty,\n        status: 'paid',\n        createdAt: new Date().toISOString()\n      };\n      this.dataService.createSeedOrder(order).subscribe({\n        next: res => {\n          alert(`Commande passée: ${order.seedName} x${qty}`);\n        },\n        error: err => {\n          console.error(err);\n          alert('Erreur lors de la commande');\n        }\n      });\n    }\n    static {\n      this.ɵfac = function DashboardAgriculteurComponent_Factory(t) {\n        return new (t || DashboardAgriculteurComponent)(i0.ɵɵdirectiveInject(i1.DataService), i0.ɵɵdirectiveInject(i2.FormBuilder));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: DashboardAgriculteurComponent,\n        selectors: [[\"app-dashboard-agriculteur\"]],\n        standalone: true,\n        features: [i0.ɵɵStandaloneFeature],\n        decls: 112,\n        vars: 10,\n        consts: [[1, \"pt-20\", \"max-w-7xl\", \"mx-auto\", \"px-4\", \"sm:px-6\", \"py-6\", \"sm:py-8\"], [1, \"text-2xl\", \"sm:text-3xl\", \"font-bold\", \"mb-6\"], [1, \"grid\", \"grid-cols-1\", \"lg:grid-cols-3\", \"gap-4\", \"sm:gap-6\"], [1, \"col-span-1\", \"lg:col-span-2\", \"space-y-4\", \"sm:space-y-6\"], [1, \"bg-white\", \"rounded-lg\", \"shadow\", \"p-6\"], [1, \"text-xl\", \"font-semibold\", \"mb-3\"], [1, \"space-y-4\", 3, \"ngSubmit\", \"formGroup\"], [1, \"grid\", \"grid-cols-1\", \"md:grid-cols-2\", \"gap-4\"], [1, \"block\", \"text-sm\", \"font-medium\", \"mb-1\"], [\"formControlName\", \"titre\", \"placeholder\", \"Ex: Tomates rouges\", \"required\", \"\", 1, \"w-full\", \"border\", \"rounded\", \"px-3\", \"py-2\"], [\"formControlName\", \"categorie\", \"required\", \"\", 1, \"w-full\", \"border\", \"rounded\", \"px-3\", \"py-2\"], [\"value\", \"\"], [\"value\", \"L\\u00E9gumes\"], [\"value\", \"Fruits\"], [\"value\", \"C\\u00E9r\\u00E9ales\"], [\"formControlName\", \"description\", \"rows\", \"3\", \"placeholder\", \"D\\u00E9crivez votre produit...\", \"required\", \"\", 1, \"w-full\", \"border\", \"rounded\", \"px-3\", \"py-2\"], [1, \"grid\", \"grid-cols-1\", \"md:grid-cols-4\", \"gap-4\"], [\"type\", \"number\", \"formControlName\", \"quantite\", \"placeholder\", \"Quantit\\u00E9\", \"min\", \"0\", \"required\", \"\", 1, \"w-full\", \"border\", \"rounded\", \"px-3\", \"py-2\"], [\"type\", \"number\", \"formControlName\", \"quantiteMinimale\", \"placeholder\", \"Quantit\\u00E9 minimale\", \"min\", \"0\", \"required\", \"\", 1, \"w-full\", \"border\", \"rounded\", \"px-3\", \"py-2\"], [\"formControlName\", \"unite\", \"required\", \"\", 1, \"w-full\", \"border\", \"rounded\", \"px-3\", \"py-2\"], [\"value\", \"kg\"], [\"value\", \"tonne\"], [\"value\", \"litre\"], [\"value\", \"unite\"], [\"type\", \"number\", \"formControlName\", \"prixParUnite\", \"placeholder\", \"Prix / unit\\u00E9\", \"min\", \"0\", \"required\", \"\", 1, \"w-full\", \"border\", \"rounded\", \"px-3\", \"py-2\"], [\"formControlName\", \"localisation\", \"placeholder\", \"Ville, Village, etc.\", \"required\", \"\", 1, \"w-full\", \"border\", \"rounded\", \"px-3\", \"py-2\"], [1, \"flex\", \"gap-2\", \"mb-2\"], [\"type\", \"file\", \"id\", \"fileInput\", \"multiple\", \"\", \"accept\", \"image/*\", 1, \"flex-1\", \"border\", \"rounded\", \"px-3\", \"py-2\", 3, \"change\"], [\"type\", \"button\", 1, \"px-4\", \"py-2\", \"bg-blue-600\", \"text-white\", \"rounded\", \"hover:bg-blue-700\", 3, \"click\"], [\"class\", \"border rounded p-3 bg-gray-100 mb-3\", 4, \"ngIf\"], [\"class\", \"text-sm text-green-600 mt-1\", 4, \"ngIf\"], [\"id\", \"cameraCanvas\", 2, \"display\", \"none\"], [1, \"flex\", \"gap-2\", \"pt-2\"], [\"type\", \"submit\", 1, \"px-4\", \"py-2\", \"bg-green-600\", \"text-white\", \"rounded\", \"hover:bg-green-700\"], [\"type\", \"button\", 1, \"px-4\", \"py-2\", \"bg-gray-200\", \"rounded\", \"hover:bg-gray-300\", 3, \"click\"], [\"class\", \"mt-6 pt-6 border-t\", 4, \"ngIf\"], [1, \"text-xl\", \"font-semibold\", \"mb-2\"], [1, \"text-sm\", \"text-gray-600\"], [\"class\", \"text-sm text-gray-600 mt-2\", 4, \"ngIf\"], [\"class\", \"grid grid-cols-1 md:grid-cols-2 gap-4 mt-3\", 4, \"ngIf\"], [1, \"space-y-6\"], [1, \"bg-white\", \"rounded-lg\", \"shadow\", \"p-4\"], [1, \"font-semibold\", \"mb-2\"], [1, \"space-y-2\", \"mt-2\", 3, \"ngSubmit\", \"formGroup\"], [\"formControlName\", \"bankName\", \"placeholder\", \"Nom de la banque\", 1, \"w-full\", \"border\", \"rounded\", \"px-3\", \"py-2\"], [\"formControlName\", \"accountNumber\", \"placeholder\", \"Num\\u00E9ro de compte\", 1, \"w-full\", \"border\", \"rounded\", \"px-3\", \"py-2\"], [1, \"flex\", \"gap-2\"], [\"type\", \"submit\", 1, \"px-3\", \"py-1\", \"bg-green-600\", \"text-white\", \"rounded\"], [\"type\", \"button\", 1, \"px-3\", \"py-1\", \"bg-gray-200\", \"rounded\", 3, \"click\"], [\"class\", \"text-sm text-gray-600\", 4, \"ngIf\"], [4, \"ngIf\"], [1, \"border\", \"rounded\", \"p-3\", \"bg-gray-100\", \"mb-3\"], [\"id\", \"cameraVideo\", \"autoplay\", \"\", \"playsinline\", \"\", 1, \"w-full\", \"rounded\", \"mb-2\", 2, \"max-height\", \"300px\"], [\"type\", \"button\", 1, \"w-full\", \"px-4\", \"py-2\", \"bg-green-600\", \"text-white\", \"rounded\", \"hover:bg-green-700\", 3, \"click\"], [1, \"text-sm\", \"text-green-600\", \"mt-1\"], [1, \"mt-6\", \"pt-6\", \"border-t\"], [1, \"font-semibold\", \"mb-3\"], [\"class\", \"border rounded p-4 bg-gray-50\", 4, \"ngFor\", \"ngForOf\"], [1, \"border\", \"rounded\", \"p-4\", \"bg-gray-50\"], [1, \"flex\", \"justify-between\", \"items-start\", \"mb-2\"], [1, \"font-medium\"], [1, \"text-xs\", \"text-gray-600\"], [1, \"text-xs\", \"px-2\", \"py-1\", \"rounded\", 3, \"ngClass\"], [1, \"text-sm\", \"text-gray-600\", \"mb-1\"], [1, \"text-xs\", \"text-gray-500\"], [1, \"text-sm\", \"text-gray-600\", \"mt-2\"], [1, \"grid\", \"grid-cols-1\", \"md:grid-cols-2\", \"gap-4\", \"mt-3\"], [\"class\", \"border rounded p-3\", 4, \"ngFor\", \"ngForOf\"], [1, \"border\", \"rounded\", \"p-3\"], [1, \"mt-2\", \"flex\", \"items-center\", \"gap-2\"], [\"type\", \"number\", \"min\", \"1\", 1, \"w-20\", \"border\", \"rounded\", \"px-2\", \"py-1\", 3, \"ngModelChange\", \"ngModel\"], [1, \"px-3\", \"py-1\", \"bg-senteranga-green\", \"text-white\", \"rounded\", 3, \"click\"], [\"class\", \"text-sm py-1 border-b last:border-b-0\", 4, \"ngFor\", \"ngForOf\"], [1, \"text-sm\", \"py-1\", \"border-b\", \"last:border-b-0\"]],\n        template: function DashboardAgriculteurComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelement(0, \"app-header\");\n            i0.ɵɵelementStart(1, \"section\", 0)(2, \"h1\", 1);\n            i0.ɵɵtext(3, \"Espace Agriculteur\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(4, \"div\", 2)(5, \"div\", 3)(6, \"div\", 4)(7, \"h2\", 5);\n            i0.ɵɵtext(8, \"Publier un produit\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(9, \"form\", 6);\n            i0.ɵɵlistener(\"ngSubmit\", function DashboardAgriculteurComponent_Template_form_ngSubmit_9_listener() {\n              return ctx.publishProduct();\n            });\n            i0.ɵɵelementStart(10, \"div\", 7)(11, \"div\")(12, \"label\", 8);\n            i0.ɵɵtext(13, \"Titre *\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(14, \"input\", 9);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(15, \"div\")(16, \"label\", 8);\n            i0.ɵɵtext(17, \"Cat\\u00E9gorie *\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(18, \"select\", 10)(19, \"option\", 11);\n            i0.ɵɵtext(20, \"S\\u00E9lectionner une cat\\u00E9gorie\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(21, \"option\", 12);\n            i0.ɵɵtext(22, \"L\\u00E9gumes\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(23, \"option\", 13);\n            i0.ɵɵtext(24, \"Fruits\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(25, \"option\", 14);\n            i0.ɵɵtext(26, \"C\\u00E9r\\u00E9ales\");\n            i0.ɵɵelementEnd()()()();\n            i0.ɵɵelementStart(27, \"div\")(28, \"label\", 8);\n            i0.ɵɵtext(29, \"Description *\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(30, \"textarea\", 15);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(31, \"div\", 16)(32, \"div\")(33, \"label\", 8);\n            i0.ɵɵtext(34, \"Quantit\\u00E9 *\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(35, \"input\", 17);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(36, \"div\")(37, \"label\", 8);\n            i0.ɵɵtext(38, \"Quantit\\u00E9 minimale *\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(39, \"input\", 18);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(40, \"div\")(41, \"label\", 8);\n            i0.ɵɵtext(42, \"Unit\\u00E9 *\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(43, \"select\", 19)(44, \"option\", 11);\n            i0.ɵɵtext(45, \"Choisir une unit\\u00E9\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(46, \"option\", 20);\n            i0.ɵɵtext(47, \"Kilogramme (kg)\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(48, \"option\", 21);\n            i0.ɵɵtext(49, \"Tonne\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(50, \"option\", 22);\n            i0.ɵɵtext(51, \"Litre (l)\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(52, \"option\", 23);\n            i0.ɵɵtext(53, \"Unit\\u00E9\");\n            i0.ɵɵelementEnd()()();\n            i0.ɵɵelementStart(54, \"div\")(55, \"label\", 8);\n            i0.ɵɵtext(56, \"Prix par unit\\u00E9 (FCFA) *\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(57, \"input\", 24);\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(58, \"div\")(59, \"label\", 8);\n            i0.ɵɵtext(60, \"Localisation *\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(61, \"input\", 25);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(62, \"div\")(63, \"label\", 8);\n            i0.ɵɵtext(64, \"Images\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(65, \"div\", 26)(66, \"input\", 27);\n            i0.ɵɵlistener(\"change\", function DashboardAgriculteurComponent_Template_input_change_66_listener($event) {\n              return ctx.onImagesSelected($event);\n            });\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(67, \"button\", 28);\n            i0.ɵɵlistener(\"click\", function DashboardAgriculteurComponent_Template_button_click_67_listener() {\n              return !ctx.cameraActive ? ctx.startCamera() : ctx.stopCamera();\n            });\n            i0.ɵɵtext(68);\n            i0.ɵɵelementEnd()();\n            i0.ɵɵtemplate(69, DashboardAgriculteurComponent_div_69_Template, 4, 0, \"div\", 29)(70, DashboardAgriculteurComponent_div_70_Template, 2, 1, \"div\", 30);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(71, \"canvas\", 31);\n            i0.ɵɵelementStart(72, \"div\", 32)(73, \"button\", 33);\n            i0.ɵɵtext(74, \"Publier le produit\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(75, \"button\", 34);\n            i0.ɵɵlistener(\"click\", function DashboardAgriculteurComponent_Template_button_click_75_listener() {\n              return ctx.resetProductForm();\n            });\n            i0.ɵɵtext(76, \"Annuler\");\n            i0.ɵɵelementEnd()()();\n            i0.ɵɵtemplate(77, DashboardAgriculteurComponent_div_77_Template, 5, 1, \"div\", 35);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(78, \"div\", 4)(79, \"h2\", 36);\n            i0.ɵɵtext(80, \"Demande de subvention / investissement\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(81, \"p\", 37);\n            i0.ɵɵtext(82, \"Formulaires de demande (subvention / investissement) \\u2014 visibilit\\u00E9 pour les institutions et investisseurs.\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(83, \"div\", 4)(84, \"h2\", 36);\n            i0.ɵɵtext(85, \"Catalogue de semences\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(86, \"p\", 37);\n            i0.ɵɵtext(87, \"Consultez le catalogue, commandez et payez pour am\\u00E9liorer votre production.\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵtemplate(88, DashboardAgriculteurComponent_div_88_Template, 2, 0, \"div\", 38)(89, DashboardAgriculteurComponent_div_89_Template, 2, 1, \"div\", 39);\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(90, \"aside\", 40)(91, \"div\", 41)(92, \"h3\", 42);\n            i0.ɵɵtext(93, \"Compte bancaire\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(94, \"p\", 37);\n            i0.ɵɵtext(95, \"Ajouter un compte pour recevoir paiements et subventions.\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(96, \"form\", 43);\n            i0.ɵɵlistener(\"ngSubmit\", function DashboardAgriculteurComponent_Template_form_ngSubmit_96_listener() {\n              return ctx.saveBankAccount();\n            });\n            i0.ɵɵelement(97, \"input\", 44)(98, \"input\", 45);\n            i0.ɵɵelementStart(99, \"div\", 46)(100, \"button\", 47);\n            i0.ɵɵtext(101, \"Enregistrer\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(102, \"button\", 48);\n            i0.ɵɵlistener(\"click\", function DashboardAgriculteurComponent_Template_button_click_102_listener() {\n              return ctx.bankForm.reset();\n            });\n            i0.ɵɵtext(103, \"Annuler\");\n            i0.ɵɵelementEnd()()()();\n            i0.ɵɵelementStart(104, \"div\", 41)(105, \"h3\", 42);\n            i0.ɵɵtext(106, \"Alertes / Conseils Agronomes\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(107, \"p\", 37);\n            i0.ɵɵtext(108, \"Recevez des alertes filtr\\u00E9es par r\\u00E9gion.\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵtemplate(109, DashboardAgriculteurComponent_div_109_Template, 2, 0, \"div\", 49)(110, DashboardAgriculteurComponent_ul_110_Template, 2, 1, \"ul\", 50);\n            i0.ɵɵelementEnd()()()();\n            i0.ɵɵelement(111, \"app-footer\");\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance(9);\n            i0.ɵɵproperty(\"formGroup\", ctx.productForm);\n            i0.ɵɵadvance(59);\n            i0.ɵɵtextInterpolate1(\" \", ctx.cameraActive ? \"\\u2715 Fermer cam\\u00E9ra\" : \"\\uD83D\\uDCF7 Prendre photo\", \" \");\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", ctx.cameraActive);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", ctx.uploadedImageCount > 0);\n            i0.ɵɵadvance(7);\n            i0.ɵɵproperty(\"ngIf\", ctx.products.length > 0);\n            i0.ɵɵadvance(11);\n            i0.ɵɵproperty(\"ngIf\", ctx.seeds.length === 0);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", ctx.seeds.length > 0);\n            i0.ɵɵadvance(7);\n            i0.ɵɵproperty(\"formGroup\", ctx.bankForm);\n            i0.ɵɵadvance(13);\n            i0.ɵɵproperty(\"ngIf\", ctx.alerts.length === 0);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", ctx.alerts.length > 0);\n          }\n        },\n        dependencies: [CommonModule, i3.NgClass, i3.NgForOf, i3.NgIf, RouterModule, HeaderComponent, FooterComponent, ReactiveFormsModule, i2.ɵNgNoValidate, i2.NgSelectOption, i2.ɵNgSelectMultipleOption, i2.DefaultValueAccessor, i2.NumberValueAccessor, i2.SelectControlValueAccessor, i2.NgControlStatus, i2.NgControlStatusGroup, i2.RequiredValidator, i2.MinValidator, i2.FormGroupDirective, i2.FormControlName, FormsModule, i2.NgModel],\n        encapsulation: 2\n      });\n    }\n  }\n  return DashboardAgriculteurComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}